{"version":3,"sources":["components/common/TabPanel.tsx","components/Header.tsx","store/SnackbarStore.ts","store/SystemLogStore.ts","fixtures/logMessages.ts","store/ChannelStore.ts","fixtures/codeExamples.ts","components/common/CopyToClipboard.tsx","fixtures/contexts.ts","store/ContextStore.ts","components/common/TemplateTextField.tsx","components/ContextLinking.tsx","components/ContextTemplates.tsx","components/Channels.tsx","components/common/AccordionContent.tsx","components/common/AccordionList.tsx","components/Workbench/ContextListeners.tsx","fixtures/intentTypes.ts","store/IntentStore.ts","components/Workbench/IntentListeners.tsx","store/AppChannelStore.tsx","components/Workbench/AppChannelListeners.tsx","components/Workbench/SystemLogItem.tsx","components/Workbench/SystemLog.tsx","components/Workbench/Workbench.tsx","components/common/JsonInput.tsx","components/common/DialogModal.tsx","components/ContextCreate.tsx","components/Intents.tsx","components/AppChannels.tsx","App.tsx","index.tsx"],"names":["useStyles","makeStyles","theme","createStyles","tabPanel","padding","spacing","TabPanel","props","classes","children","value","index","other","role","hidden","id","className","root","flexGrow","toolbar","backgroundColor","paddingBottom","link","color","palette","common","white","textDecoration","info","marginLeft","minWidth","fontSize","fdc3","headerCube","width","height","backgroundHeader","background","left","top","position","zIndex","Header","useState","appInfo","setAppInfo","useEffect","fdc3Available","implInfo","displayInfo","fdc3Version","provider","providerVersion","e","console","error","AppBar","elevation","style","Toolbar","Typography","variant","src","scope","snackbarStore","snackbarData","makeObservable","this","observable","setSnackbar","action","clearSnackbarData","data","nanoid","SystemLogStore","logList","addLog","name","type","body","message","logMessages","getFdc3","getChannels","success","getCurrentChannel","joinChannel","leaveChannel","warning","broadcast","appbroadcast","raiseIntent","raiseIntentForContext","addContextListener","removeContextListener","removeAppChannelContextListener","addIntentListener","removeIntentListener","receivedContextListener","receivedAppContextListener","addAppContextListener","receivedIntentListener","saveTemplate","deleteTemplate","copyToClipboard","getOrCreateChannel","getLogMessage","push","systemLogStore","ChannelStore","systemChannels","currentChannel","channel","runInAction","fdc3Ready","then","JSON","stringify","catch","reason","channelId","isSuccess","channelStore","codeExamples","text","navigator","clipboard","writeText","contexts","uuid","uuidv4","template","email","schemaUrl","URL","contacts","ticker","RIC","ISIN","instruments","LEI","FDS_ID","ISOALPHA3","instrument","holding","positions","ContextStore","contextsList","currentContext","contextListeners","setContext","deleteContextItem","addContextItem","saveContextItem","localStorageContextList","localStorage","getItem","usingDefaultContexts","parsedListFromStorage","parse","Array","isArray","err","log","updateLocalStorage","contextItem","sort","a","b","localeCompare","selectedId","context","find","Object","keys","forEach","key","filter","c","setItem","toJS","contextType","listenerId","contactListener","window","toLowerCase","currentListener","lastReceivedContext","listener","listenerIndex","findIndex","unsubscribe","splice","contextStore","TemplateTextField","withStyles","borderBottomColor","borderColor","TextField","form","display","flexWrap","marginTop","marginRight","controls","spread","flexDirection","justifyContent","contextListenerName","rightAlign","listenerFilter","createFilterOptions","ContextLinking","observer","contextListener","setContextListener","contextError","setContextError","contextListenersOptionsAll","map","title","unshift","setValue","setError","contextListenersOptions","from","Map","reverse","item","values","handleAddContextListener","preventDefault","isContextListenerExists","Grid","xs","noValidate","autoComplete","onSubmit","container","direction","Autocomplete","size","selectOnFocus","blurOnSelect","clearOnBlur","handleHomeEndKeys","onChange","event","newValue","inputValue","filterOptions","options","params","filtered","getOptionLabel","option","renderOption","renderInput","label","placeholder","helperText","Button","onClick","Tooltip","IconButton","contextName","cursor","contextFilter","ContextTemplates","handleTabChange","contextStateSetter","contextsOptions","isInitialMount","useRef","current","selectedContext","getOptionSelected","alignItems","margin","paddingLeft","channelsSelect","border","marginBottom","centerChildren","Channels","setChannelId","isError","setIsError","broadcastContext","setBroadcastContext","sm","FormControl","InputLabel","Select","labelId","target","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","length","MenuItem","disabled","FormHelperText","accordion","boxShadow","accordionSummary","minHeight","accordionDetails","paddingTop","accordionTitle","expand_icon","icon","AccordionContent","Accordion","defaultExpanded","AccordionSummary","expandIcon","AccordionDetails","list","listItem","paddingRight","listAction","transform","AccordionList","listItems","noItemsText","onDelete","handleDelete","List","textPrimary","afterEachElement","ListItem","disableGutters","ListItemText","disableTypography","primary","secondary","ListItemSecondaryAction","edge","textField","input","ContextListeners","receivedContextListenerValue","undefined","contextField","InputLabelProps","shrink","contentEditable","fullWidth","multiline","InputProps","intentTypes","IntentStore","intentsList","intentListeners","intent","intentListener","app","appIntent","intentStore","IntentListeners","AppChannelStore","appChannelsList","currentAppChannel","appChannelListeners","newListener","appChannelStore","AppChannelListeners","SystemLogItem","logItem","borderTop","dark","divider","SystemLog","component","paper","systemLog","maxHeight","overflowY","indicator","tabs","borderBottomStyle","borderBottomWidth","a11yProps","Workbench","tabValue","setTabValue","Tabs","indicatorColor","scrollButtons","Tab","borderRadius","shape","grey","jsonInput","errorText","bottom","main","JsonInput","jsoneditor","setJsoneditor","initialSettings","mode","mainMenuBar","statusBar","indentation","onChangeText","onValidationError","onJsonError","errorMsg","schema","$RefParser","dereference","circular","href","editor","JSONEditor","json","destroy","setSchema","set","tabIndex","ref","DialogModal","onClose","onAgree","open","selectedValue","handleClose","Dialog","DialogTitle","DialogActions","autoFocus","templateSelect","multilineField","button","delete","copy","margins","tableContainer","emptyJson","ContextCreate","templateName","setTemplateName","duplicateName","setDuplicateName","contextValue","setContextValue","setOpen","deleteContext","setDeleteContext","setDisabled","gridRef","handleChangeTemplate","found","tempName","ignoreUuid","reduce","count","validate","handleCreateTemplate","handleSaveTemplate","isValid","currContext","handleDuplicateTemplate","copyName","newContext","scrollIntoView","behavior","block","contextId","TableContainer","Table","TableBody","TableRow","hover","selected","TableCell","align","handleClickOpen","resetContextList","field","errors","h4","bottomMargin","removeSidePadding","targetSelect","rightPadding","Intents","intentValue","setIntentValue","raiseIntentError","setRaiseIntentError","setIntentListener","intentsForContext","setIntentsForContext","intentTargets","setIntentTargets","targetApp","setTargetApp","contextTargetApp","setContextTargetApp","intentObjects","setIntentObjects","contextIntentObjects","setContextIntentObjects","raiseIntentContext","setRaiseIntentContext","raiseIntentWithContextContext","setRaiseIntentWithContextContext","intentError","setIntentError","intentListenersOptions","handleChangeListener","fetchIntents","appIntents","targets","obj","apps","appIntentsForContext","pairObject","appId","targetObject","topMargin","h6","AppChannels","render","setRender","currentAppChannelId","setCurrentAppChannelId","handleGetorCreateChannel","foundChannel","listenerError","addChannelListener","handleContextStateChange","handleBroadcast","onKeyDown","defaultPrevented","mainTheme","createTheme","light","contrastText","MuiLink","underline","typography","fontFamily","h5","body1","fontWeight","lineHeight","letterSpacing","marginBlockStart","marginBlockEnd","header","tabIndicator","footer","fontStyle","code","workbench","breakpoints","down","openAPIDocs","openSpecAccessDocs","openSupportedPlatformsDocs","App","setFdc3Available","openSnackbar","setOpenSnackbar","setTabIndex","setContextName","newIndex","setTimeout","ThemeProvider","md","flex","Paper","Link","Snackbar","autoHideDuration","Alert","severity","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3397aacf.chunk.js","sourcesContent":["import React from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\ninterface TabPanelProps {\n\tchildren?: React.ReactNode;\n\tindex: any;\n\tvalue: any;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttabPanel: {\n\t\t\tpadding: theme.spacing(2),\n\t\t},\n\t})\n);\n\nexport const TabPanel: React.FC<TabPanelProps> = (props: TabPanelProps) => {\n\tconst classes = useStyles();\n\n\tconst { children, value, index, ...other } = props;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"tabpanel\"\n\t\t\thidden={value !== index}\n\t\t\tid={`scrollable-auto-tabpanel-${index}`}\n\t\t\taria-labelledby={`scrollable-auto-tab-${index}`}\n\t\t\t{...other}\n\t\t>\n\t\t\t{value === index && <div className={classes.tabPanel}>{children}</div>}\n\t\t</div>\n\t);\n};\n","import React, { useEffect, useState } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { AppBar, Toolbar, Typography } from \"@material-ui/core\";\nimport * as fdc3 from \"@finos/fdc3\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\ttoolbar: {\n\t\t\tbackgroundColor: \"transparent\",\n\t\t\tpadding: theme.spacing(2, 4),\n\t\t\tpaddingBottom: \"0px\",\n\t\t},\n\t\tlink: {\n\t\t\tcolor: theme.palette.common.white,\n\t\t\ttextDecoration: \"underline\",\n\t\t\t\"&:hover\": {\n\t\t\t\tcolor: theme.palette.common.white,\n\t\t\t},\n\t\t},\n\t\tinfo: {\n\t\t\tmarginLeft: \"auto\",\n\t\t\tminWidth: \"200px\",\n\t\t\tfontSize: \"12px\",\n\t\t},\n\t\tfdc3: {},\n\t\theaderCube: {\n\t\t\twidth: \"350px\",\n\t\t\theight: \"50px\",\n\t\t},\n\t\tbackgroundHeader: {\n\t\t\tbackground: \"linear-gradient(to bottom, #0086bf, #00bbe1)\",\n\t\t\theight: \"200px\",\n\t\t\twidth: \"100%\",\n\t\t\tleft: \"0px\",\n\t\t\ttop: \"0px\",\n\t\t\tposition: \"absolute\",\n\t\t\tzIndex: -10,\n\t\t},\n\t})\n);\n\nexport const Header = (props: { fdc3Available: boolean }) => {\n\tconst classes = useStyles();\n\tconst [appInfo, setAppInfo] = useState<fdc3.ImplementationMetadata>();\n\n\tuseEffect(() => {\n\t\tif (props.fdc3Available) {\n\t\t\t//getInfo is not available in FDC3 < v1.2, handle any errors thrown when trying to use it\n\t\t\ttry {\n\t\t\t\tlet implInfo = fdc3.getInfo();\n\t\t\t\tlet displayInfo = {\n\t\t\t\t\tfdc3Version: \"not specified\",\n\t\t\t\t\tprovider: \"not specified\",\n\t\t\t\t\tproviderVersion: \"not specified\",\n\t\t\t\t};\n\t\t\t\tif (implInfo.fdc3Version) {\n\t\t\t\t\tdisplayInfo.fdc3Version = implInfo.fdc3Version;\n\t\t\t\t}\n\t\t\t\tif (implInfo.provider) {\n\t\t\t\t\tdisplayInfo.provider = implInfo.provider;\n\t\t\t\t}\n\t\t\t\tif (implInfo.providerVersion) {\n\t\t\t\t\tdisplayInfo.providerVersion = implInfo.providerVersion;\n\t\t\t\t}\n\t\t\t\tsetAppInfo(displayInfo);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Failed to retrieve FDC3 implementation info\", e);\n\t\t\t}\n\t\t}\n\t}, [props.fdc3Available]);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.backgroundHeader}></div>\n\t\t\t<AppBar position=\"static\" elevation={0} style={{ backgroundColor: \"transparent\" }}>\n\t\t\t\t<Toolbar className={classes.toolbar}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Typography variant=\"h3\" color=\"inherit\" className={classes.fdc3}>\n\t\t\t\t\t\t\t<img src=\"./fdc3-logo.svg\" className={classes.headerCube} />\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={classes.info}>\n\t\t\t\t\t\t<table id=\"providerInfo\">\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th scope=\"row\">FDC3 Version</th>\n\t\t\t\t\t\t\t\t\t<td>{appInfo?.fdc3Version ? appInfo.fdc3Version : \"unknown\"}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th scope=\"row\">Provider</th>\n\t\t\t\t\t\t\t\t\t<td>{appInfo?.provider ? appInfo.provider : \"unknown\"}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th scope=\"row\">Provider version</th>\n\t\t\t\t\t\t\t\t\t<td>{appInfo?.providerVersion ? appInfo.providerVersion : \"unknown\"}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t</div>\n\t);\n};\n","import { makeObservable, observable, action } from \"mobx\";\nimport { Color } from \"@material-ui/lab/Alert\";\nimport { nanoid } from \"nanoid\";\n\ninterface SnackbarData {\n\tmessage: string;\n\ttype: Color;\n}\n\ninterface SnackbarItem extends SnackbarData {\n\tid: string;\n}\n\nclass SnackbarStore {\n\tsnackbarData: SnackbarItem | null = null;\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tsnackbarData: observable,\n\t\t\tsetSnackbar: action,\n\t\t\tclearSnackbarData: action,\n\t\t});\n\t}\n\n\tsetSnackbar(data: SnackbarData) {\n\t\tthis.snackbarData = { ...data, id: nanoid() };\n\t}\n\n\tclearSnackbarData() {\n\t\tthis.snackbarData = null;\n\t}\n}\n\nconst snackbarStore = new SnackbarStore();\n\nexport default snackbarStore;\n","import { makeObservable, observable, action } from \"mobx\";\nimport { nanoid } from \"nanoid\";\nimport { getLogMessage } from \"../fixtures/logMessages\";\nimport snackbarStore from \"./SnackbarStore\";\n\nexport type logMessagesName =\n\t| \"getFdc3\"\n\t| \"getChannels\"\n\t| \"getCurrentChannel\"\n\t| \"joinChannel\"\n\t| \"leaveChannel\"\n\t| \"broadcast\"\n\t| \"appbroadcast\"\n\t| \"raiseIntent\"\n\t| \"raiseIntentForContext\"\n\t| \"addContextListener\"\n\t| \"removeContextListener\"\n\t| \"addIntentListener\"\n\t| \"removeIntentListener\"\n\t| \"receivedContextListener\"\n\t| \"receivedIntentListener\"\n\t| \"deleteTemplate\"\n\t| \"saveTemplate\"\n\t| \"copyToClipboard\"\n\t| \"getOrCreateChannel\"\n\t| \"receivedAppContextListener\"\n\t| \"addAppContextListener\"\n\t| \"removeAppChannelContextListener\";\n\nexport type logMessagesType = \"error\" | \"success\" | \"warning\" | \"info\";\n\nexport interface LogItem {\n\tid: string;\n\tname: logMessagesName;\n\ttype: logMessagesType;\n\tmessage: string;\n\tbody?: string;\n\tvariant?: \"code\" | \"text\";\n}\n\ninterface LogItemCreator extends Omit<LogItem, \"message\" | \"id\"> {\n\tvalue?: string;\n}\n\nclass SystemLogStore {\n\tlogList: LogItem[] = [];\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tlogList: observable,\n\t\t\taddLog: action,\n\t\t});\n\t}\n\n\taddLog({ name, type, value, body, variant }: LogItemCreator) {\n\t\tconst message = getLogMessage(name, type, value);\n\t\tsnackbarStore.setSnackbar({\n\t\t\tmessage: message,\n\t\t\ttype: type,\n\t\t});\n\n\t\tthis.logList.push({ id: nanoid(), name, type, message, body, variant: variant ?? \"text\" });\n\t}\n}\n\nconst systemLogStore = new SystemLogStore();\n\nexport default systemLogStore;\n","import { logMessagesName, logMessagesType } from \"../store/SystemLogStore\";\n\ntype LogMessages = {\n\t[name in logMessagesName]: {\n\t\t[type in logMessagesType]?: string;\n\t};\n};\n\nexport const getLogMessage = (name: logMessagesName, type: logMessagesType, value: string = \"\"): string => {\n\tconst logMessages: LogMessages = {\n\t\tgetFdc3: {\n\t\t\terror: `The FDC3 API is not ready${value ? ` (${value})` : \"\"}`,\n\t\t},\n\t\tgetChannels: {\n\t\t\tsuccess: `Successfully retrieved System channels`,\n\t\t\terror: `Failed to retrieve System channels`,\n\t\t},\n\t\tgetCurrentChannel: {\n\t\t\tsuccess: `Successfully retrieved current channel [${value}]`,\n\t\t\terror: `Failed to retrieve current channel`,\n\t\t},\n\t\tjoinChannel: {\n\t\t\tsuccess: `Successfully joined the [${value}] channel`,\n\t\t\terror: `Failed to join the [${value}] channel`,\n\t\t},\n\t\tleaveChannel: {\n\t\t\tsuccess: `Successfully left the [${value}] channel`,\n\t\t\terror: `Failed to leave the [${value}] channel`,\n\t\t\twarning: `Not currently joined to a channel`,\n\t\t},\n\t\tbroadcast: {\n\t\t\tsuccess: \"Successfully broadcast context\",\n\t\t\terror: \"Failed to broadcast context:\",\n\t\t},\n\t\tappbroadcast: {\n\t\t\tsuccess: `Successfully broadcast context to channel [${value}]: `,\n\t\t\terror: `Failed to broadcast context to channel [${value}]:`,\n\t\t},\n\t\traiseIntent: {\n\t\t\tsuccess: `Successfully raised intent [${value}]`,\n\t\t\terror: `Failed to raise intent [${value}]`,\n\t\t},\n\t\traiseIntentForContext: {\n\t\t\tsuccess: `Successfully raised intent for context`,\n\t\t\terror: `Failed to raise intent for context`,\n\t\t},\n\t\taddContextListener: {\n\t\t\tsuccess: `A context listener for '[${value}]' has been added`,\n\t\t\terror: `Failed to add a context listener for '[${value}]'`,\n\t\t},\n\t\tremoveContextListener: {\n\t\t\tsuccess: `A context listener for '[${value}]' has been removed`,\n\t\t\terror: `Failed to remove a context listener for '[${value}]'`,\n\t\t},\n\t\tremoveAppChannelContextListener: {\n\t\t\tsuccess: `${value}`,\n\t\t\terror: `${value}`,\n\t\t},\n\t\taddIntentListener: {\n\t\t\tsuccess: `An intent listener for '[${value}]' has been added`,\n\t\t\terror: `Failed to add an intent listener for '[${value}]'`,\n\t\t},\n\t\tremoveIntentListener: {\n\t\t\tsuccess: `An intent listener for '[${value}]' has been removed`,\n\t\t\terror: `Failed to remove an intent listener for '[${value}]'`,\n\t\t},\n\t\treceivedContextListener: {\n\t\t\tinfo: `Received context via '[${value}]' listener`,\n\t\t\terror: `Failed to receive context from '[${value}]' listener`,\n\t\t},\n\t\treceivedAppContextListener: {\n\t\t\tinfo: `${value}`,\n\t\t\terror: `${value}`,\n\t\t},\n\t\taddAppContextListener: {\n\t\t\tinfo: `${value}`,\n\t\t\terror: `${value}`,\n\t\t},\n\t\treceivedIntentListener: {\n\t\t\tinfo: `Received context via '[${value}]' listener.`,\n\t\t\terror: `Failed to receive context from '[${value}]' listener.`,\n\t\t},\n\t\tsaveTemplate: {\n\t\t\tsuccess: `Saved context template for '[${value}]'.`,\n\t\t\terror: `Failed to save context template.`,\n\t\t},\n\t\tdeleteTemplate: {\n\t\t\tsuccess: `Deleted context template for '[${value}]'.`,\n\t\t\terror: `Failed to delete context template.`,\n\t\t},\n\t\tcopyToClipboard: {\n\t\t\tinfo: `${value} code snippet copied to clipboard`,\n\t\t\terror: `Failed to copy code ${value} snippet to clipboard.`,\n\t\t},\n\t\tgetOrCreateChannel: {\n\t\t\tsuccess: `Successfully retrieved or created current app channel [${value}]`,\n\t\t\terror: `Failed retrieve or create app channel ${value}.`,\n\t\t},\n\t};\n\n\treturn logMessages[name][type] ?? (value != \"\" ? `${value}` : `Undefined log message ${name}.${type}`);\n};\n","import { makeObservable, observable, action, runInAction } from \"mobx\";\nimport * as fdc3 from \"@finos/fdc3\";\nimport systemLogStore from \"./SystemLogStore\";\nimport { fdc3Ready } from \"@finos/fdc3\";\n\nclass ChannelStore {\n\tsystemChannels: fdc3.Channel[] = [];\n\n\tcurrentChannel: fdc3.Channel | null = null;\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tsystemChannels: observable,\n\t\t\tcurrentChannel: observable,\n\t\t\tgetChannels: action,\n\t\t\tjoinChannel: action,\n\t\t\tleaveChannel: action,\n\t\t\tgetCurrentChannel: action,\n\t\t});\n\n\t\tthis.getChannels();\n\t}\n\n\tasync getCurrentChannel() {\n\t\ttry {\n\t\t\tconst channel = await fdc3.getCurrentChannel();\n\t\t\trunInAction(() => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"getCurrentChannel\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tvalue: channel ? channel.id : \"none\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t\tthis.currentChannel = channel;\n\t\t\t});\n\t\t} catch (e) {\n\t\t\trunInAction(() => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"getCurrentChannel\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tasync getChannels() {\n\t\t//defer retrieving channels until fdc3 API is ready\n\t\tfdc3Ready(5000)\n\t\t\t.then(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst systemChannels = await fdc3.getSystemChannels();\n\t\t\t\t\tconst currentChannel = await fdc3.getCurrentChannel();\n\n\t\t\t\t\trunInAction(() => {\n\t\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\t\tname: \"getChannels\",\n\t\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.systemChannels = systemChannels;\n\t\t\t\t\t\tthis.currentChannel = currentChannel;\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"getChannels\",\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((reason) => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"getFdc3\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\tvalue: reason,\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tasync joinChannel(channelId: string) {\n\t\ttry {\n\t\t\tawait fdc3.joinChannel(channelId);\n\t\t\tconst currentChannel = await fdc3.getCurrentChannel();\n\t\t\tconst isSuccess = currentChannel !== null;\n\n\t\t\trunInAction(() => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"joinChannel\",\n\t\t\t\t\ttype: isSuccess ? \"success\" : \"error\",\n\t\t\t\t\tvalue: isSuccess ? currentChannel?.id : channelId,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t\tthis.currentChannel = currentChannel;\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"joinChannel\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: channelId,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\tasync leaveChannel() {\n\t\ttry {\n\t\t\t//check that we're on a channel\n\t\t\tlet currentChannel = await fdc3.getCurrentChannel();\n\t\t\tif (!currentChannel) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"leaveChannel\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tawait fdc3.leaveCurrentChannel();\n\t\t\t\tcurrentChannel = await fdc3.getCurrentChannel();\n\t\t\t\tconst isSuccess = currentChannel === null;\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"leaveChannel\",\n\t\t\t\t\t\ttype: isSuccess ? \"success\" : \"error\",\n\t\t\t\t\t\tvalue: this.currentChannel?.id,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\n\t\t\t\t\tif (isSuccess) {\n\t\t\t\t\t\tthis.currentChannel = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"leaveChannel\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: this.currentChannel?.id,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n}\n\nconst channelStore = new ChannelStore();\n\nexport default channelStore;\n","export const codeExamples = {\n\tchannels:\n\t\t\"// get all system channels\\n\" +\n\t\t\"const channels = await fdc3.getSystemChannels();\\n\" +\n\t\t\"\\n\" +\n\t\t\"// create UI to pick from the system channels\\n\" +\n\t\t\"\\n\" +\n\t\t\"// join the channel on selection\\n\" +\n\t\t\"fdc3.joinChannel(selectedChannel.id);\",\n\tgetCurrentChannel:\n\t\t\"// get the current channel membership\\n\" +\n\t\t\"let current = await fdc3.getCurrentChannel();\\n\" +\n\t\t\"\\n\" +\n\t\t\"//leave the current channel\\n\" +\n\t\t\"await fdc3.leaveCurrentChannel();\\n\" +\n\t\t\"//the fdc3Listener will now cease receiving context\",\n\tbroadcast:\n\t\t\"const instrument = {\\n\" +\n\t\t\"    type: 'fdc3.instrument',\\n\" +\n\t\t\"    id: {\\n\" +\n\t\t\"        ticker: 'AAPL'\\n\" +\n\t\t\"    }\\n\" +\n\t\t\"};\\n\" +\n\t\t\"\\n\" +\n\t\t\"fdc3.broadcast(instrument);\",\n\tappChannelBroadcast:\n\t\t\"const instrument = {\\n\" +\n\t\t\"    type: 'fdc3.instrument',\\n\" +\n\t\t\"    id: {\\n\" +\n\t\t\"        ticker: 'AAPL'\\n\" +\n\t\t\"    }\\n\" +\n\t\t\"};\\n\" +\n\t\t\"\\n\" +\n\t\t\"appChannelID.broadcast(instrument);\",\n\traiseIntent:\n\t\t\"//Raise an intent with a specified context\\n\" +\n\t\t'let context = {type: \"fdc3.instrument\", name: \"Tesla, inc.\", id: {ticker: \"TSLA\"}}; \\n' +\n\t\t'fdc3.raiseIntent(\"ViewChart\", context);',\n\tcontextListener:\n\t\t\"// any context\\n\" +\n\t\t\"const listener = fdc3.addContextListener(null, context => {\\n\" +\n\t\t\"    //add context handling code here\\n\" +\n\t\t\"});\\n\" +\n\t\t\"\\n\" +\n\t\t\"// listener for a specific type\\n\" +\n\t\t\"const contactListener = fdc3.addContextListener('fdc3.contact', contact => {\\n\" +\n\t\t\"    //add context handling code here\\n\" +\n\t\t\"});\",\n\tappChannelContextListener:\n\t\t\"// any context\\n\" +\n\t\t\"const listener = appChannelID.addContextListener(null, context => {\\n\" +\n\t\t\"    //add context handling code here\\n\" +\n\t\t\"});\\n\" +\n\t\t\"\\n\" +\n\t\t\"// listener for a specific type\\n\" +\n\t\t\"const contactListener = appChannelID.addContextListener('fdc3.contact', contact => {\\n\" +\n\t\t\"    //add context handling code here\\n\" +\n\t\t\"});\",\n\tintentListener:\n\t\t\"const listener = fdc3.addIntentListener('StartChat', context => {\\n\" +\n\t\t\"  // start chat has been requested by another application\\n\" +\n\t\t\"});\",\n\traiseIntentForContext: \"const intentResolution = await fdc3.raiseIntentForContext(context);\",\n};\n","import { runInAction } from \"mobx\";\nimport systemLogStore from \"../../store/SystemLogStore\";\n\nexport const copyToClipboard = (text: string, name: string) => () => {\n\tnavigator.clipboard.writeText(text);\n\trunInAction(() => {\n\t\tsystemLogStore.addLog({\n\t\t\tname: \"copyToClipboard\",\n\t\t\ttype: \"info\",\n\t\t\tvalue: name,\n\t\t\tvariant: \"text\",\n\t\t});\n\t});\n};\n","import { ContextItem } from \"../store/ContextStore\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport const contexts: ContextItem[] = [\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Contact example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.contact\",\n\t\t\tname: \"Jane Doe\",\n\t\t\tid: {\n\t\t\t\temail: \"jane.doe@mail.com\",\n\t\t\t},\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/contact.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"ContactList example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.contactList\",\n\t\t\tcontacts: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.contact\",\n\t\t\t\t\tname: \"Jane Doe\",\n\t\t\t\t\tid: {\n\t\t\t\t\t\temail: \"jane.doe@mail.com\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.contact\",\n\t\t\t\t\tname: \"John Doe\",\n\t\t\t\t\tid: {\n\t\t\t\t\t\temail: \"john.doe@mail.com\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/contactList.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Instrument example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.instrument\",\n\t\t\tname: \"Microsoft\",\n\t\t\tid: {\n\t\t\t\tticker: \"MSFT\",\n\t\t\t\tRIC: \"MSFT.OQ\",\n\t\t\t\tISIN: \"US5949181045\",\n\t\t\t},\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/instrument.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"InstrumentList example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.instrumentList\",\n\t\t\tinstruments: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\t\tid: {\n\t\t\t\t\t\tticker: \"AAPL\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\t\tid: {\n\t\t\t\t\t\tticker: \"MSFT\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/instrumentList.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Organization example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.organization\",\n\t\t\tname: \"Cargill, Incorporated\",\n\t\t\tid: {\n\t\t\t\tLEI: \"QXZYQNMR4JZ5RIRN4T31\",\n\t\t\t\tFDS_ID: \"00161G-E\",\n\t\t\t},\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/organization.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Country example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.country\",\n\t\t\tname: \"Sweden\",\n\t\t\tid: {\n\t\t\t\tISOALPHA3: \"SWE\",\n\t\t\t},\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/country.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Position example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.position\",\n\t\t\tinstrument: {\n\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\tid: {\n\t\t\t\t\tticker: \"AAPL\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tholding: 2000000,\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/position.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Portfolio example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.portfolio\",\n\t\t\tpositions: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.position\",\n\t\t\t\t\tinstrument: {\n\t\t\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\tticker: \"AAPL\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tholding: 2000000,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.position\",\n\t\t\t\t\tinstrument: {\n\t\t\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\tticker: \"MSFT\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tholding: 1500000,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.position\",\n\t\t\t\t\tinstrument: {\n\t\t\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\tticker: \"IBM\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tholding: 3000000,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/portfolio.schema.json\"),\n\t},\n];\n","import { makeObservable, observable, runInAction, action, toJS } from \"mobx\";\nimport * as fdc3 from \"@finos/fdc3\";\nimport { nanoid } from \"nanoid\";\nimport { contexts } from \"../fixtures/contexts\";\nimport systemLogStore from \"./SystemLogStore\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport type ContextType = {\n\ttype: string;\n\tid?: {\n\t\t[key: string]: string;\n\t};\n\tname?: string;\n\t[x: string]: any;\n};\n\nexport type ContextItem = {\n\tid: string;\n\tuuid?: string; //used to determine if a duplicate id is for the same object or not\n\ttemplate: ContextType | null;\n\tschemaUrl?: URL;\n};\n\ninterface Fdc3Listener {\n\tid: string;\n\ttype: string;\n\tlistener: fdc3.Listener;\n\tlastReceivedContext?: ContextType | null;\n}\n\nclass ContextStore {\n\tcontextsList: ContextItem[] = contexts;\n\n\tcurrentContext: ContextType | null = null;\n\n\tcontextListeners: Fdc3Listener[] = [];\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tcontextsList: observable,\n\t\t\tcurrentContext: observable,\n\t\t\tcontextListeners: observable,\n\t\t\tsetContext: action,\n\t\t\tdeleteContextItem: action,\n\t\t\tbroadcast: action,\n\t\t\taddContextItem: action,\n\t\t\tsaveContextItem: action,\n\t\t\taddContextListener: action,\n\t\t\tremoveContextListener: action,\n\t\t});\n\t\tconst localStorageContextList = localStorage.getItem(\"contextList\");\n\t\tlet usingDefaultContexts = true;\n\t\ttry {\n\t\t\tif (localStorageContextList) {\n\t\t\t\tconst parsedListFromStorage = JSON.parse(localStorageContextList);\n\t\t\t\tif (Array.isArray(parsedListFromStorage)) {\n\t\t\t\t\tthis.contextsList = parsedListFromStorage;\n\t\t\t\t\tusingDefaultContexts = false;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.log(\"Failed to parse context list from localstorage\");\n\t\t}\n\t\tif (usingDefaultContexts) {\n\t\t\tthis.updateLocalStorage(JSON.stringify(contexts));\n\t\t}\n\t}\n\n\taddContextItem(contextItem: ContextItem) {\n\t\tcontextItem.uuid = uuidv4();\n\t\tthis.contextsList.push(contextItem);\n\t\tthis.contextsList.sort((a, b) => a.id.localeCompare(b.id));\n\t\tthis.updateLocalStorage(this.contextsList);\n\t}\n\n\tsaveContextItem(contextItem: ContextItem, selectedId?: string) {\n\t\tconst context = this.contextsList.find(({ id }) => id === selectedId || id === contextItem.id);\n\t\tif (context) {\n\t\t\tObject.keys(contextItem).forEach(\n\t\t\t\t(key: any) => ((context[key as keyof ContextItem] as any) = contextItem[key as keyof ContextItem])\n\t\t\t);\n\t\t}\n\t\tthis.updateLocalStorage(this.contextsList);\n\t}\n\n\tsetContext(context: ContextType) {\n\t\tthis.currentContext = context;\n\t}\n\n\tdeleteContextItem(contextItem: ContextItem) {\n\t\tthis.contextsList = this.contextsList.filter((c) => c != contextItem);\n\t\tthis.updateLocalStorage(this.contextsList);\n\t}\n\n\tresetContextList() {\n\t\tthis.contextsList = contexts;\n\t\tthis.updateLocalStorage(this.contextsList);\n\t}\n\n\tupdateLocalStorage(data: any) {\n\t\tlocalStorage.setItem(\"contextList\", JSON.stringify(data));\n\t}\n\n\tasync broadcast(context: ContextType) {\n\t\tif (!context) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"broadcast\",\n\t\t\t\ttype: \"warning\",\n\t\t\t\tvalue: \"You must set a context before you can broadcast it\",\n\t\t\t\tvariant: \"text\",\n\t\t\t});\n\t\t\treturn;\n\t\t} else {\n\t\t\t//check that we're on a channel\n\t\t\tlet currentChannel = await fdc3.getCurrentChannel();\n\t\t\tif (!currentChannel) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"broadcast\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\tvalue: \"You are not currently joined to a channel (no-op)\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tawait fdc3.broadcast(toJS(context));\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"broadcast\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tbody: JSON.stringify(context, null, 4),\n\t\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"broadcast\",\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\taddContextListener(contextType: string | undefined) {\n\t\ttry {\n\t\t\tif (typeof contextType === \"string\") {\n\t\t\t\tconst listenerId = nanoid();\n\n\t\t\t\t// TODO: remove window after fixing https://github.com/finos/FDC3/issues/435\n\t\t\t\tconst contactListener = window.fdc3.addContextListener(\n\t\t\t\t\tcontextType.toLowerCase() === \"all\" ? null : contextType,\n\t\t\t\t\t(context) => {\n\t\t\t\t\t\tconst currentListener = this.contextListeners.find(({ id }) => id === listenerId);\n\n\t\t\t\t\t\trunInAction(() => {\n\t\t\t\t\t\t\tif (currentListener) {\n\t\t\t\t\t\t\t\tcurrentListener.lastReceivedContext = context;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\t\tname: \"receivedContextListener\",\n\t\t\t\t\t\t\ttype: \"info\",\n\t\t\t\t\t\t\tvalue: contextType,\n\t\t\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\t\t\tbody: JSON.stringify(context, null, 4),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"addContextListener\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tvalue: contextType,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\t\t\t\t\tthis.contextListeners.push({ id: listenerId, type: contextType, listener: contactListener });\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"addContextListener\",\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\tvalue: contextType,\n\t\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"addContextListener\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: contextType,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\tremoveContextListener(id: string) {\n\t\tconst listenerIndex = this.contextListeners.findIndex((listener) => listener.id === id);\n\n\t\tif (listenerIndex !== -1) {\n\t\t\ttry {\n\t\t\t\tthis.contextListeners[listenerIndex].listener.unsubscribe();\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"removeContextListener\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tvalue: this.contextListeners[listenerIndex].type,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\t\t\t\t\tthis.contextListeners.splice(listenerIndex, 1);\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"removeContextListener\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvalue: this.contextListeners[listenerIndex].type,\n\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tisContextListenerExists(type: string | undefined) {\n\t\treturn !!this.contextListeners.find((listener) => listener.type === type);\n\t}\n}\n\nconst contextStore = new ContextStore();\n\nexport default contextStore;\n","import { withStyles } from \"@material-ui/core/styles\";\nimport { TextField } from \"@material-ui/core\";\n\nexport const TemplateTextField = withStyles({\n\troot: {\n\t\t\"& label.Mui-focused\": {\n\t\t\tcolor: \"#0086bf\",\n\t\t},\n\t\t\"& .MuiInput-underline:after\": {\n\t\t\tborderBottomColor: \"#0086bf\",\n\t\t},\n\t\t\"& .MuiOutlinedInput-root\": {\n\t\t\t\"& fieldset\": {\n\t\t\t\tborderColor: \"#0086bf\",\n\t\t\t},\n\t\t\t\"&:hover fieldset\": {\n\t\t\t\tborderColor: \"#0086bf\",\n\t\t\t},\n\t\t\t\"&.Mui-focused fieldset\": {\n\t\t\t\tborderColor: \"#0086bf\",\n\t\t\t},\n\t\t},\n\t},\n})(TextField);\n","import React, { FormEvent, useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Typography, Grid, Button, IconButton, Tooltip } from \"@material-ui/core\";\nimport { codeExamples } from \"../fixtures/codeExamples\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport Autocomplete, { createFilterOptions } from \"@material-ui/lab/Autocomplete\";\nimport contextStore from \"../store/ContextStore\";\nimport { TemplateTextField } from \"./common/TemplateTextField\";\nimport { copyToClipboard } from \"./common/CopyToClipboard\";\n\n// interface copied from lib @material-ui/lab/Autocomplete\ninterface FilterOptionsState<T> {\n\tinputValue: string;\n\tgetOptionLabel: (option: T) => string;\n}\n\ninterface ListenerOptionType {\n\ttitle: string;\n\tvalue: string;\n\ttype: string | undefined;\n}\n\ntype ListenerSetValue = (value: ListenerOptionType | null) => void;\n\ntype ListenerSetError = (error: string | false) => void;\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\tmarginTop: theme.spacing(1),\n\t\t\t\"& > *\": {\n\t\t\t\tmarginRight: 0,\n\t\t\t},\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t\tmarginLeft: theme.spacing(1),\n\t\t\t},\n\t\t},\n\t\tspread: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t\tcontextListenerName: {\n\t\t\tflexGrow: 1,\n\t\t\tmarginRight: theme.spacing(1),\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\trightAlign: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t})\n);\n\nconst listenerFilter = createFilterOptions<ListenerOptionType>();\n\nexport const ContextLinking = observer(() => {\n\tconst classes = useStyles();\n\tconst [contextListener, setContextListener] = useState<ListenerOptionType | null>(null);\n\tconst [contextError, setContextError] = useState<string | false>(false);\n\tconst contextListenersOptionsAll: ListenerOptionType[] = contextStore.contextsList.map(({ id, template }) => {\n\t\treturn {\n\t\t\ttitle: id,\n\t\t\tvalue: id,\n\t\t\ttype: template?.type,\n\t\t};\n\t});\n\tcontextListenersOptionsAll.unshift({\n\t\ttitle: \"All\",\n\t\tvalue: \"all\",\n\t\ttype: \"All\",\n\t});\n\n\tconst contextListenersOptions = Array.from(\n\t\tnew Map(contextListenersOptionsAll.reverse().map((item) => [item[\"type\"], item])).values()\n\t).reverse();\n\n\tconst handleChangeListener =\n\t\t(setValue: ListenerSetValue, setError: ListenerSetError) => (event: React.ChangeEvent<{}>, newValue: any) => {\n\t\t\tif (typeof newValue === \"string\") {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue,\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t\ttype: newValue,\n\t\t\t\t});\n\t\t\t} else if (newValue && newValue.inputValue) {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue.inputValue,\n\t\t\t\t\tvalue: newValue.inputValue,\n\t\t\t\t\ttype: newValue.inputValue,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetValue(newValue);\n\t\t\t}\n\n\t\t\tsetError(false);\n\t\t};\n\n\tconst getOptionLabel = (option: ListenerOptionType) => {\n\t\tif (option.type) {\n\t\t\treturn option.type;\n\t\t}\n\t\treturn option.title;\n\t};\n\n\tconst filterOptions = (options: ListenerOptionType[], params: FilterOptionsState<ListenerOptionType>) => {\n\t\tconst filtered = listenerFilter(options, params);\n\n\t\tif (params.inputValue !== \"\") {\n\t\t\tfiltered.push({\n\t\t\t\tvalue: params.inputValue,\n\t\t\t\ttitle: `Add \"${params.inputValue}\"`,\n\t\t\t\ttype: params.inputValue,\n\t\t\t});\n\t\t}\n\n\t\treturn filtered;\n\t};\n\n\tconst handleAddContextListener = (e: FormEvent | null = null) => {\n\t\te?.preventDefault();\n\t\tif (contextListener) {\n\t\t\tif (contextStore.isContextListenerExists(contextListener.type)) {\n\t\t\t\tsetContextError(\"Listener already added\");\n\t\t\t} else {\n\t\t\t\tcontextStore.addContextListener(contextListener.type);\n\t\t\t\tsetContextListener(null);\n\t\t\t}\n\t\t} else {\n\t\t\tsetContextError(\"Enter context type\");\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Add Context Listener</Typography>\n\t\t\t</Grid>\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\" onSubmit={(e) => handleAddContextListener(e)}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tspacing={1}\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\tclassName={`${classes.controls} ${classes.rightAlign}`}\n\t\t\t\t>\n\t\t\t\t\t<Grid item className={classes.contextListenerName}>\n\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\tid=\"context-listener\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tselectOnFocus\n\t\t\t\t\t\t\tblurOnSelect\n\t\t\t\t\t\t\tclearOnBlur\n\t\t\t\t\t\t\thandleHomeEndKeys\n\t\t\t\t\t\t\tvalue={contextListener}\n\t\t\t\t\t\t\tonChange={handleChangeListener(setContextListener, setContextError)}\n\t\t\t\t\t\t\tfilterOptions={filterOptions}\n\t\t\t\t\t\t\toptions={contextListenersOptions}\n\t\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\t\trenderOption={(option) => option.type}\n\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\t\tlabel=\"CONTEXT TYPE\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter Context Type\"\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\terror={!!contextError}\n\t\t\t\t\t\t\t\t\thelperText={contextError}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleAddContextListener}>\n\t\t\t\t\t\t\tAdd Listener\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.contextListener, \"addContextListener\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t</div>\n\t);\n});\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Grid } from \"@material-ui/core\";\nimport Autocomplete, { createFilterOptions } from \"@material-ui/lab/Autocomplete\";\nimport contextStore from \"../store/ContextStore\";\nimport { TemplateTextField } from \"./common/TemplateTextField\";\n\ninterface FilterOptionsState<T> {\n\tinputValue: string;\n\tgetOptionLabel: (option: T) => string;\n}\n\ninterface OptionType {\n\ttitle: string;\n\tvalue: string;\n}\n\ntype SetValue = (value: OptionType | null) => void;\n\ntype SetError = (error: string | false) => void;\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\t\"& > *\": {\n\t\t\t\tmarginRight: 0,\n\t\t\t},\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t\tmarginLeft: theme.spacing(1),\n\t\t\t},\n\t\t},\n\t\tcontextName: {\n\t\t\tflexGrow: 1,\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\trightAlign: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t\tlink: {\n\t\t\tcursor: \"pointer\",\n\t\t\tcolor: \"black\",\n\t\t},\n\t})\n);\n\nconst contextFilter = createFilterOptions<OptionType>();\n\nexport const ContextTemplates = observer(\n\t({\n\t\thandleTabChange,\n\t\tcontextStateSetter,\n\t\tchannel,\n\t}: {\n\t\thandleTabChange: any;\n\t\tcontextStateSetter: any;\n\t\tchannel?: any;\n\t}) => {\n\t\tconst classes = useStyles();\n\t\tconst [context, setContext] = useState<OptionType | null>(null);\n\t\tconst [contextError, setContextError] = useState<string | false>(false);\n\t\tconst contextsOptions: OptionType[] = contextStore.contextsList.map(({ id }) => {\n\t\t\treturn {\n\t\t\t\ttitle: id,\n\t\t\t\tvalue: id,\n\t\t\t};\n\t\t});\n\t\tconst isInitialMount = useRef(true);\n\n\t\tconst handleChange = (setValue: SetValue, setError: SetError) => (event: React.ChangeEvent<{}>, newValue: any) => {\n\t\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === newValue?.value);\n\t\t\tif (selectedContext) contextStateSetter(selectedContext.template, channel);\n\n\t\t\tif (typeof newValue === \"string\") {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue,\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t});\n\t\t\t} else if (newValue && newValue.inputValue) {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue.inputValue,\n\t\t\t\t\tvalue: newValue.inputValue,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetValue(newValue);\n\t\t\t}\n\n\t\t\tsetError(false);\n\t\t};\n\n\t\tconst getOptionLabel = (option: OptionType) => option.value || option.title;\n\n\t\tconst filterOptions = (options: OptionType[], params: FilterOptionsState<OptionType>) => {\n\t\t\tconst filtered = contextFilter(options, params);\n\n\t\t\tif (params.inputValue !== \"\") {\n\t\t\t\tfiltered.push({\n\t\t\t\t\tvalue: params.inputValue,\n\t\t\t\t\ttitle: `Add \"${params.inputValue}\"`,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn filtered;\n\t\t};\n\n\t\tuseEffect(() => {\n\t\t\tif (isInitialMount.current) {\n\t\t\t\tisInitialMount.current = false;\n\t\t\t} else {\n\t\t\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === context?.value);\n\t\t\t\tif (!selectedContext) handleTabChange(null, 0, context?.value);\n\t\t\t}\n\t\t}, [context]);\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tspacing={1}\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\tclassName={`${classes.controls} ${classes.rightAlign}`}\n\t\t\t\t>\n\t\t\t\t\t<Grid item className={classes.contextName}>\n\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\tid=\"context-\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tselectOnFocus\n\t\t\t\t\t\t\tblurOnSelect\n\t\t\t\t\t\t\tclearOnBlur\n\t\t\t\t\t\t\thandleHomeEndKeys\n\t\t\t\t\t\t\tvalue={context}\n\t\t\t\t\t\t\tonChange={handleChange(setContext, setContextError)}\n\t\t\t\t\t\t\tgetOptionSelected={(option, value) => option.value === value.value}\n\t\t\t\t\t\t\tfilterOptions={filterOptions}\n\t\t\t\t\t\t\toptions={contextsOptions}\n\t\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\t\trenderOption={(option) => option.title}\n\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\t\tlabel=\"CONTEXT \"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter Context Type\"\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\terror={!!contextError}\n\t\t\t\t\t\t\t\t\thelperText={contextError}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t);\n\t}\n);\n","import React, { useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport {\n\tTypography,\n\tButton,\n\tFormControl,\n\tInputLabel,\n\tSelect,\n\tMenuItem,\n\tFormHelperText,\n\tIconButton,\n\tTooltip,\n\tGrid,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport channelStore from \"../store/ChannelStore\";\nimport { codeExamples } from \"../fixtures/codeExamples\";\nimport { copyToClipboard } from \"./common/CopyToClipboard\";\nimport { ContextLinking } from \"./ContextLinking\";\nimport contextStore, { ContextType } from \"../store/ContextStore\";\nimport { ContextTemplates } from \"./ContextTemplates\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\talignItems: \"center\",\n\t\t\tmarginTop: theme.spacing(1),\n\t\t\t\"& > *\": {\n\t\t\t\tmargin: theme.spacing(1),\n\t\t\t},\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t\tpaddingLeft: 0,\n\t\t\t},\n\t\t\t\"& > * > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t\tpaddingLeft: 0,\n\t\t\t},\n\t\t},\n\t\tchannelsSelect: {\n\t\t\twidth: \"100%\",\n\t\t\tmarginRight: theme.spacing(1),\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t},\n\t\tborder: {\n\t\t\theight: \"1px\",\n\t\t\twidth: \"100%\",\n\t\t\tbackgroundColor: \"#acb2c0\",\n\t\t\tmarginTop: \"24px\",\n\t\t\tmarginBottom: \"16px\",\n\t\t},\n\t\tcenterChildren: {\n\t\t\tdisplay: \"flex\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t})\n);\n\nexport const Channels = observer(({ handleTabChange }: { handleTabChange: any }) => {\n\tconst classes = useStyles();\n\tconst [channelId, setChannelId] = useState<string>(\"\");\n\tconst [isError, setIsError] = useState<boolean>(false);\n\tconst [broadcastContext, setBroadcastContext] = useState<ContextType | null>(null);\n\n\tconst handleSelectChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n\t\tsetChannelId(event.target.value as string);\n\t\tsetIsError(false);\n\t};\n\n\tconst handleJoinChannel = () => {\n\t\tif (channelId) {\n\t\t\tchannelStore.joinChannel(channelId);\n\t\t\tsetChannelId(\"\");\n\t\t} else {\n\t\t\tsetIsError(true);\n\t\t}\n\t};\n\n\tconst handleLeaveChannel = () => {\n\t\tchannelStore.leaveChannel();\n\t};\n\n\tconst handleRefreshChannel = () => {\n\t\tchannelStore.getCurrentChannel();\n\t};\n\n\tconst handleBroadcast = () => {\n\t\tif (broadcastContext) contextStore.broadcast(broadcastContext);\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Current Channel</Typography>\n\t\t\t</Grid>\n\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\">\n\t\t\t\t<Grid container direction=\"row\" spacing={1}>\n\t\t\t\t\t<Grid item xs={12} sm={5}>\n\t\t\t\t\t\t<Typography variant=\"body1\">{channelStore.currentChannel?.id ?? \"None\"}</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} sm={7}>\n\t\t\t\t\t\t<Grid container direction=\"row\" justifyContent=\"flex-end\" spacing={1}>\n\t\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleRefreshChannel}>\n\t\t\t\t\t\t\t\t\tRefresh\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleLeaveChannel}>\n\t\t\t\t\t\t\t\t\tLeave\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.getCurrentChannel, \"getCurrentChannel\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\n\t\t\t<div className={classes.border}></div>\n\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Join System Channels</Typography>\n\t\t\t</Grid>\n\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\">\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={12} sm={9}>\n\t\t\t\t\t\t<FormControl variant=\"outlined\" className={classes.channelsSelect} size=\"small\" error={isError}>\n\t\t\t\t\t\t\t<InputLabel id=\"channel\">Channel</InputLabel>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tlabelId=\"channel\"\n\t\t\t\t\t\t\t\tid=\"channel-select\"\n\t\t\t\t\t\t\t\tvalue={channelId ?? \"\"}\n\t\t\t\t\t\t\t\tonChange={handleSelectChange}\n\t\t\t\t\t\t\t\tlabel=\"Channel\"\n\t\t\t\t\t\t\t\tMenuProps={{\n\t\t\t\t\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttransformOrigin: {\n\t\t\t\t\t\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tgetContentAnchorEl: null,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!channelStore.systemChannels.length && (\n\t\t\t\t\t\t\t\t\t<MenuItem value=\"\" disabled>\n\t\t\t\t\t\t\t\t\t\tNo channels received\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{channelStore.systemChannels.length && <MenuItem value=\"\" style={{ height: \"0\", padding: \"0\" }} />}\n\t\t\t\t\t\t\t\t{channelStore.systemChannels.length &&\n\t\t\t\t\t\t\t\t\tchannelStore.systemChannels.map(({ id }) => (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={id} value={id}>\n\t\t\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t{isError && <FormHelperText>Select channel from list</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} sm={3} className={classes.centerChildren}>\n\t\t\t\t\t\t<Grid container direction=\"row\" justifyContent=\"flex-end\" spacing={1}>\n\t\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleJoinChannel}>\n\t\t\t\t\t\t\t\t\tJoin\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.channels, \"joinChannel\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\n\t\t\t<div className={classes.border}></div>\n\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Broadcast context</Typography>\n\t\t\t</Grid>\n\n\t\t\t<Grid container direction=\"row\" spacing={1}>\n\t\t\t\t<Grid item sm={9}>\n\t\t\t\t\t<ContextTemplates handleTabChange={handleTabChange} contextStateSetter={setBroadcastContext} />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item sm={3} className={classes.centerChildren}>\n\t\t\t\t\t<Grid container direction=\"row\" justifyContent=\"flex-end\" spacing={1}>\n\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t<Button disabled={!broadcastContext} variant=\"contained\" color=\"primary\" onClick={handleBroadcast}>\n\t\t\t\t\t\t\t\tBroadcast Context\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.broadcast, \"broadcast\")}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t<div className={classes.border}></div>\n\n\t\t\t\t<ContextLinking />\n\t\t\t</Grid>\n\t\t</div>\n\t);\n});\n","import React from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Accordion, AccordionDetails, AccordionSummary, Typography } from \"@material-ui/core\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { Tooltip } from \"@material-ui/core\";\nimport InfoIcon from \"@material-ui/icons/Info\";\n\nexport interface AccordionContentProps {\n\ttitle: string;\n\tchildren: React.ReactNode;\n\ticon?: string;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\taccordion: {\n\t\t\tmargin: theme.spacing(1, 0, 0, 0),\n\t\t\tboxShadow: \"none\",\n\t\t\t\"&::before\": {\n\t\t\t\tdisplay: \"none\",\n\t\t\t},\n\t\t\t\"&.Mui-expanded\": {\n\t\t\t\tmargin: theme.spacing(1, 0, 0, 0),\n\t\t\t},\n\t\t},\n\t\taccordionSummary: {\n\t\t\tborder: \"none\",\n\t\t\tpadding: 0,\n\t\t\tminHeight: \"initial\",\n\t\t\t\"&.Mui-expanded\": {\n\t\t\t\tminHeight: \"initial\",\n\t\t\t},\n\t\t\t\"& .MuiAccordionSummary-content\": {\n\t\t\t\tmargin: \"0 12px 0 0\",\n\t\t\t\t\"&.Mui-expanded\": {\n\t\t\t\t\tmargin: \"0 12px 0 0\",\n\t\t\t\t},\n\t\t\t},\n\t\t\t\"& .MuiAccordionSummary-expandIcon\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t},\n\t\taccordionDetails: {\n\t\t\tpaddingTop: 0,\n\t\t\tpaddingLeft: 0,\n\t\t\tflexDirection: \"column\",\n\t\t},\n\t\taccordionTitle: {\n\t\t\tcolor: \"#0086bf\",\n\t\t\tfontSize: \"16px\",\n\t\t},\n\t\texpand_icon: {\n\t\t\tcolor: \"#0086bf\",\n\t\t},\n\t\ticon: {\n\t\t\tmarginBottom: \"-1px !important\",\n\t\t\tfontSize: \"15px\",\n\t\t\tmarginLeft: \"5px\",\n\t\t},\n\t})\n);\n\nexport const AccordionContent: React.FC<AccordionContentProps> = ({ icon, title, children }: AccordionContentProps) => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Accordion className={classes.accordion} defaultExpanded>\n\t\t\t<AccordionSummary\n\t\t\t\tclassName={classes.accordionSummary}\n\t\t\t\texpandIcon={<ExpandMoreIcon className={classes.expand_icon} />}\n\t\t\t\taria-label=\"Expand\"\n\t\t\t\taria-controls=\"additional-actions1-content\"\n\t\t\t\tid=\"additional-actions1-header\"\n\t\t\t>\n\t\t\t\t<Typography variant=\"h5\" className={classes.accordionTitle}>\n\t\t\t\t\t{title}\n\t\t\t\t\t{icon && (\n\t\t\t\t\t\t<Tooltip title={icon} aria-label={icon}>\n\t\t\t\t\t\t\t<InfoIcon className={classes.icon} />\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t)}\n\t\t\t\t</Typography>\n\t\t\t</AccordionSummary>\n\n\t\t\t<AccordionDetails className={classes.accordionDetails}>{children}</AccordionDetails>\n\t\t</Accordion>\n\t);\n};\n","import React from \"react\";\nimport { List, ListItem, ListItemText, Typography, ListItemSecondaryAction, IconButton } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { AccordionContent } from \"./AccordionContent\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nexport interface AccordionListItem {\n\tid: string;\n\ttextPrimary: string;\n\tafterEachElement?: React.ReactNode;\n}\n\nexport interface AccordionListProps {\n\ttitle: string;\n\ticon?: string;\n\tlistItems: AccordionListItem[];\n\tnoItemsText: string;\n\tonDelete?: (id: string) => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tlist: {\n\t\t\tpadding: 0,\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tlistItem: {\n\t\t\tpadding: 0,\n\t\t\t\"&.MuiListItem-secondaryAction\": {\n\t\t\t\tpaddingRight: theme.spacing(6),\n\t\t\t},\n\t\t},\n\t\tlistAction: {\n\t\t\ttop: \"2px\",\n\t\t\ttransform: \"none\",\n\t\t},\n\t})\n);\n\nexport const AccordionList: React.FC<AccordionListProps> = ({\n\ttitle,\n\ticon,\n\tlistItems,\n\tnoItemsText,\n\tonDelete,\n}: AccordionListProps) => {\n\tconst classes = useStyles();\n\n\tconst handleDelete = (id: string) => () => {\n\t\tif (onDelete) {\n\t\t\tonDelete(id);\n\t\t}\n\t};\n\n\treturn (\n\t\t<AccordionContent title={title} icon={icon}>\n\t\t\t{!listItems.length && <Typography variant=\"body1\">{noItemsText}</Typography>}\n\t\t\t{!!listItems.length && (\n\t\t\t\t<List className={classes.list}>\n\t\t\t\t\t{listItems.map(({ id, textPrimary, afterEachElement }) => (\n\t\t\t\t\t\t<ListItem key={id} className={classes.listItem} disableGutters>\n\t\t\t\t\t\t\t<ListItemText disableTypography primary={textPrimary} secondary={afterEachElement} />\n\t\t\t\t\t\t\t<ListItemSecondaryAction className={classes.listAction}>\n\t\t\t\t\t\t\t\t{onDelete && (\n\t\t\t\t\t\t\t\t\t<IconButton size=\"small\" edge=\"end\" aria-label=\"delete\" onClick={handleDelete(id)}>\n\t\t\t\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t))}\n\t\t\t\t</List>\n\t\t\t)}\n\t\t</AccordionContent>\n\t);\n};\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport contextStore from \"../../store/ContextStore\";\nimport { AccordionList, AccordionListItem } from \"../common/AccordionList\";\nimport { TextField } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttextField: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tinput: {\n\t\t\tfontSize: \"14px\",\n\t\t},\n\t})\n);\n\nexport const ContextListeners = observer(() => {\n\tconst classes = useStyles();\n\tconst contextListeners: AccordionListItem[] = contextStore.contextListeners.map(\n\t\t({ id, type, lastReceivedContext }) => {\n\t\t\tconst receivedContextListenerValue = lastReceivedContext ? JSON.stringify(lastReceivedContext, undefined, 4) : \"\";\n\n\t\t\tconst contextField = (\n\t\t\t\t<TextField\n\t\t\t\t\tdisabled\n\t\t\t\t\tlabel={\"LAST RECEIVED CONTEXT\"}\n\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t}}\n\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\tfullWidth\n\t\t\t\t\tmultiline\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={receivedContextListenerValue}\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\tinput: classes.input,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\n\t\t\treturn { id, textPrimary: `${type}`, afterEachElement: contextField };\n\t\t}\n\t);\n\n\tconst handleDeleteListener = (id: string) => {\n\t\tcontextStore.removeContextListener(id);\n\t};\n\n\treturn (\n\t\t<AccordionList\n\t\t\ttitle=\"System Channels\"\n\t\t\ticon=\"Any context already in the channel will be received automatically\"\n\t\t\tnoItemsText=\"No System Channels Listeners\"\n\t\t\tlistItems={contextListeners}\n\t\t\tonDelete={handleDeleteListener}\n\t\t/>\n\t);\n});\n","export const intentTypes: Array<{ title: string; value: string }> = [\n\t{\n\t\ttitle: \"StartCall\",\n\t\tvalue: \"StartCall\",\n\t},\n\t{\n\t\ttitle: \"StartChat\",\n\t\tvalue: \"StartChat\",\n\t},\n\t{\n\t\ttitle: \"ViewChart\",\n\t\tvalue: \"ViewChart\",\n\t},\n\t{\n\t\ttitle: \"ViewContact\",\n\t\tvalue: \"ViewContact\",\n\t},\n\t{\n\t\ttitle: \"ViewQuote\",\n\t\tvalue: \"ViewQuote\",\n\t},\n\t{\n\t\ttitle: \"ViewNews\",\n\t\tvalue: \"ViewNews\",\n\t},\n\t{\n\t\ttitle: \"ViewAnalysis\",\n\t\tvalue: \"ViewAnalysis\",\n\t},\n\t{\n\t\ttitle: \"ViewInstrument\",\n\t\tvalue: \"ViewInstrument\",\n\t},\n];\n","import { makeObservable, observable, action, runInAction, toJS } from \"mobx\";\nimport * as fdc3 from \"@finos/fdc3\";\nimport { nanoid } from \"nanoid\";\nimport { ContextType } from \"./ContextStore\";\nimport { intentTypes } from \"../fixtures/intentTypes\";\nimport systemLogStore from \"./SystemLogStore\";\nimport { TargetApp } from \"@finos/fdc3\";\n\ntype IntentItem = { title: string; value: string };\n\ninterface Fdc3Listener {\n\tid: string;\n\ttype: string;\n\tlistener: fdc3.Listener;\n\tlastReceivedContext?: ContextType | null;\n}\n\nclass IntentStore {\n\tintentsList: IntentItem[] = intentTypes;\n\n\tintentListeners: Fdc3Listener[] = [];\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tintentsList: observable,\n\t\t\tintentListeners: observable,\n\t\t\traiseIntent: action,\n\t\t\taddIntentListener: action,\n\t\t\tremoveIntentListener: action,\n\t\t\traiseIntentForContext: action,\n\t\t});\n\t}\n\n\taddIntentListener(intent: string) {\n\t\ttry {\n\t\t\tconst listenerId = nanoid();\n\n\t\t\tconst intentListener = fdc3.addIntentListener(intent, (context) => {\n\t\t\t\tconst currentListener = this.intentListeners.find(({ id }) => id === listenerId);\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tif (currentListener) {\n\t\t\t\t\t\tcurrentListener.lastReceivedContext = context;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"receivedIntentListener\",\n\t\t\t\t\ttype: \"info\",\n\t\t\t\t\tvalue: intent,\n\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\tbody: JSON.stringify(context, null, 4),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\trunInAction(() => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"addIntentListener\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tvalue: intent,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t\tthis.intentListeners.push({ id: listenerId, type: intent, listener: intentListener });\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"addIntentListener\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: intent,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\tremoveIntentListener(id: string) {\n\t\tconst listenerIndex = this.intentListeners.findIndex((listener) => listener.id === id);\n\n\t\tif (listenerIndex !== -1) {\n\t\t\ttry {\n\t\t\t\tthis.intentListeners[listenerIndex].listener.unsubscribe();\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"removeIntentListener\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tvalue: this.intentListeners[listenerIndex].type,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\t\t\t\t\tthis.intentListeners.splice(listenerIndex, 1);\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"removeIntentListener\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvalue: this.intentListeners[listenerIndex].type,\n\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tasync raiseIntent(intent: string, context: ContextType, app?: TargetApp) {\n\t\tif (!context) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntent\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: intent,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tlet appIntent;\n\t\t\tif (app) {\n\t\t\t\tappIntent = await fdc3.raiseIntent(intent, toJS(context), app);\n\t\t\t} else {\n\t\t\t\tappIntent = await fdc3.raiseIntent(intent, toJS(context));\n\t\t\t}\n\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntent\",\n\t\t\t\ttype: \"success\",\n\t\t\t\tvalue: intent,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(appIntent, null, 4),\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntent\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: intent,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\tasync raiseIntentForContext(context: ContextType, app?: TargetApp) {\n\t\tif (!context) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntentForContext\",\n\t\t\t\ttype: \"error\",\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tif (app) {\n\t\t\t\tawait fdc3.raiseIntentForContext(toJS(context), app);\n\t\t\t} else {\n\t\t\t\tawait fdc3.raiseIntentForContext(toJS(context));\n\t\t\t}\n\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntentForContext\",\n\t\t\t\ttype: \"success\",\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntentForContext\",\n\t\t\t\ttype: \"error\",\n\t\t\t});\n\t\t}\n\t}\n}\n\nconst intentStore = new IntentStore();\n\nexport default intentStore;\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport intentStore from \"../../store/IntentStore\";\nimport { AccordionList, AccordionListItem } from \"../common/AccordionList\";\nimport { TextField } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttextField: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tinput: {\n\t\t\tfontSize: \"14px\",\n\t\t\tcolor: \"rgba(0, 0, 0, 0.6)\",\n\t\t},\n\t\t\"& .Mui-disabled\": {\n\t\t\tborderColor: theme.palette.text.primary,\n\t\t},\n\t})\n);\n\nexport const IntentListeners = observer(() => {\n\tconst classes = useStyles();\n\tconst intentListeners: AccordionListItem[] = intentStore.intentListeners.map(({ id, type, lastReceivedContext }) => {\n\t\tconst receivedContextListenerValue = lastReceivedContext ? JSON.stringify(lastReceivedContext, undefined, 4) : \"\";\n\n\t\tconst contextField = (\n\t\t\t<TextField\n\t\t\t\tdisabled\n\t\t\t\tlabel={\"LAST RECEIVED CONTEXT\"}\n\t\t\t\tclassName={classes.textField}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true,\n\t\t\t\t}}\n\t\t\t\tcontentEditable={false}\n\t\t\t\tfullWidth\n\t\t\t\tmultiline\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tsize=\"small\"\n\t\t\t\tvalue={receivedContextListenerValue}\n\t\t\t\tInputProps={{\n\t\t\t\t\tclasses: {\n\t\t\t\t\t\tinput: classes.input,\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\n\t\treturn { id, textPrimary: `${type}`, afterEachElement: contextField };\n\t});\n\n\tconst handleDeleteListener = (id: string) => {\n\t\tintentStore.removeIntentListener(id);\n\t};\n\n\treturn (\n\t\t<AccordionList\n\t\t\ttitle=\"Intents\"\n\t\t\tnoItemsText=\"No Intent Listeners\"\n\t\t\tlistItems={intentListeners}\n\t\t\tonDelete={handleDeleteListener}\n\t\t/>\n\t);\n});\n","import { makeObservable, observable, action, runInAction, toJS } from \"mobx\";\nimport * as fdc3 from \"@finos/fdc3\";\nimport systemLogStore from \"./SystemLogStore\";\nimport { nanoid } from \"nanoid\";\nimport { ContextType } from \"./ContextStore\";\n\ninterface Fdc3Listener {\n\tid: string;\n\tchannelId: string;\n\ttype: string | undefined;\n\tlistener: fdc3.Listener;\n\tlastReceivedContext?: ContextType | null;\n}\n\ninterface ListenerOptionType {\n\ttitle: string;\n\tvalue: string;\n\ttype: string | undefined;\n}\n\ninterface Fdc3Channel {\n\tid: string;\n\tchannel: fdc3.Channel;\n\tcurrentListener?: ListenerOptionType | null;\n\tbroadcastError?: string;\n\tcontext?: ContextType | null;\n\tlistenerError?: string;\n}\nclass AppChannelStore {\n\tappChannelsList: Fdc3Channel[] = [];\n\n\tcurrentAppChannel: Fdc3Channel | null = null;\n\n\tappChannelListeners: Fdc3Listener[] = [];\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tappChannelsList: observable,\n\t\t\tcurrentAppChannel: observable,\n\t\t\tappChannelListeners: observable,\n\t\t\tgetOrCreateChannel: action,\n\t\t\tleaveChannel: action,\n\t\t\tbroadcast: action,\n\t\t});\n\t}\n\n\tasync getOrCreateChannel(channelId: string) {\n\t\ttry {\n\t\t\tconst currentAppChannel = await fdc3.getOrCreateChannel(channelId);\n\t\t\tconst isSuccess = currentAppChannel !== null;\n\t\t\tif (isSuccess) {\n\t\t\t\tthis.currentAppChannel = {\n\t\t\t\t\tid: channelId,\n\t\t\t\t\tchannel: currentAppChannel,\n\t\t\t\t};\n\t\t\t\tlet foundChannel = this.appChannelsList.find((channel) => channel.id === channelId);\n\t\t\t\tif (!foundChannel) {\n\t\t\t\t\tthis.appChannelsList.push(this.currentAppChannel);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trunInAction(() => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"getOrCreateChannel\",\n\t\t\t\t\ttype: isSuccess ? \"success\" : \"error\",\n\t\t\t\t\tvalue: isSuccess ? currentAppChannel?.id : channelId,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"getOrCreateChannel\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: channelId,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\tisContextListenerExists(channelId: string, type: string | undefined) {\n\t\treturn !!this.appChannelListeners?.find((listener) => listener.type === type && listener.channelId === channelId);\n\t}\n\n\tisAppChannelExists(channelId: string) {\n\t\treturn !!this.appChannelsList.find((channel) => channel.id === channelId);\n\t}\n\n\tasync broadcast(channelId: string, context: ContextType) {\n\t\tif (!context) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"appbroadcast\",\n\t\t\t\ttype: \"warning\",\n\t\t\t\tvalue: `You must set a context before you can broadcast it to channel: ${channelId}`,\n\t\t\t\tvariant: \"text\",\n\t\t\t});\n\t\t}\n\n\t\t//check that we're on a channel\n\t\tlet currentChannel = this.appChannelsList.find((channel) => channel.id === channelId);\n\n\t\tif (!currentChannel) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"appbroadcast\",\n\t\t\t\ttype: \"warning\",\n\t\t\t\tvalue: \"You are not currently joined to a channel (no-op)\",\n\t\t\t\tvariant: \"text\",\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait currentChannel.channel.broadcast(toJS(context));\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"appbroadcast\",\n\t\t\t\ttype: \"success\",\n\t\t\t\tbody: JSON.stringify(context, null, 4),\n\t\t\t\tvariant: \"code\",\n\t\t\t\tvalue: channelId,\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"appbroadcast\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\tvariant: \"code\",\n\t\t\t\tvalue: channelId,\n\t\t\t});\n\t\t}\n\t}\n\n\tasync leaveChannel() {\n\t\ttry {\n\t\t\t//check that we're on a channel\n\t\t\tlet currentChannel = await fdc3.getCurrentChannel();\n\t\t\tif (!currentChannel) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"leaveChannel\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tawait fdc3.leaveCurrentChannel();\n\t\t\t\tcurrentChannel = await fdc3.getCurrentChannel();\n\t\t\t\tconst isSuccess = currentChannel === null;\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"leaveChannel\",\n\t\t\t\t\t\ttype: isSuccess ? \"success\" : \"error\",\n\t\t\t\t\t\tvalue: this.currentAppChannel?.id,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\n\t\t\t\t\tif (isSuccess) {\n\t\t\t\t\t\tthis.currentAppChannel = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"leaveChannel\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: this.currentAppChannel?.id,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\taddChannelListener(channelId: string, newListener: string | undefined) {\n\t\ttry {\n\t\t\tlet currentChannel = this.appChannelsList.find((channel) => channel.id === channelId);\n\t\t\tlet foundListener = this.appChannelListeners.find(\n\t\t\t\t(currentListener) => currentListener.type === newListener && currentListener.channelId === channelId\n\t\t\t);\n\n\t\t\tif (!foundListener && currentChannel && newListener !== undefined) {\n\t\t\t\tconst listenerId = nanoid();\n\t\t\t\tconst contactListener = currentChannel.channel.addContextListener(\n\t\t\t\t\tnewListener?.toLowerCase() === \"all\" ? null : newListener,\n\t\t\t\t\t(context) => {\n\t\t\t\t\t\tconst currentListener = this.appChannelListeners.find(\n\t\t\t\t\t\t\t(listener) => listener.type === newListener && listener.channelId === channelId\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\trunInAction(() => {\n\t\t\t\t\t\t\tif (currentListener) {\n\t\t\t\t\t\t\t\tcurrentListener.lastReceivedContext = context;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\t\tname: \"receivedAppContextListener\",\n\t\t\t\t\t\t\ttype: \"info\",\n\t\t\t\t\t\t\tvalue: `Channel [${channelId}] Received context via '[${newListener}]' listener`,\n\t\t\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\t\t\tbody: JSON.stringify(context, null, 4),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"addAppContextListener\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tvalue: `A context listener for '[${newListener}]' has been added on channel [${channelId}]`,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\t\t\t\t\tthis.appChannelListeners.push({ id: listenerId, type: newListener, listener: contactListener, channelId });\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"addAppContextListener\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: `Failed to add a context listener for '[${newListener}]' on channel [${channelId}]`,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\tremoveContextListener(id: string) {\n\t\tconst listenerIndex = this.appChannelListeners?.findIndex((listener) => listener.id === id);\n\t\tconst listener = this.appChannelListeners[listenerIndex];\n\t\tif (listenerIndex !== -1) {\n\t\t\ttry {\n\t\t\t\tthis.appChannelListeners[listenerIndex].listener.unsubscribe();\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"removeAppChannelContextListener\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tvalue: `A context listener for '[${listener.type}]' for channel [${listener.channelId}] has been removed`,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\t\t\t\t\tthis.appChannelListeners.splice(listenerIndex, 1);\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"removeAppChannelContextListener\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvalue: `Failed to remove a context listener for '[${listener.type}]' on channel [${listener.channelId}]`,\n\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst appChannelStore = new AppChannelStore();\n\nexport default appChannelStore;\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport appChannelStore from \"../../store/AppChannelStore\";\nimport { AccordionList, AccordionListItem } from \"../common/AccordionList\";\nimport { TextField } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttextField: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tinput: {\n\t\t\tfontSize: \"14px\",\n\t\t},\n\t})\n);\n\nexport const AppChannelListeners = observer(() => {\n\tconst classes = useStyles();\n\n\tlet contextListeners: AccordionListItem[] = [];\n\n\tappChannelStore.appChannelListeners.forEach(({ id, channelId, type, lastReceivedContext }) => {\n\t\tconst receivedContextListenerValue = lastReceivedContext ? JSON.stringify(lastReceivedContext, undefined, 4) : \"\";\n\t\tconst contextField = (\n\t\t\t<TextField\n\t\t\t\tdisabled\n\t\t\t\tlabel={\"LAST RECEIVED CONTEXT\"}\n\t\t\t\tclassName={classes.textField}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true,\n\t\t\t\t}}\n\t\t\t\tcontentEditable={false}\n\t\t\t\tfullWidth\n\t\t\t\tmultiline\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tsize=\"small\"\n\t\t\t\tvalue={receivedContextListenerValue}\n\t\t\t\tInputProps={{\n\t\t\t\t\tclasses: {\n\t\t\t\t\t\tinput: classes.input,\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\n\t\tcontextListeners.push({ id, textPrimary: `${channelId}: ${type}`, afterEachElement: contextField });\n\t});\n\n\tconst handleDeleteListener = (id: string) => {\n\t\tappChannelStore.removeContextListener(id);\n\t};\n\n\treturn (\n\t\t<AccordionList\n\t\t\ttitle=\"App Channels\"\n\t\t\ticon=\"Any context already in the channel will NOT be received automatically\"\n\t\t\tnoItemsText=\"No App Channel Listeners\"\n\t\t\tlistItems={contextListeners}\n\t\t\tonDelete={handleDeleteListener}\n\t\t/>\n\t);\n});\n","import React from \"react\";\nimport { ListItem, TextField, Typography } from \"@material-ui/core\";\nimport { LogItem } from \"../../store/SystemLogStore\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\ninterface SystemLogItemProps {\n\tlogItem: LogItem;\n}\n\nconst useStyles = (props: SystemLogItemProps) =>\n\tmakeStyles((theme: Theme) =>\n\t\tcreateStyles({\n\t\t\troot: {\n\t\t\t\tflexDirection: \"column\",\n\t\t\t\tjustifyContent: \"flex-start\",\n\t\t\t\talignItems: \"flex-start\",\n\t\t\t\tpadding: theme.spacing(3, 0),\n\t\t\t\t\"&:first-child\": {\n\t\t\t\t\tborderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\tcolor: theme.palette[props.logItem.type].dark,\n\t\t\t},\n\t\t\ttextField: {\n\t\t\t\twidth: \"100%\",\n\t\t\t},\n\t\t\tinput: {\n\t\t\t\tfontSize: \"14px\",\n\t\t\t\tcolor: theme.palette.text.primary,\n\t\t\t},\n\t\t\t\"& .Mui-disabled\": {\n\t\t\t\tborderColor: theme.palette.text.primary,\n\t\t\t},\n\t\t})\n\t);\n\nexport const SystemLogItem: React.FC<SystemLogItemProps> = (props: SystemLogItemProps) => {\n\tconst { logItem } = props;\n\tconst classes = useStyles(props)();\n\n\treturn (\n\t\t<ListItem className={classes.root} divider>\n\t\t\t<Typography className={classes.message} variant=\"body1\">\n\t\t\t\t{logItem.message}\n\t\t\t</Typography>\n\n\t\t\t{logItem.variant === \"code\" && (\n\t\t\t\t<TextField\n\t\t\t\t\tdisabled\n\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\tid={logItem.id}\n\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\tfullWidth\n\t\t\t\t\tmultiline\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={logItem.body}\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\tinput: classes.input,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{logItem.variant === \"text\" && logItem.body && (\n\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t{logItem.type === \"error\" && \"ERROR:\"}\n\t\t\t\t\t{logItem.type === \"warning\" && \"WARNING:\"}\n\t\t\t\t\t{logItem.type === \"info\" && \"INFO:\"}\n\t\t\t\t\t{logItem.type === \"success\" && \"SUCCESS:\"}\n\n\t\t\t\t\t{logItem.body}\n\t\t\t\t</Typography>\n\t\t\t)}\n\t\t</ListItem>\n\t);\n};\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport { List } from \"@material-ui/core\";\nimport systemLogStore from \"../../store/SystemLogStore\";\nimport { SystemLogItem } from \"./SystemLogItem\";\n\nconst useStyles = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t})\n);\n\nexport const SystemLog = observer(() => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<List component=\"nav\" className={classes.root} aria-label=\"mailbox folders\">\n\t\t\t{systemLogStore.logList.map((logItem) => (\n\t\t\t\t<SystemLogItem key={logItem.id} logItem={logItem} />\n\t\t\t))}\n\t\t</List>\n\t);\n});\n","import React, { useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Tooltip } from \"@material-ui/core\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport { Tabs, Tab } from \"@material-ui/core\";\nimport { TabPanel } from \"../common/TabPanel\";\nimport { ContextListeners } from \"./ContextListeners\";\nimport { IntentListeners } from \"./IntentListeners\";\nimport { AppChannelListeners } from \"./AppChannelListeners\";\nimport { SystemLog } from \"./SystemLog\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\t\"@global\": {\n\t\t\t\".MuiTab-wrapper\": {\n\t\t\t\tflexDirection: \"row !important\",\n\t\t\t},\n\t\t},\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tpaper: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\tpadding: theme.spacing(2),\n\t\t\t\"&:first-child\": {\n\t\t\t\tmarginTop: 0,\n\t\t\t},\n\t\t},\n\t\tsystemLog: {\n\t\t\tmaxHeight: \"1000px\",\n\t\t\toverflowY: \"scroll\",\n\t\t},\n\t\tindicator: {\n\t\t\tbackgroundColor: \"#00bbe1\",\n\t\t},\n\t\ttabs: {\n\t\t\tborderBottomColor: \"#acb2c0\",\n\t\t\tborderBottomStyle: \"solid\",\n\t\t\tborderBottomWidth: \"1px\",\n\t\t\tminHeight: \"28px\",\n\t\t},\n\t\ticon: {\n\t\t\tmarginBottom: \"3px !important\",\n\t\t\tfontSize: \"15px\",\n\t\t\tmarginRight: \"3px\",\n\t\t},\n\t})\n);\n\nconst a11yProps = (index: any) => {\n\treturn {\n\t\tid: `scrollable-auto-tab-${index}`,\n\t\t\"aria-controls\": `scrollable-auto-tabpanel-${index}`,\n\t};\n};\n\nexport const Workbench = observer(() => {\n\tconst classes = useStyles();\n\tconst [tabValue, setTabValue] = useState<number>(0);\n\n\tconst handleTabChange = (event: React.ChangeEvent<{}>, newValue: number) => {\n\t\tsetTabValue(newValue);\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Tabs\n\t\t\t\tvalue={tabValue}\n\t\t\t\tonChange={handleTabChange}\n\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\tvariant=\"scrollable\"\n\t\t\t\tscrollButtons=\"auto\"\n\t\t\t\tclasses={{\n\t\t\t\t\tindicator: classes.indicator,\n\t\t\t\t}}\n\t\t\t\tclassName={classes.tabs}\n\t\t\t>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel=\"Listeners\"\n\t\t\t\t\t{...a11yProps(0)}\n\t\t\t\t\tstyle={{ display: \"flex\", alignItems: \"center\" }}\n\t\t\t\t\ticon={\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle=\"Context received will be displayed here, but you will not receive your own messages back\"\n\t\t\t\t\t\t\taria-label=\"Context received will be displayed here, but you will not receive your own messages back\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<InfoIcon className={classes.icon} />\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Tab label=\"System Log\" {...a11yProps(1)} />\n\t\t\t</Tabs>\n\n\t\t\t<TabPanel value={tabValue} index={0}>\n\t\t\t\t<ContextListeners />\n\t\t\t\t<IntentListeners />\n\t\t\t\t<AppChannelListeners />\n\t\t\t</TabPanel>\n\n\t\t\t<div className={classes.systemLog}>\n\t\t\t\t<TabPanel value={tabValue} index={1}>\n\t\t\t\t\t<SystemLog />\n\t\t\t\t</TabPanel>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n","import React, { useEffect, useRef, useState } from \"react\";\nimport JSONEditor, { JSONEditorOptions, ParseError, SchemaValidationError } from \"jsoneditor\";\nimport \"jsoneditor/dist/jsoneditor.css\";\nimport $RefParser from \"@apidevtools/json-schema-ref-parser\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\ninterface JsonInputProps {\n\tjson?: object | null;\n\tschemaUrl?: URL | null;\n\tschema?: object | null;\n\tonJsonError?: (errors: Array<string>) => void;\n\treadOnly?: boolean;\n\tonChange: (value: any) => void;\n\terror?: string | false;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tposition: \"relative\",\n\t\t\tflexGrow: 1,\n\t\t\tpadding: theme.spacing(1),\n\t\t\tborder: `1px solid #0086bf`,\n\t\t\tborderRadius: theme.shape.borderRadius,\n\t\t\t\"& .jsoneditor\": {\n\t\t\t\tborder: \"none\",\n\t\t\t},\n\t\t\t\"& .ace-jsoneditor .ace_gutter\": {\n\t\t\t\tbackgroundColor: \"transparent\",\n\t\t\t},\n\t\t\t\"& .ace-jsoneditor .ace_gutter-active-line\": {\n\t\t\t\tbackgroundColor: theme.palette.grey[\"200\"],\n\t\t\t},\n\t\t\t\"& .ace-jsoneditor .ace_marker-layer .ace_active-line\": {\n\t\t\t\tbackgroundColor: theme.palette.grey[\"200\"],\n\t\t\t},\n\t\t},\n\t\tjsonInput: {\n\t\t\theight: \"270px\",\n\t\t},\n\t\terrorText: {\n\t\t\tbottom: \"-8px\",\n\t\t\tpadding: theme.spacing(0, 0.5),\n\t\t\tfontSize: \"0.75rem\",\n\t\t\tposition: \"absolute\",\n\t\t\tbackgroundColor: \"#fff\",\n\t\t\tcolor: theme.palette.error.main,\n\t\t},\n\t})\n);\n\nexport const JsonInput: React.FC<JsonInputProps> = (props: JsonInputProps) => {\n\tconst classes = useStyles();\n\tconst [jsoneditor, setJsoneditor] = useState<JSONEditor>();\n\tconst container = useRef<HTMLDivElement>(null);\n\tconst initialSettings: JSONEditorOptions = {\n\t\tmode: \"code\",\n\t\tmainMenuBar: false,\n\t\tstatusBar: false,\n\t\tindentation: 2,\n\t\tonChangeText: (text: string) => {\n\t\t\tif (text === \"\") {\n\t\t\t\tprops.onChange(null);\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tprops.onChange(JSON.parse(text));\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t},\n\t\tonValidationError: (error: readonly (SchemaValidationError | ParseError)[]) => {\n\t\t\tif (props.onJsonError) {\n\t\t\t\tif (error.length > 0) {\n\t\t\t\t\tconst errorMsg: string = error[0].type === \"error\" ? \"Bad json format\" : \"Json doesn't match the schema\";\n\t\t\t\t\tprops.onJsonError([errorMsg]);\n\t\t\t\t} else {\n\t\t\t\t\tprops.onJsonError([]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst options: JSONEditorOptions = { ...initialSettings };\n\n\t\t\tif (container.current) {\n\t\t\t\tif (props.schema) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\toptions.schema = await $RefParser.dereference(props.schema, {\n\t\t\t\t\t\t\tdereference: {\n\t\t\t\t\t\t\t\tcircular: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (props.schemaUrl) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\toptions.schema = await $RefParser.dereference(props.schemaUrl.href, {\n\t\t\t\t\t\t\tdereference: {\n\t\t\t\t\t\t\t\tcircular: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst editor = new JSONEditor(container.current, options, props.json);\n\n\t\t\t\tsetJsoneditor(editor);\n\t\t\t}\n\t\t})();\n\n\t\treturn jsoneditor?.destroy;\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (props.schema) {\n\t\t\tjsoneditor?.setSchema(props.schema);\n\t\t}\n\t}, [props.schema]);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (props.schemaUrl) {\n\t\t\t\ttry {\n\t\t\t\t\tconst schema = await $RefParser.dereference(props.schemaUrl.href, {\n\t\t\t\t\t\tdereference: {\n\t\t\t\t\t\t\tcircular: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tjsoneditor?.setSchema(schema);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}, [props.schemaUrl]);\n\n\tuseEffect(() => {\n\t\tif (jsoneditor && (props.json || props.json === null)) {\n\t\t\tif (props.json === null) {\n\t\t\t\tjsoneditor.set({});\n\t\t\t} else {\n\t\t\t\tjsoneditor.set(props.json);\n\t\t\t}\n\t\t}\n\t}, [props.json, jsoneditor]);\n\n\treturn (\n\t\t<div className={classes.root} tabIndex={0}>\n\t\t\t<div className={classes.jsonInput} ref={container} />\n\t\t\t{!!props.error && <div className={classes.errorText}>{props.error}</div>}\n\t\t</div>\n\t);\n};\n","import * as React from \"react\";\nimport { Button, DialogTitle, DialogActions, Dialog } from \"@material-ui/core\";\n\ninterface DialogModalProps {\n\topen: boolean;\n\tonClose: (value: boolean) => void;\n\tonAgree: (value: string) => void;\n\tselectedValue: any;\n}\n\nexport function DialogModal(props: DialogModalProps) {\n\tconst { onClose, onAgree, open, selectedValue } = props;\n\n\tconst handleClose = () => {\n\t\tonClose(false);\n\t};\n\n\tconst handleAgree = () => {\n\t\tonAgree(selectedValue?.id || \"\");\n\t\tonClose(false);\n\t};\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonClose={handleClose}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">\n\t\t\t\t{`Delete context template: ${selectedValue?.name || selectedValue?.id}`}\n\t\t\t</DialogTitle>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={handleClose}>Disagree</Button>\n\t\t\t\t<Button onClick={handleAgree} autoFocus>\n\t\t\t\t\tAgree\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","import React, { useEffect, useState, useRef, FormEvent } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport {\n\tButton,\n\tGrid,\n\tTypography,\n\tTooltip,\n\tIconButton,\n\tTable,\n\tTableBody,\n\tTableRow,\n\tTableCell,\n\tTableContainer,\n} from \"@material-ui/core\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport FileCopyOutlinedIcon from \"@material-ui/icons/FileCopyOutlined\";\nimport DeleteOutlinedIcon from \"@material-ui/icons/DeleteOutlined\";\nimport contextStore, { ContextType, ContextItem } from \"../store/ContextStore\";\nimport systemLogStore from \"../store/SystemLogStore\";\nimport { JsonInput } from \"./common/JsonInput\";\nimport { DialogModal } from \"./common/DialogModal\";\nimport { TemplateTextField } from \"./common/TemplateTextField\";\nimport { copyToClipboard } from \"./common/CopyToClipboard\";\n\ninterface OptionType {\n\ttitle: string;\n\tvalue: string;\n}\n\nconst useStyles: any = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\talignItems: \"center\",\n\t\t\tmarginTop: theme.spacing(1),\n\t\t\t\"& > *\": {\n\t\t\t\tmargin: theme.spacing(1),\n\t\t\t},\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t\tpaddingLeft: 0,\n\t\t\t},\n\t\t\t\"& > * > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t\tpaddingLeft: 0,\n\t\t\t},\n\t\t\t\"& .MuiGrid-grid-xs-12\": {\n\t\t\t\tpaddingLeft: 0,\n\t\t\t},\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t\tmarginLeft: theme.spacing(1),\n\t\t\t},\n\t\t},\n\t\ttemplateSelect: {\n\t\t\tflexGrow: 1,\n\t\t\t// marginRight: theme.spacing(1),\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\ttextField: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tmultilineField: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tbutton: {\n\t\t\tmarginLeft: \"auto\",\n\t\t},\n\t\trightAlign: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t\tborder: {\n\t\t\theight: \"1px\",\n\t\t\twidth: \"100%\",\n\t\t\tbackgroundColor: \"#acb2c0\",\n\t\t\tmarginTop: \"24px\",\n\t\t\tmarginBottom: \"16px\",\n\t\t},\n\t\tdelete: {\n\t\t\theight: \"15px\",\n\t\t\ttransform: \"scale(1.7)\",\n\t\t},\n\t\tcopy: {\n\t\t\theight: \"20px\",\n\t\t},\n\t\tlink: {\n\t\t\tcursor: \"pointer\",\n\t\t\tcolor: \"black\",\n\t\t},\n\t\tmargins: {\n\t\t\tmargin: \"0 5px\",\n\t\t},\n\t\ttableContainer: {\n\t\t\tmaxHeight: 350,\n\t\t},\n\t})\n);\n\nconst emptyJson: ContextType = {\n\ttype: \"\",\n\tid: {},\n};\n\nexport const ContextCreate = observer(({ contextName }: { contextName: string }) => {\n\tconst classes = useStyles();\n\tconst [templateName, setTemplateName] = useState<OptionType | null>({\n\t\ttitle: contextName,\n\t\tvalue: contextName,\n\t});\n\tconst [duplicateName, setDuplicateName] = useState(false);\n\tconst [contextValue, setContextValue] = useState<ContextType | null>(emptyJson);\n\tconst [context, setContext] = useState<ContextItem | null>({\n\t\tid: contextName || \"empty\",\n\t\ttemplate: emptyJson,\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/context.schema.json\"),\n\t});\n\tconst [contextError, setContextError] = useState<string | false>(false);\n\tconst [open, setOpen] = useState(false);\n\tconst [deleteContext, setDeleteContext] = useState<object | null>(null);\n\tconst [disabled, setDisabled] = useState(true);\n\tconst gridRef = useRef<any>(null);\n\n\tconst handleClickOpen = (id: string, name: any) => {\n\t\tsetOpen(true);\n\t\tsetDeleteContext({ id, name });\n\t};\n\n\tconst handleClose = (value: boolean) => {\n\t\tsetOpen(value);\n\t};\n\n\tconst handleJsonError = (errors: string[]) => {\n\t\tsetContextError(errors[0]);\n\t};\n\n\tconst handleChangeTemplate = (newValue: any) => {\n\t\tsetTemplateName(newValue);\n\n\t\tif (newValue?.value) {\n\t\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === newValue?.value);\n\t\t\tif (selectedContext) {\n\t\t\t\tsetContextValue(selectedContext.template);\n\t\t\t\tsetContext(selectedContext);\n\t\t\t}\n\t\t}\n\n\t\tsetContextError(false);\n\t};\n\n\tconst found = (tempName: string, ignoreUuid?: string) =>\n\t\tcontextStore.contextsList.reduce((count, { id, uuid }) => {\n\t\t\tif (id === tempName && (!ignoreUuid || ignoreUuid !== uuid)) {\n\t\t\t\tcount = count + 1;\n\t\t\t}\n\t\t\treturn count;\n\t\t}, 0);\n\n\tconst handleChangeTemplateName = (newValue: any) => {\n\t\tsetDisabled(false);\n\t\tsetContextError(false);\n\t\tsetTemplateName(newValue);\n\n\t\tif (context && !found(newValue.value, context.uuid)) setDuplicateName(false);\n\t\telse if (found(newValue.value) >= 1) setDuplicateName(true);\n\t};\n\n\tconst handleContextChange = (json: ContextType) => {\n\t\tsetContextValue(json);\n\t\tsetContextError(false);\n\t};\n\n\tconst validate = () => {\n\t\tif (!contextValue) {\n\t\t\tsetContextError(\"Context is required\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!contextValue?.type) {\n\t\t\tsetContextError(\"Context must have property 'type'\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif (contextValue?.type === \"\") {\n\t\t\tsetContextError(\"Property 'type' can't be empty\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!templateName) {\n\t\t\tsetContextError(\"Template name is required\");\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tconst handleCreateTemplate = () => {\n\t\tsetTemplateName(null);\n\t\tsetContext(null);\n\t\tsetContextValue(null);\n\t\tsetDisabled(true);\n\t};\n\n\tconst handleSaveTemplate = (e: FormEvent | null = null) => {\n\t\te?.preventDefault();\n\t\tif (disabled) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst isValid: boolean = validate();\n\n\t\t\tif (isValid && context && templateName) {\n\t\t\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === context.id);\n\t\t\t\tconst currContext = {\n\t\t\t\t\tid: templateName.value,\n\t\t\t\t\tschemaUrl: context.schemaUrl,\n\t\t\t\t\ttemplate: contextValue,\n\t\t\t\t};\n\n\t\t\t\tif (!selectedContext) contextStore.addContextItem(currContext);\n\n\t\t\t\tcontextStore.saveContextItem(currContext, context.id);\n\t\t\t\thandleChangeTemplate({ title: currContext.id, value: currContext.id });\n\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"saveTemplate\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tvalue: currContext?.id,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"saveTemplate\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvalue: undefined,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t}\n\t\t\tsetDisabled(true);\n\t\t}\n\t};\n\n\tconst handleDuplicateTemplate = (newValue: any, count = 0) => {\n\t\tconst copyName = `${newValue.value}-copy${count > 0 ? ` (${count})` : \"\"}`;\n\t\tif (newValue?.value && !found(copyName)) {\n\t\t\tsetTemplateName({ value: copyName, title: copyName });\n\t\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === newValue.value);\n\n\t\t\tif (selectedContext) {\n\t\t\t\tconst newContext: ContextItem = {\n\t\t\t\t\tid: copyName,\n\t\t\t\t\ttemplate: selectedContext.template,\n\t\t\t\t\tschemaUrl: selectedContext.schemaUrl,\n\t\t\t\t};\n\n\t\t\t\tcontextStore.addContextItem(newContext);\n\t\t\t\tcontextStore.saveContextItem(newContext);\n\n\t\t\t\tsetContextValue(selectedContext.template);\n\t\t\t\tsetContext(newContext);\n\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"saveTemplate\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tvalue: newContext.id,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (found(copyName)) {\n\t\t\thandleDuplicateTemplate(newValue, ++count);\n\t\t}\n\n\t\tsetContextError(false);\n\t};\n\n\tconst handleResetTemplate = () => {\n\t\tcontextStore.resetContextList();\n\t\thandleCreateTemplate();\n\t};\n\n\tconst handleDeleteTemplate = (contextId: any) => {\n\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === contextId);\n\t\tif (selectedContext) {\n\t\t\tcontextStore.deleteContextItem(selectedContext);\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"deleteTemplate\",\n\t\t\t\ttype: \"success\",\n\t\t\t\tvalue: selectedContext?.id,\n\t\t\t\tvariant: \"text\",\n\t\t\t});\n\t\t} else {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"deleteTemplate\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: undefined,\n\t\t\t\tvariant: \"text\",\n\t\t\t});\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (duplicateName) {\n\t\t\tsetDisabled(true);\n\t\t\tsetContextError(\"Template name already exists\");\n\t\t} else setDisabled(false);\n\t}, [duplicateName, contextValue]);\n\n\tuseEffect(() => {\n\t\tif (gridRef && gridRef.current) gridRef.current.scrollIntoView({ behavior: \"auto\", block: \"nearest\" });\n\t\tif (context == null) {\n\t\t\tconst newContext: ContextItem = {\n\t\t\t\tid: \"empty\",\n\t\t\t\ttemplate: emptyJson,\n\t\t\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/context.schema.json\"),\n\t\t\t};\n\t\t\tsetContext(newContext);\n\t\t\tsetContextValue(emptyJson);\n\t\t}\n\t}, [context]);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<DialogModal open={open} onClose={handleClose} onAgree={handleDeleteTemplate} selectedValue={deleteContext} />\n\t\t\t<Grid container spacing={1}>\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<Typography variant=\"h5\">Context templates:</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<TableContainer className={classes.tableContainer}>\n\t\t\t\t\t<Table>\n\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t{contextStore.contextsList.map(({ id, template }, index) => (\n\t\t\t\t\t\t\t\t<TableRow\n\t\t\t\t\t\t\t\t\thover\n\t\t\t\t\t\t\t\t\trole=\"checkbox\"\n\t\t\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t\t\t\tkey={`row-${index}`}\n\t\t\t\t\t\t\t\t\tselected={id === templateName?.value}\n\t\t\t\t\t\t\t\t\tref={id === templateName?.value ? gridRef : null}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\tkey={`row-${index}-column-0`}\n\t\t\t\t\t\t\t\t\t\talign=\"left\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleChangeTemplate({ title: id, value: id })}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">{id}</Typography>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\tkey={`row-${index}-column-1`}\n\t\t\t\t\t\t\t\t\t\talign=\"left\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleChangeTemplate({ title: id, value: id })}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\">{template?.type}</Typography>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell key={`row-${index}-column-2`} align=\"right\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Duplicate Template\" aria-label=\"Copy code\">\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDuplicateTemplate({ title: id, value: id })}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<FileCopyOutlinedIcon className={classes.copy} />\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell key={`row-${index}-column-3`} align=\"right\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Delete template\" aria-label=\"Delete template\">\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Delete template\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleClickOpen(id, template?.name)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<DeleteOutlinedIcon className={classes.delete} />\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</TableContainer>\n\t\t\t</Grid>\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\">\n\t\t\t\t<Grid container direction=\"row\" spacing={1}>\n\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t<Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleCreateTemplate}>\n\t\t\t\t\t\t\tCreate new template\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t<Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleResetTemplate}>\n\t\t\t\t\t\t\tReset templates\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\" onSubmit={(e) => handleSaveTemplate(e)}>\n\t\t\t\t<Grid container direction=\"row\" spacing={1} className={classes.rightAlign}>\n\t\t\t\t\t<Grid item xs={12} className={`${classes.controls} ${classes.templateSelect}`}>\n\t\t\t\t\t\t<Grid item xs={6} className={classes.field}>\n\t\t\t\t\t\t\t<Grid item xs={12} className={classes.textField}>\n\t\t\t\t\t\t\t\t<Typography variant=\"h5\">Edit template:</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\tlabel=\"Template name\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\t\t\t\tplaceholder=\"Choose Context Template\"\n\t\t\t\t\t\t\t\tvalue={templateName?.value || \"\"}\n\t\t\t\t\t\t\t\tonChange={(e) => handleChangeTemplateName({ title: e.target.value, value: e.target.value })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<Grid item xs={12} className={classes.controls}>\n\t\t\t\t\t\t<JsonInput\n\t\t\t\t\t\t\tjson={context?.template}\n\t\t\t\t\t\t\tonChange={handleContextChange}\n\t\t\t\t\t\t\tonJsonError={handleJsonError}\n\t\t\t\t\t\t\tschemaUrl={new URL(context?.schemaUrl || \"https://fdc3.finos.org/schemas/1.2/context.schema.json\")}\n\t\t\t\t\t\t\terror={contextError}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<Tooltip title=\"Copy code\" aria-label=\"Copy code\">\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={copyToClipboard(`let context = ${JSON.stringify(contextValue, null, 2)}`, \"createContext\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tonClick={handleSaveTemplate}\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSave Changes\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t</div>\n\t);\n});\n","import React, { useEffect, useState } from \"react\";\nimport * as fdc3 from \"@finos/fdc3\";\nimport { toJS } from \"mobx\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport {\n\tButton,\n\tIconButton,\n\tTooltip,\n\tTypography,\n\tGrid,\n\tFormControl,\n\tInputLabel,\n\tMenuItem,\n\tSelect,\n} from \"@material-ui/core\";\nimport { observer } from \"mobx-react\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport Autocomplete, { createFilterOptions } from \"@material-ui/lab/Autocomplete\";\nimport { ContextTemplates } from \"../components/ContextTemplates\";\nimport intentStore from \"../store/IntentStore\";\nimport { codeExamples } from \"../fixtures/codeExamples\";\nimport { TemplateTextField } from \"./common/TemplateTextField\";\nimport { copyToClipboard } from \"./common/CopyToClipboard\";\nimport { AppIntent, AppMetadata, Context } from \"@finos/fdc3\";\n\n// interface copied from lib @material-ui/lab/Autocomplete\ninterface FilterOptionsState<T> {\n\tinputValue: string;\n\tgetOptionLabel: (option: T) => string;\n}\n\ninterface ListenerOptionType {\n\ttitle: string;\n\tvalue: string;\n}\n\ntype ListenerSetValue = (value: ListenerOptionType | null) => void;\n\ntype ListenerSetError = (error: string | false) => void;\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: \"flex\",\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\talignItems: \"center\",\n\t\t\tmarginTop: theme.spacing(1),\n\t\t\t\"& > *\": {\n\t\t\t\tmargin: theme.spacing(1),\n\t\t\t\tmarginLeft: \"0px\",\n\t\t\t},\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t},\n\t\t\t\"& > *\": {\n\t\t\t\tmarginRight: theme.spacing(1),\n\t\t\t},\n\t\t\t\"& > *:last-child\": {\n\t\t\t\tmarginRight: 0,\n\t\t\t},\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t\tdisplay: \"flex\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t\trightAlign: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t\tspread: {\n\t\t\tflexDirection: \"row\",\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tpaddingLeft: \"0px\",\n\t\t\t},\n\t\t},\n\t\ttextField: {\n\t\t\twidth: \"100%\",\n\t\t\t\"& input\": {\n\t\t\t\theight: \"29px\",\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t},\n\t\th4: {\n\t\t\tfontSize: \"22px\",\n\t\t},\n\t\tfield: {\n\t\t\tflexGrow: 1,\n\t\t\tmarginRight: theme.spacing(1),\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\tborder: {\n\t\t\theight: \"1px\",\n\t\t\twidth: \"100%\",\n\t\t\tbackgroundColor: \"#acb2c0\",\n\t\t\tmarginTop: \"24px\",\n\t\t\tmarginBottom: \"16px\",\n\t\t},\n\t\tbottomMargin: {\n\t\t\tmarginBottom: theme.spacing(1),\n\t\t},\n\t\tremoveSidePadding: {\n\t\t\tpaddingLeft: 0,\n\t\t},\n\t\ttargetSelect: {\n\t\t\twidth: \"100%\",\n\t\t\tmarginRight: theme.spacing(1),\n\t\t},\n\t\trightPadding: {\n\t\t\tpaddingRight: theme.spacing(0.5),\n\t\t},\n\t})\n);\n\nconst filter = createFilterOptions<ListenerOptionType>();\n\nexport const Intents = observer(({ handleTabChange }: { handleTabChange: any }) => {\n\tconst classes = useStyles();\n\tconst [intentValue, setIntentValue] = useState<ListenerOptionType | null>(null);\n\tconst [raiseIntentError, setRaiseIntentError] = useState<string | false>(false);\n\tconst [intentListener, setIntentListener] = useState<ListenerOptionType | null>(null);\n\tconst [intentsForContext, setIntentsForContext] = useState<ListenerOptionType[] | null>(null);\n\tconst [intentTargets, setIntentTargets] = useState<AppMetadata[] | null>(null);\n\tconst [targetApp, setTargetApp] = useState<string | null>(null);\n\tconst [contextTargetApp, setContextTargetApp] = useState<string | null>(null);\n\tconst [intentObjects, setIntentObjects] = useState<AppIntent[] | null>(null);\n\tconst [contextIntentObjects, setContextIntentObjects] = useState<any[] | null>(null);\n\tconst [raiseIntentContext, setRaiseIntentContext] = useState<Context | null>(null);\n\tconst [raiseIntentWithContextContext, setRaiseIntentWithContextContext] = useState<Context | null>(null);\n\tconst [intentError, setIntentError] = useState<string | false>(false);\n\tconst intentListenersOptions: ListenerOptionType[] = intentStore.intentsList;\n\n\tconst handleRaiseIntent = () => {\n\t\tif (!intentValue) {\n\t\t\tsetRaiseIntentError(\"enter intent name\");\n\t\t} else if (!raiseIntentContext) {\n\t\t\tsetRaiseIntentError(\"enter context name\");\n\t\t} else if (targetApp && intentTargets) {\n\t\t\tlet targetObject = intentTargets.find((target) => target.appId === targetApp || target.name === targetApp);\n\t\t\tif (targetObject) {\n\t\t\t\tintentStore.raiseIntent(intentValue.value, raiseIntentContext, targetObject);\n\t\t\t\tsetRaiseIntentError(\"\");\n\t\t\t}\n\t\t} else {\n\t\t\tintentStore.raiseIntent(intentValue.value, raiseIntentContext);\n\t\t\tsetRaiseIntentError(\"\");\n\t\t}\n\t};\n\n\tconst handleRaiseIntentForContext = () => {\n\t\tif (!raiseIntentWithContextContext) {\n\t\t\treturn;\n\t\t}\n\t\tif (contextTargetApp && contextIntentObjects) {\n\t\t\tlet targetObject = contextIntentObjects.find((target) => target.name === contextTargetApp);\n\t\t\tintentStore.raiseIntentForContext(raiseIntentWithContextContext, targetObject.app);\n\t\t} else {\n\t\t\tintentStore.raiseIntentForContext(raiseIntentWithContextContext);\n\t\t}\n\t};\n\n\tconst handleTargetChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n\t\tif (event.target.value === \"None\") {\n\t\t\tsetTargetApp(\"\");\n\t\t} else {\n\t\t\tsetTargetApp(event.target.value as string);\n\t\t}\n\t};\n\n\tconst handleContextTargetChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n\t\tif (event.target.value === \"None\") {\n\t\t\tsetContextTargetApp(\"\");\n\t\t} else {\n\t\t\tsetContextTargetApp(event.target.value as string);\n\t\t}\n\t};\n\n\tconst handleChangeListener =\n\t\t(setValue: ListenerSetValue, setError: ListenerSetError) => (event: React.ChangeEvent<{}>, newValue: any) => {\n\t\t\tif (typeof newValue === \"string\") {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue,\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t});\n\t\t\t} else if (newValue && newValue.inputValue) {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue.inputValue,\n\t\t\t\t\tvalue: newValue.inputValue,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetValue(newValue);\n\t\t\t}\n\n\t\t\tsetError(false);\n\t\t};\n\n\tconst getOptionLabel = (option: ListenerOptionType) => option.value || option.title;\n\n\tconst filterOptions = (options: ListenerOptionType[], params: FilterOptionsState<ListenerOptionType>) => {\n\t\tconst filtered = filter(options, params);\n\n\t\tif (params.inputValue !== \"\") {\n\t\t\tfiltered.push({\n\t\t\t\tvalue: params.inputValue,\n\t\t\t\ttitle: `Add \"${params.inputValue}\"`,\n\t\t\t});\n\t\t}\n\n\t\treturn filtered;\n\t};\n\n\tconst handleAddIntentListener = () => {\n\t\tif (intentListener) {\n\t\t\tintentStore.addIntentListener(intentListener.value);\n\t\t\tsetIntentListener(null);\n\t\t} else {\n\t\t\tsetIntentError(\"Enter intent\");\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tsetIntentValue(null);\n\t\tconst fetchIntents = async () => {\n\t\t\ttry {\n\t\t\t\tif (raiseIntentContext) {\n\t\t\t\t\tlet appIntents = await fdc3.findIntentsByContext(toJS(raiseIntentContext));\n\t\t\t\t\tif (appIntents) {\n\t\t\t\t\t\tsetIntentObjects(appIntents);\n\t\t\t\t\t\tsetIntentsForContext(\n\t\t\t\t\t\t\tappIntents.map(({ intent }: { intent: any }) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\ttitle: intent.name,\n\t\t\t\t\t\t\t\t\tvalue: intent.name,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetRaiseIntentError(\"no intents found\");\n\t\t\t}\n\t\t};\n\t\tfetchIntents();\n\t}, [raiseIntentContext]);\n\n\tuseEffect(() => {\n\t\tif (intentObjects) {\n\t\t\tconst targets = intentObjects.find((obj) => obj.intent.name === intentValue?.value);\n\t\t\tif (targets?.apps) {\n\t\t\t\tsetIntentTargets(targets.apps);\n\t\t\t}\n\t\t}\n\t}, [intentValue]);\n\n\tuseEffect(() => {\n\t\tconst fetchIntents = async () => {\n\t\t\tif (!raiseIntentWithContextContext) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlet appIntentsForContext = await fdc3.findIntentsByContext(toJS(raiseIntentWithContextContext));\n\t\t\t\tif (!appIntentsForContext) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet pairObject: any[] = [];\n\t\t\t\tappIntentsForContext.forEach((intent) => {\n\t\t\t\t\tintent?.apps.forEach((app) => {\n\t\t\t\t\t\tpairObject.push({\n\t\t\t\t\t\t\tname: `${app.appId || app.name} - ${intent.intent.name}`,\n\t\t\t\t\t\t\tapp,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tsetContextIntentObjects(pairObject as any[]);\n\t\t\t} catch (e) {}\n\t\t};\n\t\tfetchIntents();\n\t}, [raiseIntentWithContextContext]);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Raise Intent</Typography>\n\t\t\t</Grid>\n\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\">\n\t\t\t\t<Grid container direction=\"row\" spacing={2}>\n\t\t\t\t\t<Grid container item spacing={2} justifyContent=\"flex-end\" className={classes.spread}>\n\t\t\t\t\t\t<Grid item className={classes.field}>\n\t\t\t\t\t\t\t<ContextTemplates handleTabChange={handleTabChange} contextStateSetter={setRaiseIntentContext} />\n\t\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\t\tclassName={classes.rightPadding}\n\t\t\t\t\t\t\t\tid=\"raise-intent\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tselectOnFocus\n\t\t\t\t\t\t\t\tblurOnSelect\n\t\t\t\t\t\t\t\tclearOnBlur\n\t\t\t\t\t\t\t\thandleHomeEndKeys\n\t\t\t\t\t\t\t\tvalue={intentValue}\n\t\t\t\t\t\t\t\tonChange={handleChangeListener(setIntentValue, setRaiseIntentError)}\n\t\t\t\t\t\t\t\tfilterOptions={filterOptions}\n\t\t\t\t\t\t\t\toptions={intentsForContext || intentListenersOptions}\n\t\t\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\t\t\trenderOption={(option) => option.title}\n\t\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\t\t\tlabel=\"INTENT TYPE\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter Intent Type\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\t\terror={!!raiseIntentError}\n\t\t\t\t\t\t\t\t\t\thelperText={raiseIntentError}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Grid className={classes.rightPadding}>\n\t\t\t\t\t\t\t\t<FormControl variant=\"outlined\" size=\"small\" className={classes.targetSelect}>\n\t\t\t\t\t\t\t\t\t<InputLabel id=\"intent-target-app\">Target (optional)</InputLabel>\n\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\tlabelId=\"intent-target-app\"\n\t\t\t\t\t\t\t\t\t\tid=\"intent-target-app-select\"\n\t\t\t\t\t\t\t\t\t\tvalue={targetApp ?? \"\"}\n\t\t\t\t\t\t\t\t\t\tonChange={handleTargetChange}\n\t\t\t\t\t\t\t\t\t\tlabel=\"Target (optional)\"\n\t\t\t\t\t\t\t\t\t\tMenuProps={{\n\t\t\t\t\t\t\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\ttransformOrigin: {\n\t\t\t\t\t\t\t\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tgetContentAnchorEl: null,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{!intentTargets?.length && (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"\" disabled>\n\t\t\t\t\t\t\t\t\t\t\t\tNo Target Apps Found\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{intentTargets?.length && (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key=\"\" value=\"None\">\n\t\t\t\t\t\t\t\t\t\t\t\tNone\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{intentTargets?.length &&\n\t\t\t\t\t\t\t\t\t\t\tintentTargets.map((target) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={target.appId || target.name} value={target.appId || target.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{target.appId || target.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleRaiseIntent} disabled={!raiseIntentContext}>\n\t\t\t\t\t\t\t\tRaise Intent\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.raiseIntent, \"raiseIntent\")}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<div className={classes.border}></div>\n\n\t\t\t\t\t<Grid container item spacing={2} justifyContent=\"flex-end\" className={classes.spread}>\n\t\t\t\t\t\t<Grid item xs={12} className={classes.bottomMargin}>\n\t\t\t\t\t\t\t<Typography variant=\"h5\">Raise Intent for Context</Typography>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item className={`${classes.field} ${classes.removeSidePadding}`}>\n\t\t\t\t\t\t\t<ContextTemplates\n\t\t\t\t\t\t\t\thandleTabChange={handleTabChange}\n\t\t\t\t\t\t\t\tcontextStateSetter={setRaiseIntentWithContextContext}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Grid className={classes.rightPadding}>\n\t\t\t\t\t\t\t\t<FormControl variant=\"outlined\" size=\"small\" className={classes.targetSelect}>\n\t\t\t\t\t\t\t\t\t<InputLabel id=\"intent-context-target-app\">Target (optional)</InputLabel>\n\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\tlabelId=\"intent-context-target-app\"\n\t\t\t\t\t\t\t\t\t\tid=\"intent-context-target-app-select\"\n\t\t\t\t\t\t\t\t\t\tvalue={contextTargetApp ?? \"\"}\n\t\t\t\t\t\t\t\t\t\tonChange={handleContextTargetChange}\n\t\t\t\t\t\t\t\t\t\tlabel=\"Target (optional)\"\n\t\t\t\t\t\t\t\t\t\tMenuProps={{\n\t\t\t\t\t\t\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\ttransformOrigin: {\n\t\t\t\t\t\t\t\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tgetContentAnchorEl: null,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{!contextIntentObjects?.length && (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"\" disabled>\n\t\t\t\t\t\t\t\t\t\t\t\tNo Target Apps Found\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{contextIntentObjects?.length && (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key=\"\" value=\"None\">\n\t\t\t\t\t\t\t\t\t\t\t\tNone\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{contextIntentObjects?.length &&\n\t\t\t\t\t\t\t\t\t\t\tcontextIntentObjects.map((target) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value={target.name} key={target.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{target.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tdisabled={!raiseIntentWithContextContext}\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={handleRaiseIntentForContext}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRaise intent for context\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.raiseIntentForContext, \"raiseIntentForContext\")}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<div className={classes.border}></div>\n\n\t\t\t\t\t<Grid container item spacing={2} justifyContent=\"flex-end\" className={classes.spread}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<Typography className={classes.bottomMargin} variant=\"h5\">\n\t\t\t\t\t\t\t\tAdd Context Listener\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item className={`${classes.field} ${classes.removeSidePadding}`}>\n\t\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\t\tid=\"intent-listener\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tselectOnFocus\n\t\t\t\t\t\t\t\tblurOnSelect\n\t\t\t\t\t\t\t\tclearOnBlur\n\t\t\t\t\t\t\t\thandleHomeEndKeys\n\t\t\t\t\t\t\t\tvalue={intentListener}\n\t\t\t\t\t\t\t\tonChange={handleChangeListener(setIntentListener, setIntentError)}\n\t\t\t\t\t\t\t\tfilterOptions={filterOptions}\n\t\t\t\t\t\t\t\toptions={intentListenersOptions}\n\t\t\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\t\t\trenderOption={(option) => option.title}\n\t\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\t\t\tlabel=\"INTENT LISTENER\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter Intent Type\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\t\terror={!!intentError}\n\t\t\t\t\t\t\t\t\t\thelperText={intentError}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={handleAddIntentListener}\n\t\t\t\t\t\t\t\tdisabled={intentListener === null}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd Listener\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.intentListener, \"addIntentListener\")}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t</div>\n\t);\n});\n","import React, { FormEvent, useState } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Button, IconButton, Tooltip, Typography, Grid, TextField } from \"@material-ui/core\";\nimport { observer } from \"mobx-react\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport Autocomplete, { createFilterOptions } from \"@material-ui/lab/Autocomplete\";\nimport contextStore, { ContextType } from \"../store/ContextStore\";\nimport appChannelStore from \"../store/AppChannelStore\";\nimport { codeExamples } from \"../fixtures/codeExamples\";\nimport { TemplateTextField } from \"./common/TemplateTextField\";\nimport { copyToClipboard } from \"./common/CopyToClipboard\";\nimport { ContextTemplates } from \"./ContextTemplates\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: \"flex\",\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\talignItems: \"center\",\n\t\t\tmarginTop: theme.spacing(1),\n\t\t\t\"& > *\": {\n\t\t\t\tmargin: theme.spacing(1),\n\t\t\t\tmarginLeft: \"0px\",\n\t\t\t},\n\t\t},\n\t\tcontextType: {\n\t\t\tflexGrow: 1,\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\ttopMargin: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t},\n\t\t\t\"& > *\": {\n\t\t\t\tmarginRight: theme.spacing(1),\n\t\t\t},\n\t\t\t\"& > *:last-child\": {\n\t\t\t\tmarginRight: 0,\n\t\t\t},\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t},\n\t\trightAlign: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t\tspread: {\n\t\t\tflexDirection: \"row\",\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tpaddingLeft: \"0px\",\n\t\t\t},\n\t\t},\n\t\ttextField: {\n\t\t\twidth: \"100%\",\n\t\t\t\"& input\": {\n\t\t\t\theight: \"29px\",\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t},\n\t\th4: {\n\t\t\tfontSize: \"22px\",\n\t\t},\n\t\th6: {\n\t\t\tfontSize: \"14px\",\n\t\t},\n\t\tfield: {\n\t\t\tflexGrow: 1,\n\t\t\tmarginRight: theme.spacing(1),\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\tborder: {\n\t\t\theight: \"1px\",\n\t\t\twidth: \"100%\",\n\t\t\tbackgroundColor: \"#acb2c0\",\n\t\t\tmarginTop: \"24px\",\n\t\t\tmarginBottom: \"16px\",\n\t\t},\n\t\trightPadding: {\n\t\t\tpaddingRight: theme.spacing(0.5),\n\t\t},\n\t})\n);\n\ninterface ListenerOptionType {\n\ttitle: string;\n\tvalue: string;\n\ttype: string | undefined;\n}\n\ninterface FilterOptionsState<T> {\n\tinputValue: string;\n\tgetOptionLabel: (option: T) => string;\n}\n\nconst listenerFilter = createFilterOptions<ListenerOptionType>();\n\nexport const AppChannels = observer(({ handleTabChange }: { handleTabChange: any }) => {\n\tconst classes = useStyles();\n\tconst [render, setRender] = useState<boolean>(false);\n\tconst [currentAppChannelId, setCurrentAppChannelId] = useState<string>(\"\");\n\tconst contextListenersOptionsAll: ListenerOptionType[] = contextStore.contextsList.map(({ id, template }) => {\n\t\treturn {\n\t\t\ttitle: id,\n\t\t\tvalue: id,\n\t\t\ttype: template?.type,\n\t\t};\n\t});\n\tcontextListenersOptionsAll.unshift({\n\t\ttitle: \"All\",\n\t\tvalue: \"all\",\n\t\ttype: \"All\",\n\t});\n\n\tconst contextListenersOptions = Array.from(\n\t\tnew Map(contextListenersOptionsAll.reverse().map((item) => [item[\"type\"], item])).values()\n\t).reverse();\n\n\tconst handleGetorCreateChannel = (e: FormEvent | null = null) => {\n\t\te?.preventDefault();\n\t\tif (currentAppChannelId) {\n\t\t\tlet foundChannel = appChannelStore.appChannelsList.find(\n\t\t\t\t(currentChannel) => currentChannel.id === currentAppChannelId\n\t\t\t);\n\t\t\tif (!foundChannel) {\n\t\t\t\tappChannelStore.getOrCreateChannel(currentAppChannelId);\n\t\t\t}\n\t\t\tsetCurrentAppChannelId(\"\");\n\t\t}\n\t};\n\n\tconst handleChannelChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n\t\tsetCurrentAppChannelId(event.target.value as string);\n\t};\n\n\tconst getOptionLabel = (option: ListenerOptionType) => option.type || option.title;\n\n\tconst handleChangeAppListener = (channelId: string) => (event: React.ChangeEvent<{}>, newValue: any) => {\n\t\tlet foundChannel = appChannelStore.appChannelsList.find((currentChannel) => currentChannel.id === channelId);\n\t\tif (!foundChannel) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet newListener;\n\t\tlet foundListener = appChannelStore.appChannelListeners?.find(\n\t\t\t(currentListener) => currentListener.type === newValue && currentListener.channelId === channelId\n\t\t);\n\t\tif (foundListener) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof newValue === \"string\") {\n\t\t\tnewListener = {\n\t\t\t\ttitle: newValue,\n\t\t\t\tvalue: newValue,\n\t\t\t\ttype: newValue,\n\t\t\t};\n\t\t} else if (newValue && newValue.inputValue) {\n\t\t\tnewListener = {\n\t\t\t\ttitle: newValue.inputValue,\n\t\t\t\tvalue: newValue.inputValue,\n\t\t\t\ttype: newValue.inputValue,\n\t\t\t};\n\t\t} else {\n\t\t\tnewListener = newValue;\n\t\t}\n\n\t\tfoundChannel.currentListener = newListener;\n\t\tfoundChannel.listenerError = \"\";\n\t};\n\n\tconst handleAddContextListener = (channelId: string) => {\n\t\tlet foundChannel = appChannelStore.appChannelsList.find((currentChannel) => currentChannel.id === channelId);\n\t\tif (!foundChannel) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (foundChannel?.currentListener) {\n\t\t\tif (appChannelStore.isContextListenerExists(channelId, foundChannel?.currentListener.type)) {\n\t\t\t\tfoundChannel.listenerError = \"Listener already added\";\n\t\t\t} else {\n\t\t\t\tappChannelStore.addChannelListener(channelId, foundChannel.currentListener.type);\n\t\t\t\tfoundChannel.listenerError = \"\";\n\t\t\t}\n\t\t} else {\n\t\t\tfoundChannel.listenerError = \"Enter context type\";\n\t\t}\n\t\tsetRender(render);\n\t};\n\n\tconst handleContextStateChange = (context: ContextType, channel: string) => {\n\t\tlet foundChannel = appChannelStore.appChannelsList.find((currentChannel) => currentChannel.id === channel);\n\t\tif (foundChannel) {\n\t\t\tfoundChannel.context = context;\n\t\t}\n\t};\n\n\tconst handleBroadcast = (channel: any) => {\n\t\tif (channel.context) {\n\t\t\tappChannelStore.broadcast(channel.id, channel.context);\n\t\t}\n\t};\n\n\tconst filterOptions = (options: ListenerOptionType[], params: FilterOptionsState<ListenerOptionType>) => {\n\t\tconst filtered = listenerFilter(options, params);\n\t\tif (params.inputValue !== \"\") {\n\t\t\tfiltered.push({\n\t\t\t\tvalue: params.inputValue,\n\t\t\t\ttitle: `Add \"${params.inputValue}\"`,\n\t\t\t\ttype: params.inputValue,\n\t\t\t});\n\t\t}\n\t\treturn filtered;\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Get Channel</Typography>\n\t\t\t</Grid>\n\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\" onSubmit={(e) => handleGetorCreateChannel(e)}>\n\t\t\t\t<Grid container direction=\"row\" spacing={1}>\n\t\t\t\t\t<Grid item className={classes.field}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tlabel=\"Channel Name\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tonChange={handleChannelChange}\n\t\t\t\t\t\t\tvalue={currentAppChannelId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tonClick={handleGetorCreateChannel}\n\t\t\t\t\t\t\tdisabled={!currentAppChannelId}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tGet or Create Channel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t\t<div className={classes.border}></div>\n\t\t\t{appChannelStore.appChannelsList.length > 0 &&\n\t\t\t\tappChannelStore.appChannelsList.map((channel) => (\n\t\t\t\t\t<Grid container key={channel.id} spacing={2} className={classes.spread}>\n\t\t\t\t\t\t<Grid item className={classes.field}>\n\t\t\t\t\t\t\t<Typography variant=\"h5\">Channel: {channel.id}</Typography>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid container className={classes.topMargin}>\n\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t<Typography variant=\"h5\" className={classes.h6}>\n\t\t\t\t\t\t\t\t\tBroadcast Context\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t<Grid item sm={7}>\n\t\t\t\t\t\t\t\t<ContextTemplates\n\t\t\t\t\t\t\t\t\thandleTabChange={handleTabChange}\n\t\t\t\t\t\t\t\t\tcontextStateSetter={handleContextStateChange}\n\t\t\t\t\t\t\t\t\tchannel={channel.id}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item container className={classes.controls} sm={5} justifyContent=\"flex-end\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tdisabled={!channel.context}\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={() => handleBroadcast(channel)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tBroadcast Context\n\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.appChannelBroadcast, \"appChannelBroadcast\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t<Typography variant=\"h5\" className={classes.h6}>\n\t\t\t\t\t\t\t\t\tAdd Context Listener\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item sm={7} className={classes.rightPadding}>\n\t\t\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tselectOnFocus\n\t\t\t\t\t\t\t\t\tblurOnSelect\n\t\t\t\t\t\t\t\t\tclearOnBlur\n\t\t\t\t\t\t\t\t\thandleHomeEndKeys\n\t\t\t\t\t\t\t\t\tvalue={channel.currentListener}\n\t\t\t\t\t\t\t\t\tonChange={handleChangeAppListener(channel.id)}\n\t\t\t\t\t\t\t\t\tfilterOptions={filterOptions}\n\t\t\t\t\t\t\t\t\toptions={contextListenersOptions}\n\t\t\t\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\t\t\t\trenderOption={(option) => option.type}\n\t\t\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"CONTEXT TYPE\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter Context Type\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\t\t\terror={!!channel.listenerError}\n\t\t\t\t\t\t\t\t\t\t\thelperText={channel.listenerError}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonKeyDown={(event) => {\n\t\t\t\t\t\t\t\t\t\tif (event.key === \"Enter\") {\n\t\t\t\t\t\t\t\t\t\t\tevent.defaultPrevented = true;\n\t\t\t\t\t\t\t\t\t\t\thandleAddContextListener(channel.id);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t<Grid item className={classes.controls} sm={5} justifyContent=\"flex-end\">\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={() => handleAddContextListener(channel.id)}>\n\t\t\t\t\t\t\t\t\tAdd Listener\n\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.appChannelContextListener, \"addAppChannelContextListener\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<div className={classes.border}></div>\n\t\t\t\t\t</Grid>\n\t\t\t\t))}\n\t\t</div>\n\t);\n});\n","import React, { useEffect, useState } from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { Grid, Paper, Tabs, Tab, Typography, Link } from \"@material-ui/core\";\nimport { observer } from \"mobx-react\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport { createTheme } from \"@material-ui/core/styles\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport \"normalize.css\";\nimport \"@fontsource/roboto\";\nimport \"@fontsource/source-code-pro\";\nimport { TabPanel } from \"./components/common/TabPanel\";\nimport { Header } from \"./components/Header\";\nimport { Channels } from \"./components/Channels\";\nimport { Workbench } from \"./components/Workbench/Workbench\";\nimport { ContextCreate } from \"./components/ContextCreate\";\nimport { Intents } from \"./components/Intents\";\nimport { AppChannels } from \"./components/AppChannels\";\nimport snackbarStore from \"./store/SnackbarStore\";\nimport \"./App.css\";\nimport { fdc3Ready } from \"@finos/fdc3\";\n\nconst mainTheme = createTheme({\n\tpalette: {\n\t\tprimary: {\n\t\t\tlight: \"#005d85\",\n\t\t\tmain: \"#0086bf\",\n\t\t\tdark: \"#339ecb\",\n\t\t\tcontrastText: \"#fff\",\n\t\t},\n\t},\n\tprops: {\n\t\tMuiLink: {\n\t\t\tunderline: \"hover\",\n\t\t},\n\t},\n});\n\nmainTheme.typography.h4 = {\n\tfontFamily: \"Source Code Pro\",\n\tfontSize: \"20px\",\n\tcolor: \"#0086bf\",\n\tpaddingLeft: \"4px\",\n\tpaddingBottom: \"11px\",\n};\n\nmainTheme.typography.h5 = {\n\tfontSize: \"16px\",\n};\n\nmainTheme.typography.body1 = {\n\tfontSize: \"1rem\",\n\tfontFamily: \"Roboto, Helvetica, Arial, sans-serif\",\n\tfontWeight: 400,\n\tlineHeight: 1.5,\n\tletterSpacing: \"0.00938em\",\n\tmarginBlockStart: \"10px\",\n\tmarginBlockEnd: \"10px\",\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\t\"@global\": {\n\t\t\t\".MuiFormHelperText-contained.Mui-error\": {\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tmarginLeft: \"9px\",\n\t\t\t\tbottom: \"-11px\",\n\t\t\t\tpadding: \"0 4px\",\n\t\t\t\tbackgroundColor: theme.palette.common.white,\n\t\t\t},\n\t\t\t\".MuiButton-contained\": {\n\t\t\t\tboxShadow: \"none\",\n\t\t\t},\n\t\t\t\".MuiGrid-item:has(> .MuiButton-root)\": {\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\talignItems: \"center\",\n\t\t\t},\n\t\t\t\".MuiInputBase-root.Mui-disabled\": {\n\t\t\t\tcolor: \"rgba(0, 0, 0, 0.6)\",\n\t\t\t\tcursor: \"default\",\n\t\t\t},\n\t\t},\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\theader: {\n\t\t\tmarginBottom: theme.spacing(2),\n\t\t},\n\t\tbody: {\n\t\t\theight: \"100%\",\n\t\t},\n\t\tpaper: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\tpadding: theme.spacing(2),\n\t\t\theight: \"100%\",\n\t\t\t\"&:first-child\": {\n\t\t\t\tmarginTop: 0,\n\t\t\t},\n\t\t},\n\t\ttabs: {\n\t\t\tborderBottomColor: \"#acb2c0\",\n\t\t\tborderBottomStyle: \"solid\",\n\t\t\tborderBottomWidth: \"1px\",\n\t\t\tminHeight: \"28px\",\n\t\t\t\"& [aria-selected='true']\": {\n\t\t\t\tbackgroundColor: \"rgba(0, 134, 191, 0.21)\",\n\t\t\t},\n\t\t},\n\t\ttabIndicator: {\n\t\t\tbackgroundColor: \"rgba(0, 134, 191, 0.21)\",\n\t\t},\n\t\tindicator: {\n\t\t\tbackgroundColor: \"#00bbe1\",\n\t\t},\n\t\tfooter: {\n\t\t\tfontSize: \"10px\",\n\t\t\tfontStyle: \"italic\",\n\t\t\tcolor: \"#5b606f\",\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tmargin: theme.spacing(2),\n\t\t\t\"& *:first-child\": {\n\t\t\t\tpaddingTop: \"27px\",\n\t\t\t},\n\t\t},\n\t\tlink: {\n\t\t\tcolor: \"#5b606f\",\n\t\t\tfontWeight: \"bold\",\n\t\t\t\"&:hover\": {\n\t\t\t\tcolor: \"#5b606f\",\n\t\t\t},\n\t\t},\n\t\tcode: {\n\t\t\tfontFamily: \"courier, courier new, serif\",\n\t\t},\n\t\tworkbench: {\n\t\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\t\tmarginTop: \"30px\",\n\t\t\t},\n\t\t},\n\t})\n);\n\nconst openAPIDocs = (event: React.MouseEvent<HTMLElement>) => {\n\tevent.preventDefault();\n\twindow.open(\"https://fdc3.finos.org/docs/api/overview\", \"FDC3ApiDocs\");\n\treturn false;\n};\n\nconst openSpecAccessDocs = (event: React.MouseEvent<HTMLElement>) => {\n\tevent.preventDefault();\n\twindow.open(\"https://fdc3.finos.org/docs/api/spec#api-access\", \"FDC3ApiDocs\");\n\treturn false;\n};\n\nconst openSupportedPlatformsDocs = (event: React.MouseEvent<HTMLElement>) => {\n\tevent.preventDefault();\n\twindow.open(\"https://fdc3.finos.org/docs/supported-platforms\", \"FDC3ApiDocs\");\n\treturn false;\n};\n\nexport const App = observer(() => {\n\tconst classes = useStyles();\n\tconst [fdc3Available, setFdc3Available] = useState(false);\n\tconst [openSnackbar, setOpenSnackbar] = useState(false);\n\tconst [tabIndex, setTabIndex] = useState(0);\n\tconst [contextName, setContextName] = useState(\"\");\n\n\tconst handleTabChange = (event: React.ChangeEvent<{}>, newIndex: number, name: string = \"\") => {\n\t\tsetContextName(name);\n\t\tsetTabIndex(newIndex);\n\t};\n\n\tconst handleClose = (event?: React.SyntheticEvent, reason?: string) => {\n\t\tif (reason === \"clickaway\") {\n\t\t\treturn;\n\t\t}\n\n\t\tsetOpenSnackbar(false);\n\t\t// Need to show close animation\n\t\tsetTimeout(() => snackbarStore.clearSnackbarData(), 500);\n\t};\n\n\t//check if the FDC3 API is available so we know whether to render\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tawait fdc3Ready(5000);\n\t\t\t\tsetFdc3Available(true);\n\t\t\t} catch (e) {}\n\t\t})();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsetOpenSnackbar(!!snackbarStore.snackbarData);\n\t}, [snackbarStore.snackbarData]);\n\n\treturn (\n\t\t<ThemeProvider theme={mainTheme}>\n\t\t\t<Grid className={classes.root} container>\n\t\t\t\t<Grid className={classes.header} container item xs={12}>\n\t\t\t\t\t<Header fdc3Available={fdc3Available} />\n\t\t\t\t</Grid>\n\t\t\t\t{fdc3Available ? (\n\t\t\t\t\t<Grid className={classes.body} container spacing={2} item xs={12} style={{ marginLeft: \"0px\" }}>\n\t\t\t\t\t\t<Grid item xs={12} md={8} style={{ flex: 1 }}>\n\t\t\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\t\t\tvalue={tabIndex}\n\t\t\t\t\t\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\t\t\t\t\t\tonChange={handleTabChange}\n\t\t\t\t\t\t\t\t\tvariant=\"scrollable\"\n\t\t\t\t\t\t\t\t\tscrollButtons=\"auto\"\n\t\t\t\t\t\t\t\t\tclassName={classes.tabs}\n\t\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\t\tindicator: classes.indicator,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Tab label=\"Contexts\" />\n\t\t\t\t\t\t\t\t\t<Tab label=\"Intents\" />\n\t\t\t\t\t\t\t\t\t<Tab label=\"System Channels\" />\n\t\t\t\t\t\t\t\t\t<Tab label=\"App Channels\" />\n\t\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\t\t<TabPanel value={tabIndex} index={0}>\n\t\t\t\t\t\t\t\t\t<ContextCreate contextName={contextName} />\n\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t\t<TabPanel value={tabIndex} index={1}>\n\t\t\t\t\t\t\t\t\t<Intents handleTabChange={handleTabChange} />\n\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t\t<TabPanel value={tabIndex} index={2}>\n\t\t\t\t\t\t\t\t\t<Channels handleTabChange={handleTabChange} />\n\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t\t<TabPanel value={tabIndex} index={3}>\n\t\t\t\t\t\t\t\t\t<AppChannels handleTabChange={handleTabChange} />\n\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item xs={12} md={4} className={classes.workbench}>\n\t\t\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t\t\t<Workbench />\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t) : (\n\t\t\t\t\t<Grid className={classes.body} container spacing={2} item xs={12} style={{ marginLeft: \"0px\" }}>\n\t\t\t\t\t\t<Grid container direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={2} item xs={12}>\n\t\t\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t\t\t<Typography variant=\"h4\">FDC3 API not detected!</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t\t\t\tAn FDC3 desktop agent implementation was not found at{\" \"}\n\t\t\t\t\t\t\t\t\t<span className={classes.code}>window.fdc3</span>.\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t\t\t\tFor web applications to be FDC3-enabled, they need to run in the context of an agent that makes the\n\t\t\t\t\t\t\t\t\tFDC3 API available to the application. This desktop agent is also responsible for lauching and\n\t\t\t\t\t\t\t\t\tco-ordinating applications. It could be a browser extension, web app, or full-fledged desktop\n\t\t\t\t\t\t\t\t\tcontainer framework.\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t\t\t\tSee the FDC3 standard documentation for details on{\" \"}\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tclassName={classes.link}\n\t\t\t\t\t\t\t\t\t\thref=\"https://fdc3.finos.org/docs/supported-platforms\"\n\t\t\t\t\t\t\t\t\t\tonClick={openSupportedPlatformsDocs}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tsupported platforms\n\t\t\t\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t\t\t\tand{\" \"}\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tclassName={classes.link}\n\t\t\t\t\t\t\t\t\t\thref=\"https://fdc3.finos.org/docs/api/spec#api-access\"\n\t\t\t\t\t\t\t\t\t\tonClick={openSpecAccessDocs}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\taccessing the FDC3 API\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t)}\n\n\t\t\t\t<Grid container item xs={12} className={classes.footer}>\n\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\tLearn more about the{\" \"}\n\t\t\t\t\t\t<Link className={classes.link} href=\"https://fdc3.finos.org/docs/api/overview\" onClick={openAPIDocs}>\n\t\t\t\t\t\t\tFDC3 Standard and APIs\n\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t| Proud member of the{\" \"}\n\t\t\t\t\t\t<Link className={classes.link} href=\"https://www.finos.org/\">\n\t\t\t\t\t\t\tFintech Open Source Foundation\n\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t| Copyright © 2021 Cosaic, inc. &amp; Contributors to the FDC3 standards project\n\t\t\t\t\t</Typography>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\n\t\t\t<Snackbar key={snackbarStore.snackbarData?.id} open={openSnackbar} autoHideDuration={4000} onClose={handleClose}>\n\t\t\t\t<Alert elevation={6} variant=\"filled\" onClose={handleClose} severity={snackbarStore.snackbarData?.type}>\n\t\t\t\t\t{snackbarStore.snackbarData?.message}\n\t\t\t\t</Alert>\n\t\t\t</Snackbar>\n\t\t</ThemeProvider>\n\t);\n});\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}