{"version":3,"sources":["components/common/TabPanel.tsx","utility/Fdc3Api.ts","components/Header.tsx","store/SnackbarStore.ts","store/SystemLogStore.ts","fixtures/logMessages.ts","store/ChannelStore.ts","fixtures/codeExamples.ts","components/common/CopyToClipboard.tsx","fixtures/contexts.ts","store/ContextStore.ts","components/common/TemplateTextField.tsx","components/ContextLinking.tsx","components/ContextTemplates.tsx","components/Channels.tsx","components/common/AccordionContent.tsx","components/common/AccordionList.tsx","components/Workbench/ReceivedField.tsx","components/Workbench/ContextListeners.tsx","fixtures/intentTypes.ts","store/IntentStore.ts","components/Workbench/IntentListeners.tsx","store/AppChannelStore.tsx","components/Workbench/AppChannelListeners.tsx","components/Workbench/SystemLogItem.tsx","components/Workbench/SystemLog.tsx","components/Workbench/Workbench.tsx","components/common/JsonInput.tsx","components/common/DialogModal.tsx","components/ContextCreate.tsx","components/IntentResolutionField.tsx","components/Intents.tsx","components/AppChannels.tsx","App.tsx","index.tsx"],"names":["useStyles","makeStyles","theme","createStyles","tabPanel","padding","spacing","TabPanel","props","classes","children","value","index","other","role","hidden","id","className","Fdc3Api","fdc3","this","window","fdc3Version","fdc3_2","fdc3_1","getCurrentChannel","context","broadcast","intent","handler","addIntentListener","contextTypeOrHandler","addContextListener","app","appId","instanceId","raiseIntentForContext","getSystemChannels","channelId","joinChannel","leaveCurrentChannel","waitForMs","fdc3Ready","getOrCreateChannel","getInfo","findIntentsByContext","root","flexGrow","toolbar","backgroundColor","paddingBottom","link","color","palette","common","white","textDecoration","info","marginLeft","minWidth","fontSize","headerCube","width","height","backgroundHeader","background","left","top","position","zIndex","warning","transform","warningText","appid","whiteSpace","overflow","textoOverflow","overflowWrap","maxWidth","Header","useState","appInfo","setAppInfo","params","URLSearchParams","location","search","appMetadata","version","supportedVersion","useEffect","fdc3Available","updateInfo","implInfo","displayInfo","provider","providerVersion","get","console","error","AppBar","elevation","style","Toolbar","Typography","variant","src","map","ver","href","length","scope","includes","Tooltip","title","snackbarStore","snackbarData","makeObservable","observable","setSnackbar","action","clearSnackbarData","data","nanoid","SystemLogStore","logList","addLog","name","type","body","message","logMessages","getFdc3","getChannels","success","joinUserChannel","leaveChannel","appbroadcast","raiseIntent","removeContextListener","removeAppChannelContextListener","removeIntentListener","receivedContextListener","receivedAppContextListener","addAppContextListener","receivedIntentListener","saveTemplate","deleteTemplate","copyToClipboard","getLogMessage","push","systemLogStore","ChannelStore","userChannels","currentUserChannel","getUserChannels","leaveUserChannel","getCurrentUserChannel","userChannel","runInAction","then","JSON","stringify","catch","reason","isSuccess","channelStore","codeExamples","text","navigator","clipboard","writeText","contexts","uuid","uuidv4","template","email","schemaUrl","URL","contacts","ticker","RIC","ISIN","instruments","LEI","FDS_ID","ISOALPHA3","instrument","holding","positions","ContextStore","contextsList","currentContext","contextListeners","setContext","deleteContextItem","addContextItem","saveContextItem","localStorageContextList","localStorage","getItem","usingDefaultContexts","parsedListFromStorage","parse","Array","isArray","err","log","updateLocalStorage","contextItem","sort","a","b","localeCompare","selectedId","find","Object","keys","forEach","key","filter","c","setItem","toJS","contextType","listenerId","toLowerCase","metaData","currentListener","lastReceivedContext","contactListener","listener","listenerIndex","findIndex","unsubscribe","splice","contextStore","TemplateTextField","withStyles","borderBottomColor","borderColor","TextField","form","display","flexWrap","marginTop","marginRight","controls","spread","flexDirection","justifyContent","contextListenerName","rightAlign","listenerFilter","createFilterOptions","ContextLinking","observer","contextListener","setContextListener","contextError","setContextError","contextListenersOptionsAll","unshift","setValue","setError","contextListenersOptions","from","Map","reverse","item","values","handleAddContextListener","e","preventDefault","isContextListenerExists","Grid","xs","noValidate","autoComplete","onSubmit","container","direction","Autocomplete","size","selectOnFocus","blurOnSelect","clearOnBlur","handleHomeEndKeys","onChange","event","newValue","inputValue","filterOptions","options","filtered","getOptionLabel","option","renderOption","renderInput","label","placeholder","helperText","Button","onClick","IconButton","contextName","cursor","contextFilter","ContextTemplates","handleTabChange","contextStateSetter","channel","contextsOptions","isInitialMount","useRef","current","selectedContext","getOptionSelected","alignItems","margin","paddingLeft","channelsSelect","border","marginBottom","centerChildren","Channels","setChannelId","isError","setIsError","broadcastContext","setBroadcastContext","sm","FormControl","InputLabel","Select","labelId","target","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","MenuItem","disabled","FormHelperText","accordion","boxShadow","accordionSummary","minHeight","accordionDetails","paddingTop","accordionTitle","expand_icon","icon","AccordionContent","Accordion","defaultExpanded","AccordionSummary","expandIcon","AccordionDetails","list","listItem","paddingRight","listAction","AccordionList","listItems","noItemsText","onDelete","handleDelete","List","textPrimary","afterEachElement","ListItem","disableGutters","ListItemText","disableTypography","primary","secondary","ListItemSecondaryAction","edge","textField","input","ReceivedField","formattedData","InputLabelProps","shrink","contentEditable","fullWidth","multiline","InputProps","ContextListeners","receivedContextListenerValue","undefined","contextField","intentTypes","IntentStore","intentsList","intentListeners","intentListener","resolution","intentStore","IntentListeners","AppChannelStore","appChannelsList","currentAppChannel","appChannelListeners","currentChannel","newListener","appChannelStore","AppChannelListeners","SystemLogItem","logItem","borderTop","dark","divider","SystemLog","component","paper","systemLog","maxHeight","overflowY","indicator","tabs","borderBottomStyle","borderBottomWidth","a11yProps","Workbench","tabValue","setTabValue","Tabs","indicatorColor","scrollButtons","Tab","borderRadius","shape","grey","jsonInput","errorText","bottom","main","JsonInput","jsoneditor","setJsoneditor","initialSettings","mode","mainMenuBar","statusBar","indentation","onChangeText","onValidationError","onJsonError","errorMsg","schema","$RefParser","dereference","circular","editor","JSONEditor","json","destroy","setSchema","set","tabIndex","ref","DialogModal","onClose","onAgree","open","selectedValue","handleClose","Dialog","DialogTitle","DialogActions","autoFocus","templateSelect","multilineField","button","delete","copy","margins","tableContainer","emptyJson","ContextCreate","templateName","setTemplateName","duplicateName","setDuplicateName","contextValue","setContextValue","setOpen","deleteContext","setDeleteContext","setDisabled","gridRef","handleChangeTemplate","found","tempName","ignoreUuid","reduce","count","validate","handleCreateTemplate","handleSaveTemplate","isValid","currContext","handleDuplicateTemplate","copyName","newContext","scrollIntoView","behavior","block","contextId","TableContainer","Table","TableBody","TableRow","hover","selected","TableCell","align","handleClickOpen","resetContextList","field","errors","IntentResolutionField","resolutionResult","setResolutionResult","results","source","displayIntentResults","hasOwnProperty","getResult","result","resultContext","h4","bottomMargin","removeSidePadding","targetSelect","rightPadding","Intents","intentValue","setIntentValue","raiseIntentError","setRaiseIntentError","setIntentListener","intentsForContext","setIntentsForContext","intentTargets","setIntentTargets","targetApp","setTargetApp","contextTargetApp","setContextTargetApp","intentObjects","setIntentObjects","contextIntentObjects","setContextIntentObjects","raiseIntentContext","setRaiseIntentContext","raiseIntentWithContextContext","setRaiseIntentWithContextContext","intentError","setIntentError","intentResolution","setIntentResolution","intentListenersOptions","handleRaiseIntent","targetObject","handleChangeListener","fetchIntents","appIntents","targets","obj","apps","appIntentsForContext","pairObject","topMargin","h6","AppChannels","render","setRender","currentAppChannelId","setCurrentAppChannelId","handleGetorCreateChannel","foundChannel","listenerError","addChannelListener","handleContextStateChange","handleBroadcast","onKeyDown","defaultPrevented","mainTheme","createTheme","light","contrastText","MuiLink","underline","typography","fontFamily","h5","body1","fontWeight","lineHeight","letterSpacing","marginBlockStart","marginBlockEnd","header","tabIndicator","footer","fontStyle","code","workbench","breakpoints","down","openAPIDocs","openSpecAccessDocs","openSupportedPlatformsDocs","App","setFdc3Available","openSnackbar","setOpenSnackbar","setTabIndex","setContextName","newIndex","setTimeout","ThemeProvider","md","flex","Paper","Link","Snackbar","autoHideDuration","Alert","severity","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bd844e83.chunk.js","sourcesContent":["import React from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\ninterface TabPanelProps {\n\tchildren?: React.ReactNode;\n\tindex: any;\n\tvalue: any;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttabPanel: {\n\t\t\tpadding: theme.spacing(2),\n\t\t},\n\t})\n);\n\nexport const TabPanel: React.FC<TabPanelProps> = (props: TabPanelProps) => {\n\tconst classes = useStyles();\n\n\tconst { children, value, index, ...other } = props;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"tabpanel\"\n\t\t\thidden={value !== index}\n\t\t\tid={`scrollable-auto-tabpanel-${index}`}\n\t\t\taria-labelledby={`scrollable-auto-tab-${index}`}\n\t\t\t{...other}\n\t\t>\n\t\t\t{value === index && <div className={classes.tabPanel}>{children}</div>}\n\t\t</div>\n\t);\n};\n","import * as fdc3_1 from \"fdc3-1.2\";\nimport * as fdc3_2 from \"fdc3-2.0\";\n\n\ninterface fdc3_1IntentResolution extends fdc3_1.IntentResolution {\n\tgetResult?: any;\n\tresultContext?: any\n}\ninterface fdc3_2IntentResolution extends fdc3_2.IntentResolution {\n\tresultContext?: any\n}\n\ninterface fdc3_1ImplementationMetadata extends fdc3_1.ImplementationMetadata {\n\tappMetadata?: any\n}\n\ninterface fdc3_2ImplementationMetadata extends fdc3_2.ImplementationMetadata {\n\tappMetadata: any\n}\n\nexport type ContextType = {\n\ttype: string;\n\tid?: {\n\t\t[key: string]: string;\n\t};\n\tname?: string;\n\t[x: string]: any;\n};\n\nexport interface Fdc3Listener {\n\tid: string;\n    channelId?: string;\n\ttype: string | undefined;\n\tlistener: fdc3_1.Listener | fdc3_2.Listener;\n\tlastReceivedContext?: ContextType | null;\n\tmetaData?: any;\n}\n\nexport type IntentResolution = fdc3_1IntentResolution | fdc3_2IntentResolution\n\nexport type TargetApp = fdc3_1.TargetApp\n\nexport type Channel = fdc3_1.Channel | fdc3_2.Channel\n\nexport type ImplementationMetadata = fdc3_1ImplementationMetadata | fdc3_2ImplementationMetadata\n\nexport type AppMetadata = ((fdc3_1.AppMetadata | fdc3_2.AppMetadata) & {\n\tinstanceId?: string\n})\n\nexport type AppIntent = fdc3_1.AppIntent | fdc3_2.AppIntent\n\nexport type Context = fdc3_1.Context | fdc3_2.Context\n\nexport type AppIdentifier = fdc3_2.AppIdentifier;\n\nclass Fdc3Api {\n\tfdc3: typeof fdc3_1 | typeof fdc3_2;\n\t\n    constructor() {\n        this.fdc3 = window.fdc3Version === '2.0' ? fdc3_2 : fdc3_1;\n    }\n\n\tgetCurrentChannel() {\n\t\treturn this.fdc3.getCurrentChannel();\n\t}\n\n\tbroadcast(context: fdc3_1.Context | fdc3_2.Context) {\n\t\treturn this.fdc3.broadcast(context);\n\t}\n\n\tasync addIntentListener(intent: string, handler: fdc3_1.ContextHandler | fdc3_2.ContextHandler) {\n\t\treturn await this.fdc3.addIntentListener(intent, handler);\n\t}\n\n\tasync addContextListener(contextTypeOrHandler: string | fdc3_1.ContextHandler | fdc3_2.ContextHandler, handler?: fdc3_1.ContextHandler | fdc3_2.ContextHandler | undefined){\n\t\treturn await this.fdc3.addContextListener(contextTypeOrHandler, handler);\n\t}\n\n\tasync raiseIntent(intent: string, context: fdc3_1.Context & fdc3_2.Context, app?: AppMetadata | undefined) {\n\t\tif(window.fdc3Version === '2.0') {\n\t\t\treturn await fdc3_2.raiseIntent(intent, context, {appId: app?.appId ? app.appId : '', instanceId: app?.instanceId && app.instanceId});\n\t\t} else {\n\t\t\treturn fdc3_1.raiseIntent(intent, context, app?.appId);\n\t\t}\n\t}\n\n\tasync raiseIntentForContext(context: fdc3_1.Context & fdc3_2.Context, app?: (fdc3_1.TargetApp & (String | fdc3_2.AppIdentifier)) | undefined){\n\t\treturn await this.fdc3.raiseIntentForContext(context, app);\n\t}\n\n\tgetSystemChannels(){\n\t\treturn this.fdc3.getSystemChannels();\n\t}\n\n\tjoinChannel(channelId: string) {\n\t\treturn this.fdc3.joinChannel(channelId);\n\t}\n\n\tleaveCurrentChannel() {\n\t\treturn this.fdc3.leaveCurrentChannel();\n\t}\n\n\tfdc3Ready(waitForMs?: number | undefined) {\n\t\treturn this.fdc3.fdc3Ready(waitForMs);\n\t}\n\n\tasync getOrCreateChannel(channelId: string) {\n\t\treturn await this.fdc3.getOrCreateChannel(channelId)\n\t}\n\n\tasync getInfo() {\n\t\treturn await this.fdc3.getInfo();\n\t}\n\n\tfindIntentsByContext(context: Context) {\n\t\treturn this.fdc3.findIntentsByContext(context)\n\t}\n}\n\nconst fdc3 = new Fdc3Api();\n\nexport default fdc3;\n","import React, { useEffect, useState } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { AppBar, Toolbar, Tooltip, Typography } from \"@material-ui/core\";\nimport WarningIcon from \"@material-ui/icons/Warning\";\nimport fdc3, {ImplementationMetadata} from \"../utility/Fdc3Api\";\n\ndeclare global {\n    interface Window { fdc3Version: string; }\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\ttoolbar: {\n\t\t\tbackgroundColor: \"transparent\",\n\t\t\tpadding: theme.spacing(2, 4),\n\t\t\tpaddingBottom: \"0px\",\n\t\t},\n\t\tlink: {\n\t\t\tcolor: theme.palette.common.white,\n\t\t\ttextDecoration: \"underline\",\n\t\t\t\"&:hover\": {\n\t\t\t\tcolor: theme.palette.common.white,\n\t\t\t},\n\t\t},\n\t\tinfo: {\n\t\t\tmarginLeft: \"auto\",\n\t\t\tminWidth: \"200px\",\n\t\t\tfontSize: \"12px\",\n\t\t},\n\t\tfdc3: {},\n\t\theaderCube: {\n\t\t\twidth: \"350px\",\n\t\t\theight: \"50px\",\n\t\t},\n\t\tbackgroundHeader: {\n\t\t\tbackground: \"linear-gradient(to bottom, #0086bf, #00bbe1)\",\n\t\t\theight: \"200px\",\n\t\t\twidth: \"100%\",\n\t\t\tleft: \"0px\",\n\t\t\ttop: \"0px\",\n\t\t\tposition: \"absolute\",\n\t\t\tzIndex: -10,\n\t\t},\n\t\twarning: {\n\t\t\tcolor: \"yellow\",\n\t\t\tfontSize: \"10px\",\n\t\t\ttransform: \"scale(1.5)\",\n\t\t\tmarginLeft: \"5px\"\n\t\t},\n\t\twarningText: {\n\t\t\tcolor:\"red\"\n\t\t},\n\t\tappid: {\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextoOverflow: \"ellipsis\",\n\t\t\toverflowWrap: \"anywhere\",\n\t\t\tmaxWidth: \"150px\"\n\t\t}\n\t\t\n\t})\n);\n\nexport const Header = (props: { fdc3Available: boolean }) => {\n\tconst classes = useStyles();\n\tconst [appInfo, setAppInfo] = useState<any>();\n\tconst params = new URLSearchParams(window.location.search);\n\tconst warningText = `Your FDC3 version (${window.fdc3Version}) doesn't match the version of the FDC3 Workbench you are using (${appInfo?.appMetadata?.version})`\n\tconst supportedVersion = ['2.0', '1.2'];\n\n\tuseEffect(() => {\n\t\tif (props.fdc3Available) {\n\t\t\t//getInfo is not available in FDC3 < v1.2, handle any errors thrown when trying to use it\n\t\t\t\tconst updateInfo = async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet implInfo: ImplementationMetadata = await fdc3.getInfo();\n\t\t\t\t\t\t\n\t\t\t\t\t\tlet displayInfo = {\n\t\t\t\t\t\t\tfdc3Version: \"not specified\", \n\t\t\t\t\t\t\tprovider: \"not specified\", \n\t\t\t\t\t\t\tproviderVersion: \"not specified\",\n\t\t\t\t\t\t\tappMetadata: {\n\t\t\t\t\t\t\t\tappId: \"not specified\",\n\t\t\t\t\t\t\t\tversion: \"not specified\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (implInfo.fdc3Version) {\n\t\t\t\t\t\t\tdisplayInfo.fdc3Version = params.get('fdc3Version') || implInfo.fdc3Version \n\t\t\t\t\t\t\twindow.fdc3Version = displayInfo.fdc3Version;\n\t\t\t\t\t\t} \n\t\t\t\t\t\tif (implInfo.provider) {displayInfo.provider = implInfo.provider; } \n\t\t\t\t\t\tif (implInfo.providerVersion) {displayInfo.providerVersion = implInfo.providerVersion; } \n\t\t\t\t\t\tif (implInfo.appMetadata) {\n\t\t\t\t\t\t\tdisplayInfo.appMetadata = {\n\t\t\t\t\t\t\t\tappId: implInfo.appMetadata.appId,\n\t\t\t\t\t\t\t\tversion: implInfo.appMetadata.version\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetAppInfo(displayInfo);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(\"Failed to retrieve FDC3 implementation info\",e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\tupdateInfo()\n\t\t}\n\t}, [props.fdc3Available]);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.backgroundHeader}></div>\n\t\t\t<AppBar position=\"static\" elevation={0} style={{ backgroundColor: \"transparent\" }}>\n\t\t\t\t<Toolbar className={classes.toolbar}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Typography variant=\"h3\" color=\"inherit\" className={classes.fdc3}>\n\t\t\t\t\t\t\t<img src=\"./fdc3-logo.svg\" className={classes.headerCube} />\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography color=\"inherit\" >\n\t\t\t\t\t\t\t{supportedVersion.map((ver, index) => (\n\t\t\t\t\t\t\t\t<span key={index} >\n\t\t\t\t\t\t\t\t\t{ver === appInfo?.fdc3Version ? \n\t\t\t\t\t\t\t\t\t\t<span>{ver}</span>\n\t\t\t\t\t\t\t\t\t\t: <a className={`${classes.link}`} href={`?fdc3Version=${ver}`}>{ver}</a>\n\t\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t\t\t{supportedVersion.length - 1 !== index && <span> | </span> }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={classes.info}>\n\t\t\t\t\t\t<table id=\"providerInfo\">\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th scope=\"row\">FDC3 Version</th>\n\t\t\t\t\t\t\t\t\t{appInfo?.fdc3Version ? \n\t\t\t\t\t\t\t\t\t\tappInfo.appMetadata?.version.includes(appInfo.fdc3Version) ? \n\t\t\t\t\t\t\t\t\t\t\t<td>{appInfo.fdc3Version}</td> :\n\t\t\t\t\t\t\t\t\t\t\t<td className={classes.warningText}>{appInfo.fdc3Version} \n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip title={warningText} aria-label={warningText}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<WarningIcon className={classes.warning}/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t</td> \n\t\t\t\t\t\t\t\t\t\t: <td>unknown</td>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th scope=\"row\">Provider</th>\n\t\t\t\t\t\t\t\t\t<td>{appInfo?.provider ? appInfo.provider : \"unknown\"}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th scope=\"row\">Provider version</th>\n\t\t\t\t\t\t\t\t\t<td>{appInfo?.providerVersion ? appInfo.providerVersion : \"unknown\"}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th scope=\"row\">My AppId</th>\n\t\t\t\t\t\t\t\t\t<td className={classes.appid}>{appInfo?.appMetadata?.appId ? appInfo.appMetadata.appId : \"unknown\"}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t</div>\n\t);\n};\n","import { makeObservable, observable, action } from \"mobx\";\nimport { Color } from \"@material-ui/lab/Alert\";\nimport { nanoid } from \"nanoid\";\n\ninterface SnackbarData {\n\tmessage: string;\n\ttype: Color;\n}\n\ninterface SnackbarItem extends SnackbarData {\n\tid: string;\n}\n\nclass SnackbarStore {\n\tsnackbarData: SnackbarItem | null = null;\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tsnackbarData: observable,\n\t\t\tsetSnackbar: action,\n\t\t\tclearSnackbarData: action,\n\t\t});\n\t}\n\n\tsetSnackbar(data: SnackbarData) {\n\t\tthis.snackbarData = { ...data, id: nanoid() };\n\t}\n\n\tclearSnackbarData() {\n\t\tthis.snackbarData = null;\n\t}\n}\n\nconst snackbarStore = new SnackbarStore();\n\nexport default snackbarStore;\n","import { makeObservable, observable, action } from \"mobx\";\nimport { nanoid } from \"nanoid\";\nimport { getLogMessage } from \"../fixtures/logMessages\";\nimport snackbarStore from \"./SnackbarStore\";\n\nexport type logMessagesName =\n\t| \"getFdc3\"\n\t| \"getChannels\"\n\t| \"getCurrentChannel\"\n\t| \"joinUserChannel\"\n\t| \"leaveChannel\"\n\t| \"broadcast\"\n\t| \"appbroadcast\"\n\t| \"raiseIntent\"\n\t| \"raiseIntentForContext\"\n\t| \"addContextListener\"\n\t| \"removeContextListener\"\n\t| \"addIntentListener\"\n\t| \"removeIntentListener\"\n\t| \"receivedContextListener\"\n\t| \"receivedIntentListener\"\n\t| \"deleteTemplate\"\n\t| \"saveTemplate\"\n\t| \"copyToClipboard\"\n\t| \"getOrCreateChannel\"\n\t| \"receivedAppContextListener\"\n\t| \"addAppContextListener\"\n\t| \"removeAppChannelContextListener\";\n\nexport type logMessagesType = \"error\" | \"success\" | \"warning\" | \"info\";\n\nexport interface LogItem {\n\tid: string;\n\tname: logMessagesName;\n\ttype: logMessagesType;\n\tmessage: string;\n\tbody?: string;\n\tvariant?: \"code\" | \"text\";\n}\n\ninterface LogItemCreator extends Omit<LogItem, \"message\" | \"id\"> {\n\tvalue?: string;\n}\n\nclass SystemLogStore {\n\tlogList: LogItem[] = [];\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tlogList: observable,\n\t\t\taddLog: action,\n\t\t});\n\t}\n\n\taddLog({ name, type, value, body, variant }: LogItemCreator) {\n\t\tconst message = getLogMessage(name, type, value);\n\t\tsnackbarStore.setSnackbar({\n\t\t\tmessage: message,\n\t\t\ttype: type,\n\t\t});\n\n\t\tthis.logList.push({ id: nanoid(), name, type, message, body, variant: variant ?? \"text\" });\n\t}\n}\n\nconst systemLogStore = new SystemLogStore();\n\nexport default systemLogStore;\n","import { logMessagesName, logMessagesType } from \"../store/SystemLogStore\";\n\ntype LogMessages = {\n\t[name in logMessagesName]: {\n\t\t[type in logMessagesType]?: string;\n\t};\n};\n\nexport const getLogMessage = (name: logMessagesName, type: logMessagesType, value: string = \"\"): string => {\n\tconst logMessages: LogMessages = {\n\t\tgetFdc3: {\n\t\t\terror: `The FDC3 API is not ready${value ? ` (${value})` : \"\"}`,\n\t\t},\n\t\tgetChannels: {\n\t\t\tsuccess: `Successfully retrieved System channels`,\n\t\t\terror: `Failed to retrieve System channels`,\n\t\t},\n\t\tgetCurrentChannel: {\n\t\t\tsuccess: `Successfully retrieved current channel [${value}]`,\n\t\t\terror: `Failed to retrieve current channel`,\n\t\t},\n\t\tjoinUserChannel: {\n\t\t\tsuccess: `Successfully joined the [${value}] channel`,\n\t\t\terror: `Failed to join the [${value}] channel`,\n\t\t},\n\t\tleaveChannel: {\n\t\t\tsuccess: `Successfully left the [${value}] channel`,\n\t\t\terror: `Failed to leave the [${value}] channel`,\n\t\t\twarning: `Not currently joined to a channel`,\n\t\t},\n\t\tbroadcast: {\n\t\t\tsuccess: \"Successfully broadcast context\",\n\t\t\terror: \"Failed to broadcast context:\",\n\t\t},\n\t\tappbroadcast: {\n\t\t\tsuccess: `Successfully broadcast context to channel [${value}]: `,\n\t\t\terror: `Failed to broadcast context to channel [${value}]:`,\n\t\t},\n\t\traiseIntent: {\n\t\t\tsuccess: `Successfully raised intent [${value}]`,\n\t\t\terror: `Failed to raise intent [${value}]`,\n\t\t},\n\t\traiseIntentForContext: {\n\t\t\tsuccess: `Successfully raised intent for context`,\n\t\t\terror: `Failed to raise intent for context`,\n\t\t},\n\t\taddContextListener: {\n\t\t\tsuccess: `A context listener for '[${value}]' has been added`,\n\t\t\terror: `Failed to add a context listener for '[${value}]'`,\n\t\t},\n\t\tremoveContextListener: {\n\t\t\tsuccess: `A context listener for '[${value}]' has been removed`,\n\t\t\terror: `Failed to remove a context listener for '[${value}]'`,\n\t\t},\n\t\tremoveAppChannelContextListener: {\n\t\t\tsuccess: `${value}`,\n\t\t\terror: `${value}`,\n\t\t},\n\t\taddIntentListener: {\n\t\t\tsuccess: `An intent listener for '[${value}]' has been added`,\n\t\t\terror: `Failed to add an intent listener for '[${value}]'`,\n\t\t},\n\t\tremoveIntentListener: {\n\t\t\tsuccess: `An intent listener for '[${value}]' has been removed`,\n\t\t\terror: `Failed to remove an intent listener for '[${value}]'`,\n\t\t},\n\t\treceivedContextListener: {\n\t\t\tinfo: `Received context via '[${value}]' listener`,\n\t\t\terror: `Failed to receive context from '[${value}]' listener`,\n\t\t},\n\t\treceivedAppContextListener: {\n\t\t\tinfo: `${value}`,\n\t\t\terror: `${value}`\n\t\t},\n\t\taddAppContextListener: {\n\t\t\tinfo: `${value}`,\n\t\t\terror: `${value}`\n\t\t},\n\t\treceivedIntentListener: {\n\t\t\tinfo: `Received context via '[${value}]' listener.`,\n\t\t\terror: `Failed to receive context from '[${value}]' listener.`,\n\t\t},\n\t\tsaveTemplate: {\n\t\t\tsuccess: `Saved context template for '[${value}]'.`,\n\t\t\terror: `Failed to save context template.`,\n\t\t},\n\t\tdeleteTemplate: {\n\t\t\tsuccess: `Deleted context template for '[${value}]'.`,\n\t\t\terror: `Failed to delete context template.`,\n\t\t},\n\t\tcopyToClipboard: {\n\t\t\tinfo: `${value} code snippet copied to clipboard`,\n\t\t\terror: `Failed to copy code ${value} snippet to clipboard.`,\n\t\t},\n\t\tgetOrCreateChannel: {\n\t\t\tsuccess: `Successfully retrieved or created current app channel [${value}]`,\n\t\t\terror: `Failed retrieve or create app channel ${value}.`,\n\t\t},\n\t};\n\n\treturn logMessages[name][type] ?? (value != \"\" ? `${value}` : `Undefined log message ${name}.${type}`);\n};\n","import { makeObservable, observable, action, runInAction } from \"mobx\";\nimport fdc3, {Channel} from \"../utility/Fdc3Api\";\nimport systemLogStore from \"./SystemLogStore\";\n\nclass ChannelStore {\n\tuserChannels: Channel[] = [];\n\n\tcurrentUserChannel: Channel | null = null;\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tuserChannels: observable,\n\t\t\tcurrentUserChannel: observable,\n\t\t\tgetUserChannels: action,\n\t\t\tjoinUserChannel: action,\n\t\t\tleaveUserChannel: action,\n\t\t\tgetCurrentUserChannel: action,\n\t\t});\n\n\t\tthis.getUserChannels();\n\t}\n\n\tasync getCurrentUserChannel() {\n\t\ttry {\n\t\t\tconst userChannel = await fdc3.getCurrentChannel();\n\t\t\trunInAction(() => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"getCurrentChannel\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tvalue: userChannel ? userChannel.id : \"none\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t\tthis.currentUserChannel = userChannel;\n\t\t\t});\n\t\t} catch (e) {\n\t\t\trunInAction(() => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"getCurrentChannel\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tasync getUserChannels() {\n\t\t//defer retrieving channels until fdc3 API is ready\n\t\tfdc3.fdc3Ready(5000).then(async () => {\n\t\t\ttry {\n\t\t\t\n\t\t\t\tconst userChannels = await fdc3.getSystemChannels();\n\t\t\t\tconst currentUserChannel = await fdc3.getCurrentChannel();\n\t\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"getChannels\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t});\n\t\t\t\t\tthis.userChannels = userChannels;\n\t\t\t\t\tthis.currentUserChannel = currentUserChannel;\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"getChannels\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\t});\n\t\t\t}\n\t\t}).catch((reason) => {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"getFdc3\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvariant: \"text\",\n\t\t\t\tvalue: reason,\n\t\t\t});\n\t\t});\n\t}\n\n\tasync joinUserChannel(channelId: string) {\n\t\ttry {\n\t\t\tawait fdc3.joinChannel(channelId);\n\t\t\tconst currentUserChannel = await fdc3.getCurrentChannel();\n\t\t\tconst isSuccess = currentUserChannel !== null;\n\n\t\t\trunInAction(() => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"joinUserChannel\",\n\t\t\t\t\ttype: isSuccess ? \"success\" : \"error\",\n\t\t\t\t\tvalue: isSuccess ? currentUserChannel?.id : channelId,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t\tthis.currentUserChannel = currentUserChannel;\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"joinUserChannel\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: channelId,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\tasync leaveUserChannel() {\n\t\ttry {\n\t\t\t//check that we're on a channel\n\t\t\tlet currentUserChannel = await fdc3.getCurrentChannel();\n\t\t\tif (!currentUserChannel) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"leaveChannel\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tawait fdc3.leaveCurrentChannel();\n\t\t\t\tcurrentUserChannel = await fdc3.getCurrentChannel();\n\t\t\t\tconst isSuccess = currentUserChannel === null;\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"leaveChannel\",\n\t\t\t\t\t\ttype: isSuccess ? \"success\" : \"error\",\n\t\t\t\t\t\tvalue: this.currentUserChannel?.id,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\n\t\t\t\t\tif (isSuccess) {\n\t\t\t\t\t\tthis.currentUserChannel = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"leaveChannel\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: this.currentUserChannel?.id,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n}\n\nconst channelStore = new ChannelStore();\n\nexport default channelStore;\n","export const codeExamples = {\n\tuserChannels:\n\t\t\"// get all user channels\\n\" +\n\t\t\"const channels = await fdc3.getUserChannels();\\n\" +\n\t\t\"\\n\" +\n\t\t\"// create UI to pick from the user channels\\n\" +\n\t\t\"\\n\" +\n\t\t\"// join the channel on selection\\n\" +\n\t\t\"fdc3.joinUserChannel(selectedChannel.id);\",\n\tgetCurrentUserChannel:\n\t\t\"// get the current channel membership\\n\" +\n\t\t\"let current = await fdc3.getCurrentChannel();\\n\" +\n\t\t\"\\n\" +\n\t\t\"//leave the current channel\\n\" +\n\t\t\"await fdc3.leaveCurrentChannel();\\n\" +\n\t\t\"//the fdc3Listener will now cease receiving context\",\n\tbroadcast:\n\t\t\"const instrument = {\\n\" +\n\t\t\"    type: 'fdc3.instrument',\\n\" +\n\t\t\"    id: {\\n\" +\n\t\t\"        ticker: 'AAPL'\\n\" +\n\t\t\"    }\\n\" +\n\t\t\"};\\n\" +\n\t\t\"\\n\" +\n\t\t\"fdc3.broadcast(instrument);\",\n\tappChannelBroadcast:\n\t\t\"const instrument = {\\n\" +\n\t\t\"    type: 'fdc3.instrument',\\n\" +\n\t\t\"    id: {\\n\" +\n\t\t\"        ticker: 'AAPL'\\n\" +\n\t\t\"    }\\n\" +\n\t\t\"};\\n\" +\n\t\t\"\\n\" +\n\t\t\"appChannelID.broadcast(instrument);\",\n\traiseIntent:\n\t\t\"//Raise an intent with a specified context\\n\" +\n\t\t'let context = {type: \"fdc3.instrument\", name: \"Tesla, inc.\", id: {ticker: \"TSLA\"}}; \\n' +\n\t\t'fdc3.raiseIntent(\"ViewChart\", context);',\n\tcontextListener:\n\t\t\"// any context\\n\" +\n\t\t\"const listener = fdc3.addContextListener(null, context => {\\n\" + \n\t\t\"    //add context handling code here\\n\" + \t\n\t\t\"});\\n\" +\n\t\t\"\\n\" +\n\t\t\"// listener for a specific type\\n\" +\n\t\t\"const contactListener = fdc3.addContextListener('fdc3.contact', contact => {\\n\" + \n\t\t\"    //add context handling code here\\n\" + \t\n\t\t\"});\",\n\tappChannelContextListener:\n\t\t\"// any context\\n\" +\n\t\t\"const listener = appChannelID.addContextListener(null, context => {\\n\" + \n\t\t\"    //add context handling code here\\n\" + \t\n\t\t\"});\\n\" +\n\t\t\"\\n\" +\n\t\t\"// listener for a specific type\\n\" +\n\t\t\"const contactListener = appChannelID.addContextListener('fdc3.contact', contact => {\\n\" + \n\t\t\"    //add context handling code here\\n\" + \t\n\t\t\"});\",\n\tintentListener:\n\t\t\"const listener = fdc3.addIntentListener('StartChat', context => {\\n\" +\n\t\t\"  // start chat has been requested by another application\\n\" +\n\t\t\"});\",\n\traiseIntentForContext: \"const intentResolution = await fdc3.raiseIntentForContext(context);\",\n};\n","import { runInAction } from \"mobx\";\nimport systemLogStore from \"../../store/SystemLogStore\";\n\nexport const copyToClipboard = (text: string, name: string) => () => {\n\tnavigator.clipboard.writeText(text);\n\trunInAction(() => {\n\t\tsystemLogStore.addLog({\n\t\t\tname: \"copyToClipboard\",\n\t\t\ttype: \"info\",\n\t\t\tvalue: name,\n\t\t\tvariant: \"text\",\n\t\t});\n\t});\n};\n","import { ContextItem } from \"../store/ContextStore\";\nimport { v4 as uuidv4 } from 'uuid';\n\nexport const contexts: ContextItem[] = [\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Contact example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.contact\",\n\t\t\tname: \"Jane Doe\",\n\t\t\tid: {\n\t\t\t\temail: \"jane.doe@mail.com\",\n\t\t\t},\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/contact.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"ContactList example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.contactList\",\n\t\t\tcontacts: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.contact\",\n\t\t\t\t\tname: \"Jane Doe\",\n\t\t\t\t\tid: {\n\t\t\t\t\t\temail: \"jane.doe@mail.com\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.contact\",\n\t\t\t\t\tname: \"John Doe\",\n\t\t\t\t\tid: {\n\t\t\t\t\t\temail: \"john.doe@mail.com\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/contactList.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Instrument example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.instrument\",\n\t\t\tname: \"Microsoft\",\n\t\t\tid: {\n\t\t\t\tticker: \"MSFT\",\n\t\t\t\tRIC: \"MSFT.OQ\",\n\t\t\t\tISIN: \"US5949181045\",\n\t\t\t},\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/instrument.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"InstrumentList example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.instrumentList\",\n\t\t\tinstruments: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\t\tid: {\n\t\t\t\t\t\tticker: \"AAPL\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\t\tid: {\n\t\t\t\t\t\tticker: \"MSFT\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/instrumentList.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Organization example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.organization\",\n\t\t\tname: \"Cargill, Incorporated\",\n\t\t\tid: {\n\t\t\t\tLEI: \"QXZYQNMR4JZ5RIRN4T31\",\n\t\t\t\tFDS_ID: \"00161G-E\",\n\t\t\t},\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/organization.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Country example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.country\",\n\t\t\tname: \"Sweden\",\n\t\t\tid: {\n\t\t\t\tISOALPHA3: \"SWE\",\n\t\t\t},\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/country.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Position example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.position\",\n\t\t\tinstrument: {\n\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\tid: {\n\t\t\t\t\tticker: \"AAPL\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tholding: 2000000,\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/position.schema.json\"),\n\t},\n\t{\n\t\tuuid: uuidv4(),\n\t\tid: \"Portfolio example\",\n\t\ttemplate: {\n\t\t\ttype: \"fdc3.portfolio\",\n\t\t\tpositions: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.position\",\n\t\t\t\t\tinstrument: {\n\t\t\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\tticker: \"AAPL\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tholding: 2000000,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.position\",\n\t\t\t\t\tinstrument: {\n\t\t\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\tticker: \"MSFT\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tholding: 1500000,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"fdc3.position\",\n\t\t\t\t\tinstrument: {\n\t\t\t\t\t\ttype: \"fdc3.instrument\",\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\tticker: \"IBM\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tholding: 3000000,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/portfolio.schema.json\"),\n\t},\n];\n","import { makeObservable, observable, runInAction, action, toJS } from \"mobx\";\nimport fdc3, {ContextType, Fdc3Listener} from \"../utility/Fdc3Api\";\nimport { nanoid } from \"nanoid\";\nimport { contexts } from \"../fixtures/contexts\";\nimport systemLogStore from \"./SystemLogStore\";\nimport { v4 as uuidv4 } from 'uuid';\n\nexport type ContextItem = {\n\tid: string;\n\tuuid?: string; //used to determine if a duplicate id is for the same object or not\n\ttemplate: ContextType | null;\n\tschemaUrl?: URL;\n};\n\nclass ContextStore {\n\tcontextsList: ContextItem[] = contexts;\n\n\tcurrentContext: ContextType | null = null;\n\n\tcontextListeners: Fdc3Listener[] = [];\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tcontextsList: observable,\n\t\t\tcurrentContext: observable,\n\t\t\tcontextListeners: observable,\n\t\t\tsetContext: action,\n\t\t\tdeleteContextItem: action,\n\t\t\tbroadcast: action,\n\t\t\taddContextItem: action,\n\t\t\tsaveContextItem: action,\n\t\t\taddContextListener: action,\n\t\t\tremoveContextListener: action,\n\t\t});\n\t\tconst localStorageContextList = localStorage.getItem(\"contextList\");\n\t\tlet usingDefaultContexts = true;\n\t\ttry {\n\t\t\tif(localStorageContextList)\n\t\t\t{\n\t\t\t\tconst parsedListFromStorage = JSON.parse(localStorageContextList);\n\t\t\t\tif (Array.isArray(parsedListFromStorage)){\n\t\t\t\t\tthis.contextsList = parsedListFromStorage;\n\t\t\t\t\tusingDefaultContexts = false;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err){\n\t\t\tconsole.log(\"Failed to parse context list from localstorage\");\n\t\t}\n\t\tif (usingDefaultContexts) {\n\t\t\tthis.updateLocalStorage(JSON.stringify(contexts));\n\t\t}\n\t}\n\n\taddContextItem(contextItem: ContextItem) {\n\t\tcontextItem.uuid = uuidv4();\n\t\tthis.contextsList.push(contextItem);\n\t\tthis.contextsList.sort((a, b) => a.id.localeCompare(b.id));\n\t\tthis.updateLocalStorage(this.contextsList);\n\t}\n\n\tsaveContextItem(contextItem: ContextItem, selectedId?: string) {\n\t\tconst context = this.contextsList.find(({ id }) => id === selectedId || id === contextItem.id);\n\t\tif (context) {\n\t\t\tObject.keys(contextItem).forEach((key:any) => (context[key as keyof ContextItem] as any) = contextItem[key as keyof ContextItem]);\n\t\t}\n\t\tthis.updateLocalStorage(this.contextsList);\n\t}\n\n\tsetContext(context: ContextType) {\n\t\tthis.currentContext = context;\n\t}\n\n\tdeleteContextItem(contextItem: ContextItem) {\n\t\tthis.contextsList = this.contextsList.filter((c) => c != contextItem)\n\t\tthis.updateLocalStorage(this.contextsList);\n\t}\n\n\tresetContextList() {\n\t\tthis.contextsList = contexts\n\t\tthis.updateLocalStorage(this.contextsList);\n\t}\n\n\tupdateLocalStorage(data: any) {\n\t\tlocalStorage.setItem('contextList', JSON.stringify(data))\n\t}\n\n\tasync broadcast(context: ContextType) {\n\t\tif (!context) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"broadcast\",\n\t\t\t\ttype: \"warning\",\n\t\t\t\tvalue: \"You must set a context before you can broadcast it\",\n\t\t\t\tvariant: \"text\",\n\t\t\t});\n\t\t\treturn;\n\t\t} else {\n\t\t\t//check that we're on a channel\n\t\t\tlet currentChannel = await fdc3.getCurrentChannel();\n\t\t\tif (!currentChannel) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"broadcast\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\tvalue: \"You are not currently joined to a channel (no-op)\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tawait fdc3.broadcast(toJS(context));\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"broadcast\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tbody: JSON.stringify(context, null, 4),\n\t\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"broadcast\",\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync addContextListener(contextType: string | undefined) {\n\t\ttry {\n\t\t\tif( typeof contextType === \"string\") {\n\t\t\t\tconst listenerId = nanoid();\n\n\t\t\t// TODO: remove window after fixing https://github.com/finos/FDC3/issues/435\n\t\t\tconst contactListener = await fdc3.addContextListener(contextType.toLowerCase() === \"all\" ? \"null\" : contextType, (context: ContextType, metaData?: any) => {\n\t\t\t\tconst currentListener = this.contextListeners.find(({ id }) => id === listenerId);\n\t\t\t\t\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tif (currentListener) {\n\t\t\t\t\t\tcurrentListener.lastReceivedContext = context;\n\t\t\t\t\t\tcurrentListener.metaData = metaData;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"receivedContextListener\",\n\t\t\t\t\t\ttype: \"info\",\n\t\t\t\t\t\tvalue: contextType,\n\t\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\t\tbody: JSON.stringify(context, null, 4),\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"addContextListener\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tvalue: contextType,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\t\t\t\t\tthis.contextListeners.push({ id: listenerId, type: contextType, listener: contactListener });\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"addContextListener\",\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\tvalue: contextType,\n\t\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"addContextListener\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: contextType,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\tasync removeContextListener(id: string) {\n\t\tconst listenerIndex = this.contextListeners.findIndex((listener) => listener.id === id);\n\n\t\tif (listenerIndex !== -1) {\n\t\t\ttry {\n\t\t\t\t(await this.contextListeners[listenerIndex].listener).unsubscribe();\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"removeContextListener\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tvalue: this.contextListeners[listenerIndex].type,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\t\t\t\t\tthis.contextListeners.splice(listenerIndex, 1);\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"removeContextListener\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvalue: this.contextListeners[listenerIndex].type,\n\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tisContextListenerExists(type: string | undefined) {\n\t\treturn !!this.contextListeners.find((listener) => listener.type === type);\n\t}\n}\n\nconst contextStore = new ContextStore();\n\nexport default contextStore;\n","import { withStyles } from \"@material-ui/core/styles\";\nimport { TextField } from \"@material-ui/core\";\n\nexport const TemplateTextField = withStyles({\n\troot: {\n\t\t\"& label.Mui-focused\": {\n\t\t\tcolor: \"#0086bf\",\n\t\t},\n\t\t\"& .MuiInput-underline:after\": {\n\t\t\tborderBottomColor: \"#0086bf\",\n\t\t},\n\t\t\"& .MuiOutlinedInput-root\": {\n\t\t\t\"& fieldset\": {\n\t\t\t\tborderColor: \"#0086bf\",\n\t\t\t},\n\t\t\t\"&:hover fieldset\": {\n\t\t\t\tborderColor: \"#0086bf\",\n\t\t\t},\n\t\t\t\"&.Mui-focused fieldset\": {\n\t\t\t\tborderColor: \"#0086bf\",\n\t\t\t},\n\t\t},\n\t},\n})(TextField);\n","import React, { FormEvent, useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Typography, Grid, Button, IconButton, Tooltip } from \"@material-ui/core\";\nimport { codeExamples } from \"../fixtures/codeExamples\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport Autocomplete, { createFilterOptions } from \"@material-ui/lab/Autocomplete\";\nimport contextStore from \"../store/ContextStore\";\nimport { TemplateTextField } from \"./common/TemplateTextField\";\nimport { copyToClipboard } from \"./common/CopyToClipboard\";\n\n// interface copied from lib @material-ui/lab/Autocomplete\ninterface FilterOptionsState<T> {\n\tinputValue: string;\n\tgetOptionLabel: (option: T) => string;\n}\n\ninterface ListenerOptionType {\n\ttitle: string;\n\tvalue: string;\n\ttype: string | undefined;\n}\n\ntype ListenerSetValue = (value: ListenerOptionType | null) => void;\n\ntype ListenerSetError = (error: string | false) => void;\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\tmarginTop: theme.spacing(1),\n\t\t\t\"& > *\": {\n\t\t\t\tmarginRight: 0,\n\t\t\t},\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t\tmarginLeft: theme.spacing(1),\n\t\t\t},\n\t\t},\n\t\tspread: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t\tcontextListenerName: {\n\t\t\tflexGrow: 1,\n\t\t\tmarginRight: theme.spacing(1),\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\trightAlign: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t})\n);\n\nconst listenerFilter = createFilterOptions<ListenerOptionType>();\n\nexport const ContextLinking = observer(() => {\n\tconst classes = useStyles();\n\tconst [contextListener, setContextListener] = useState<ListenerOptionType | null>(null);\n\tconst [contextError, setContextError] = useState<string | false>(false);\n\tconst contextListenersOptionsAll: ListenerOptionType[] = contextStore.contextsList.map(({ id, template }) => {\n\t\treturn {\n\t\t\ttitle: id,\n\t\t\tvalue: id,\n\t\t\ttype: template?.type\n\t\t};\n\t});\n\tcontextListenersOptionsAll.unshift({\n\t\ttitle: \"All\",\n\t\tvalue: \"all\",\n\t\ttype: \"All\"\n\t});\n\n\tconst contextListenersOptions = Array.from(new Map(contextListenersOptionsAll.reverse().map((item) => [item[\"type\"], item])).values()).reverse();\n\n\tconst handleChangeListener =\n\t\t(setValue: ListenerSetValue, setError: ListenerSetError) => (event: React.ChangeEvent<{}>, newValue: any) => {\n\t\t\tif (typeof newValue === \"string\") {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue,\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t\ttype: newValue\n\t\t\t\t});\n\t\t\t} else if (newValue && newValue.inputValue) {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue.inputValue,\n\t\t\t\t\tvalue: newValue.inputValue,\n\t\t\t\t\ttype: newValue.inputValue\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetValue(newValue);\n\t\t\t}\n\n\t\t\tsetError(false);\n\t\t};\n\n\tconst getOptionLabel = (option: ListenerOptionType) => {\n\t\tif (option.type) {\n\t\t\treturn option.type;\n\t\t}\n\t\treturn option.title;\n\t};\n\n\tconst filterOptions = (options: ListenerOptionType[], params: FilterOptionsState<ListenerOptionType>) => {\n\t\tconst filtered = listenerFilter(options, params);\n\n\t\tif (params.inputValue !== \"\") {\n\t\t\tfiltered.push({\n\t\t\t\tvalue: params.inputValue,\n\t\t\t\ttitle: `Add \"${params.inputValue}\"`,\n\t\t\t\ttype: params.inputValue\n\t\t\t});\n\t\t}\n\n\t\treturn filtered;\n\t};\n\n\tconst handleAddContextListener = (e: FormEvent | null = null) => {\n\t\te?.preventDefault();\n\t\tif (contextListener) {\n\t\t\tif (contextStore.isContextListenerExists(contextListener.type)) {\n\t\t\t\tsetContextError(\"Listener already added\");\n\t\t\t} else {\n\t\t\t\tcontextStore.addContextListener(contextListener.type);\n\t\t\t\tsetContextListener(null);\n\t\t\t}\n\t\t} else {\n\t\t\tsetContextError(\"Enter context type\");\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Add Context Listener</Typography>\n\t\t\t</Grid>\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\" onSubmit={(e) => handleAddContextListener(e)}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tspacing={1}\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\tclassName={`${classes.controls} ${classes.rightAlign}`}\n\t\t\t\t>\n\t\t\t\t\t<Grid item className={classes.contextListenerName}>\n\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\tid=\"context-listener\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tselectOnFocus\n\t\t\t\t\t\t\tblurOnSelect\n\t\t\t\t\t\t\tclearOnBlur\n\t\t\t\t\t\t\thandleHomeEndKeys\n\t\t\t\t\t\t\tvalue={contextListener}\n\t\t\t\t\t\t\tonChange={handleChangeListener(setContextListener, setContextError)}\n\t\t\t\t\t\t\tfilterOptions={filterOptions}\n\t\t\t\t\t\t\toptions={contextListenersOptions}\n\t\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\t\trenderOption={(option) => option.type}\n\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\t\tlabel=\"CONTEXT TYPE\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter Context Type\"\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\terror={!!contextError}\n\t\t\t\t\t\t\t\t\thelperText={contextError}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleAddContextListener}>\n\t\t\t\t\t\t\tAdd Listener\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.contextListener, \"addContextListener\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t</div>\n\t);\n});\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Grid } from \"@material-ui/core\";\nimport Autocomplete, { createFilterOptions } from \"@material-ui/lab/Autocomplete\";\nimport contextStore from \"../store/ContextStore\";\nimport { TemplateTextField } from \"./common/TemplateTextField\";\n\ninterface FilterOptionsState<T> {\n\tinputValue: string;\n\tgetOptionLabel: (option: T) => string;\n}\n\ninterface OptionType {\n\ttitle: string;\n\tvalue: string;\n}\n\ntype SetValue = (value: OptionType | null) => void;\n\ntype SetError = (error: string | false) => void;\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\t\"& > *\": {\n\t\t\t\tmarginRight: 0,\n\t\t\t},\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t\tmarginLeft: theme.spacing(1),\n\t\t\t},\n\t\t},\n\t\tcontextName: {\n\t\t\tflexGrow: 1,\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\trightAlign: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t\tlink: {\n\t\t\tcursor: \"pointer\",\n\t\t\tcolor: \"black\"\n\t\t}\n\t})\n);\n\nconst contextFilter = createFilterOptions<OptionType>();\n\nexport const ContextTemplates = observer(({handleTabChange, contextStateSetter, channel} : {handleTabChange:any, contextStateSetter:any, channel?: any}) => {\t\n\tconst classes = useStyles();\n\tconst [context, setContext] = useState<OptionType | null>(null);\n\tconst [contextError, setContextError] = useState<string | false>(false);\n\tconst contextsOptions: OptionType[] = contextStore.contextsList.map(({ id }) => {\n\t\treturn {\n\t\t\ttitle: id,\n\t\t\tvalue: id,\n\t\t};\n\t});\n\tconst isInitialMount = useRef(true);\n\n\tconst handleChange =\n\t\t(setValue: SetValue, setError: SetError) => (event: React.ChangeEvent<{}>, newValue: any) => {\n\t\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === newValue?.value);\n\t\t\tif (selectedContext) contextStateSetter(selectedContext.template, channel)\n\n\t\t\tif (typeof newValue === \"string\") {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue,\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t});\n\t\t\t} else if (newValue && newValue.inputValue) {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue.inputValue,\n\t\t\t\t\tvalue: newValue.inputValue,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetValue(newValue);\n\t\t\t}\n\n\t\t\tsetError(false);\n\t\t};\n\n\tconst getOptionLabel = (option: OptionType) => option.value || option.title;\n\n\tconst filterOptions = (options: OptionType[], params: FilterOptionsState<OptionType>) => {\n\t\tconst filtered = contextFilter(options, params);\n\n\t\tif (params.inputValue !== \"\") {\n\t\t\tfiltered.push({\n\t\t\t\tvalue: params.inputValue,\n\t\t\t\ttitle: `Add \"${params.inputValue}\"`,\n\t\t\t});\n\t\t}\n\n\t\treturn filtered;\n\t};\n\n\tuseEffect(() => {\n\t\tif (isInitialMount.current) {\n\t\t\tisInitialMount.current = false;\n\t\t } else {\n\t\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === context?.value);\n\t\t\tif(!selectedContext) handleTabChange(null, 0, context?.value);\n\t\t }\n\t}, [context])\n\t\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection=\"row\"\n\t\t\t\tspacing={1}\n\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\tclassName={`${classes.controls} ${classes.rightAlign}`}\n\t\t\t>\n\t\t\t\t<Grid item className={classes.contextName}>\n\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\tid=\"context-\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tselectOnFocus\n\t\t\t\t\t\tblurOnSelect\n\t\t\t\t\t\tclearOnBlur\n\t\t\t\t\t\thandleHomeEndKeys\n\t\t\t\t\t\tvalue={context}\n\t\t\t\t\t\tonChange={handleChange(setContext, setContextError)}\n\t\t\t\t\t\tgetOptionSelected={(option, value) => option.value === value.value}\n\t\t\t\t\t\tfilterOptions={filterOptions}\n\t\t\t\t\t\toptions={contextsOptions}\n\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\trenderOption={(option) => option.title}\n\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\tlabel=\"CONTEXT \"\n\t\t\t\t\t\t\t\tplaceholder=\"Enter Context Type\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\terror={!!contextError}\n\t\t\t\t\t\t\t\thelperText={contextError}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</div>\n\t);\n});\n","import React, { useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport {\n\tTypography,\n\tButton,\n\tFormControl,\n\tInputLabel,\n\tSelect,\n\tMenuItem,\n\tFormHelperText,\n\tIconButton,\n\tTooltip,\n\tGrid,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport channelStore from \"../store/ChannelStore\";\nimport { codeExamples } from \"../fixtures/codeExamples\";\nimport { copyToClipboard } from \"./common/CopyToClipboard\";\nimport { ContextLinking } from \"./ContextLinking\";\nimport contextStore from \"../store/ContextStore\";\nimport { ContextTemplates } from \"./ContextTemplates\";\nimport { ContextType } from \"../utility/Fdc3Api\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\talignItems: \"center\",\n\t\t\tmarginTop: theme.spacing(1),\n\t\t\t\"& > *\": {\n\t\t\t\tmargin: theme.spacing(1),\n\t\t\t},\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t\tpaddingLeft: 0,\n\t\t\t},\n\t\t\t\"& > * > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t\tpaddingLeft: 0,\n\t\t\t},\n\t\t},\n\t\tchannelsSelect: {\n\t\t\twidth: \"100%\",\n\t\t\tmarginRight: theme.spacing(1),\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t},\n\t\tborder: {\n\t\t\theight: \"1px\",\n\t\t\twidth: \"100%\",\n\t\t\tbackgroundColor: \"#acb2c0\",\n\t\t\tmarginTop: \"24px\",\n\t\t\tmarginBottom: \"16px\",\n\t\t},\n\t\tcenterChildren: {\n\t\t\tdisplay: \"flex\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t})\n);\n\nexport const Channels = observer(({handleTabChange} : {handleTabChange:any}) => {\n\tconst classes = useStyles();\n\tconst [channelId, setChannelId] = useState<string>(\"\");\n\tconst [isError, setIsError] = useState<boolean>(false);\n\tconst [broadcastContext, setBroadcastContext] = useState<ContextType | null>(null)\n\n\tconst handleSelectChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n\t\tsetChannelId(event.target.value as string);\n\t\tsetIsError(false);\n\t};\n\n\tconst handleJoinUserChannel = () => {\n\t\tif (channelId) {\n\t\t\tchannelStore.joinUserChannel(channelId);\n\t\t\tsetChannelId(\"\");\n\t\t} else {\n\t\t\tsetIsError(true);\n\t\t}\n\t};\n\n\tconst handleLeaveUserChannel = () => {\n\t\tchannelStore.leaveUserChannel();\n\t};\n\n\tconst handleRefreshUserChannel = () => {\n\t\tchannelStore.getCurrentUserChannel();\n\t};\n\n\tconst handleBroadcast = () => {\n\t\tif(broadcastContext) contextStore.broadcast(broadcastContext);\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Current Channel</Typography>\n\t\t\t</Grid>\n\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\">\n\t\t\t\t<Grid container direction=\"row\" spacing={1}>\n\t\t\t\t\t<Grid item xs={12} sm={5}>\n\t\t\t\t\t\t<Typography variant=\"body1\">{channelStore.currentUserChannel?.id ?? \"None\"}</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} sm={7}>\n\t\t\t\t\t\t<Grid container direction=\"row\" justifyContent=\"flex-end\" spacing={1}>\n\t\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleRefreshUserChannel}>\n\t\t\t\t\t\t\t\t\tRefresh\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleLeaveUserChannel}>\n\t\t\t\t\t\t\t\t\tLeave\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.getCurrentUserChannel, \"getCurrentUserChannel\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\n\t\t\t<div className={classes.border}></div>\n\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Join User Channels</Typography>\n\t\t\t</Grid>\n\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\">\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={12} sm={9}>\n\t\t\t\t\t\t<FormControl variant=\"outlined\" className={classes.channelsSelect} size=\"small\" error={isError}>\n\t\t\t\t\t\t\t<InputLabel id=\"channel\">Channel</InputLabel>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tlabelId=\"channel\"\n\t\t\t\t\t\t\t\tid=\"channel-select\"\n\t\t\t\t\t\t\t\tvalue={channelId ?? \"\"}\n\t\t\t\t\t\t\t\tonChange={handleSelectChange}\n\t\t\t\t\t\t\t\tlabel=\"User Channel\"\n\t\t\t\t\t\t\t\tMenuProps={{\n\t\t\t\t\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttransformOrigin: {\n\t\t\t\t\t\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tgetContentAnchorEl: null,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!channelStore.userChannels.length && (\n\t\t\t\t\t\t\t\t\t<MenuItem value=\"\" disabled>\n\t\t\t\t\t\t\t\t\t\tNo channels received\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{channelStore.userChannels.length && <MenuItem value=\"\" style={{ height: \"0\", padding: \"0\" }} />}\n\t\t\t\t\t\t\t\t{channelStore.userChannels.length &&\n\t\t\t\t\t\t\t\t\tchannelStore.userChannels.map(({ id }) => (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={id} value={id}>\n\t\t\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t{isError && <FormHelperText>Select channel from list</FormHelperText>}\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} sm={3} className={classes.centerChildren}>\n\t\t\t\t\t\t<Grid container direction=\"row\" justifyContent=\"flex-end\" spacing={1}>\n\t\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleJoinUserChannel}>\n\t\t\t\t\t\t\t\t\tJoin\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.userChannels, \"joinUserChannel\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\n\t\t\t<div className={classes.border}></div>\n\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Broadcast context</Typography>\n\t\t\t</Grid>\n\n\t\t\t<Grid container direction=\"row\" spacing={1}>\n\t\t\t\t\t<Grid item sm={9}>\n\t\t\t\t\t\t<ContextTemplates handleTabChange={handleTabChange} contextStateSetter={setBroadcastContext} />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item sm={3} className={classes.centerChildren}>\n\t\t\t\t\t\t<Grid container direction=\"row\" justifyContent=\"flex-end\" spacing={1}>\n\t\t\t\t\t\t\t<Grid item className={classes.controls} >\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tdisabled={!broadcastContext}\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={handleBroadcast}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tBroadcast Context\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item className={classes.controls} >\n\t\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.broadcast, \"broadcast\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\t\t\t\t\n\t\t\t\t\t<div className={classes.border}></div>\n\n\t\t\t\t\t<ContextLinking />\n\t\t\t\t</Grid>\n\t\t</div>\n\t);\n});\n","import React from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Accordion, AccordionDetails, AccordionSummary, Typography } from \"@material-ui/core\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport { Tooltip } from \"@material-ui/core\";\nimport InfoIcon from '@material-ui/icons/Info';\n\nexport interface AccordionContentProps {\n\ttitle: string;\n\tchildren: React.ReactNode;\n\ticon?: string;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\taccordion: {\n\t\t\tmargin: theme.spacing(1, 0, 0, 0),\n\t\t\tboxShadow: \"none\",\n\t\t\t\"&::before\": {\n\t\t\t\tdisplay: \"none\",\n\t\t\t},\n\t\t\t\"&.Mui-expanded\": {\n\t\t\t\tmargin: theme.spacing(1, 0, 0, 0),\n\t\t\t},\n\t\t},\n\t\taccordionSummary: {\n\t\t\tborder: \"none\",\n\t\t\tpadding: 0,\n\t\t\tminHeight: \"initial\",\n\t\t\t\"&.Mui-expanded\": {\n\t\t\t\tminHeight: \"initial\",\n\t\t\t},\n\t\t\t\"& .MuiAccordionSummary-content\": {\n\t\t\t\tmargin: \"0 12px 0 0\",\n\t\t\t\t\"&.Mui-expanded\": {\n\t\t\t\t\tmargin: \"0 12px 0 0\",\n\t\t\t\t},\n\t\t\t},\n\t\t\t\"& .MuiAccordionSummary-expandIcon\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t},\n\t\taccordionDetails: {\n\t\t\tpaddingTop: 0,\n\t\t\tpaddingLeft: 0,\n\t\t\tflexDirection: \"column\",\n\t\t},\n\t\taccordionTitle: {\n\t\t\tcolor: \"#0086bf\",\n\t\t\tfontSize: \"16px\",\n\t\t},\n\t\texpand_icon: {\n\t\t\tcolor: \"#0086bf\",\n\t\t},\n\t\ticon: {\n\t\t\tmarginBottom: \"-1px !important\",\n\t\t\tfontSize: \"15px\",\n\t\t\tmarginLeft: \"5px\"\n\t\t}\n\t})\n);\n\nexport const AccordionContent: React.FC<AccordionContentProps> = ({ icon, title, children }: AccordionContentProps) => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Accordion className={classes.accordion} defaultExpanded>\n\t\t\t<AccordionSummary\n\t\t\t\tclassName={classes.accordionSummary}\n\t\t\t\texpandIcon={<ExpandMoreIcon className={classes.expand_icon} />}\n\t\t\t\taria-label=\"Expand\"\n\t\t\t\taria-controls=\"additional-actions1-content\"\n\t\t\t\tid=\"additional-actions1-header\"\n\t\t\t>\n\t\t\t\t<Typography variant=\"h5\" className={classes.accordionTitle}>\n\t\t\t\t\t{title}\n\t\t\t\t\t{icon && <Tooltip title={icon} aria-label={icon}>\n\t\t\t\t\t\t<InfoIcon className={classes.icon}/>\n\t\t\t\t\t</Tooltip>}\n\t\t\t\t</Typography>\n\t\t\t</AccordionSummary>\n\n\t\t\t<AccordionDetails className={classes.accordionDetails}>{children}</AccordionDetails>\n\t\t</Accordion>\n\t);\n};\n","import React from \"react\";\nimport { List, ListItem, ListItemText, Typography, ListItemSecondaryAction, IconButton } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { AccordionContent } from \"./AccordionContent\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nexport interface AccordionListItem {\n\tid: string;\n\ttextPrimary: string;\n\tafterEachElement?: React.ReactNode;\n}\n\nexport interface AccordionListProps {\n\ttitle: string;\n\ticon?: string;\n\tlistItems: AccordionListItem[];\n\tnoItemsText: string;\n\tonDelete?: (id: string) => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tlist: {\n\t\t\tpadding: 0,\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tlistItem: {\n\t\t\tpadding: 0,\n\t\t\t\"&.MuiListItem-secondaryAction\": {\n\t\t\t\tpaddingRight: theme.spacing(6),\n\t\t\t},\n\t\t},\n\t\tlistAction: {\n\t\t\ttop: \"2px\",\n\t\t\ttransform: \"none\",\n\t\t},\n\t})\n);\n\nexport const AccordionList: React.FC<AccordionListProps> = ({\n\ttitle,\n\ticon,\n\tlistItems,\n\tnoItemsText,\n\tonDelete,\n}: AccordionListProps) => {\n\tconst classes = useStyles();\n\n\tconst handleDelete = (id: string) => () => {\n\t\tif (onDelete) {\n\t\t\tonDelete(id);\n\t\t}\n\t};\n\n\treturn (\n\t\t<AccordionContent title={title} icon={icon}>\n\t\t\t{!listItems.length && <Typography variant=\"body1\">{noItemsText}</Typography>}\n\t\t\t{!!listItems.length && (\n\t\t\t\t<List className={classes.list}>\n\t\t\t\t\t{listItems.map(({ id, textPrimary, afterEachElement }) => (\n\t\t\t\t\t\t<ListItem key={id} className={classes.listItem} disableGutters>\n\t\t\t\t\t\t\t<ListItemText disableTypography primary={textPrimary} secondary={afterEachElement} />\n\t\t\t\t\t\t\t<ListItemSecondaryAction className={classes.listAction}>\n\t\t\t\t\t\t\t\t{onDelete && (\n\t\t\t\t\t\t\t\t\t<IconButton size=\"small\" edge=\"end\" aria-label=\"delete\" onClick={handleDelete(id)}>\n\t\t\t\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t))}\n\t\t\t\t</List>\n\t\t\t)}\n\t\t</AccordionContent>\n\t);\n};\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { TextField } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttextField: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tinput: {\n\t\t\tfontSize: \"14px\",\n\t\t},\n\t})\n);\n\nexport const ReceivedField = observer((metaData: any) => {\n\tconst classes = useStyles();\n\n    const formattedData = metaData ? 'METADATA NOT PROVIDED' : `appId: ${metaData.appId}\\ninstanceId: ${metaData.instanceId}`;\n\n\treturn (\n\t\t<TextField\n            disabled\n            label={\"RECEIVED FROM\"}\n            className={classes.textField}\n            InputLabelProps={{\n                shrink: true,\n            }}\n            contentEditable={false}\n            fullWidth\n            multiline\n            variant=\"outlined\"\n            size=\"small\"\n            value={formattedData}\n            InputProps={{\n                classes: {\n                    input: classes.input,\n                },\n            }}\n        />\n\t);\n});\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport contextStore from \"../../store/ContextStore\";\nimport { AccordionList, AccordionListItem } from \"../common/AccordionList\";\nimport { TextField } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { ReceivedField } from \"./ReceivedField\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttextField: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tinput: {\n\t\t\tfontSize: \"14px\",\n\t\t},\n\t})\n);\n\nexport const ContextListeners = observer(() => {\n\tconst classes = useStyles();\n\tconst contextListeners: AccordionListItem[] = contextStore.contextListeners.map(\n\t\t({ id, type, lastReceivedContext, metaData }) => {\n\t\t\tconst receivedContextListenerValue = lastReceivedContext ? JSON.stringify(lastReceivedContext, undefined, 4) : \"\";\n\n\t\t\tconst contextField = (\n\t\t\t\t<div>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\tlabel={\"LAST RECEIVED CONTEXT\"}\n\t\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tvalue={receivedContextListenerValue}\n\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\t\tinput: classes.input,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t{window.fdc3Version === '2.0' && <ReceivedField metaData={metaData} />}\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\treturn { id, textPrimary: `${type}`, afterEachElement: contextField };\n\t\t}\n\t);\n\n\tconst handleDeleteListener = (id: string) => {\n\t\tcontextStore.removeContextListener(id);\n\t};\n\n\treturn (\n\t\t<AccordionList\n\t\t\ttitle=\"System Channels\"\n\t\t\ticon=\"Any context already in the channel will be received automatically\"\n\t\t\tnoItemsText=\"No System Channels Listeners\"\n\t\t\tlistItems={contextListeners}\n\t\t\tonDelete={handleDeleteListener}\n\t\t/>\n\t);\n});\n","export const intentTypes: Array<{ title: string; value: string }> = [\n\t{\n\t\ttitle: \"StartCall\",\n\t\tvalue: \"StartCall\",\n\t},\n\t{\n\t\ttitle: \"StartChat\",\n\t\tvalue: \"StartChat\",\n\t},\n\t{\n\t\ttitle: \"ViewChart\",\n\t\tvalue: \"ViewChart\",\n\t},\n\t{\n\t\ttitle: \"ViewContact\",\n\t\tvalue: \"ViewContact\",\n\t},\n\t{\n\t\ttitle: \"ViewQuote\",\n\t\tvalue: \"ViewQuote\",\n\t},\n\t{\n\t\ttitle: \"ViewNews\",\n\t\tvalue: \"ViewNews\",\n\t},\n\t{\n\t\ttitle: \"ViewAnalysis\",\n\t\tvalue: \"ViewAnalysis\",\n\t},\n\t{\n\t\ttitle: \"ViewInstrument\",\n\t\tvalue: \"ViewInstrument\",\n\t},\n];\n","import { makeObservable, observable, action, runInAction, toJS } from \"mobx\";\nimport fdc3, {ContextType, IntentResolution, Fdc3Listener, TargetApp, AppMetadata, AppIdentifier} from \"../utility/Fdc3Api\";\nimport { nanoid } from \"nanoid\";\nimport { intentTypes } from \"../fixtures/intentTypes\";\nimport systemLogStore from \"./SystemLogStore\";\n\ntype IntentItem = { title: string; value: string };\n\nclass IntentStore {\n\tintentsList: IntentItem[] = intentTypes;\n\n\tintentListeners: Fdc3Listener[] = [];\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tintentsList: observable,\n\t\t\tintentListeners: observable,\n\t\t\traiseIntent: action,\n\t\t\taddIntentListener: action,\n\t\t\tremoveIntentListener: action,\n\t\t\traiseIntentForContext: action,\n\t\t});\n\t}\n\n\tasync addIntentListener(intent: string) {\n\t\ttry {\n\t\t\tconst listenerId = nanoid();\n\n\t\t\tconst intentListener = await fdc3.addIntentListener(intent, (context: ContextType, metaData?: any) => {\n\t\t\t\tconst currentListener = this.intentListeners.find(({ id }) => id === listenerId);\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tif (currentListener) {\n\t\t\t\t\t\tcurrentListener.lastReceivedContext = context;\n\t\t\t\t\t\tcurrentListener.metaData = metaData;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"receivedIntentListener\",\n\t\t\t\t\ttype: \"info\",\n\t\t\t\t\tvalue: intent,\n\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\tbody: JSON.stringify(context, null, 4),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\trunInAction(() => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"addIntentListener\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tvalue: intent,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t\tthis.intentListeners.push({ id: listenerId, type: intent, listener: intentListener });\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"addIntentListener\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: intent,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\tasync removeIntentListener(id: string) {\n\t\tconst listenerIndex = this.intentListeners.findIndex((listener) => listener.id === id);\n\n\t\tif (listenerIndex !== -1) {\n\t\t\ttry {\n\t\t\t\t(await this.intentListeners[listenerIndex].listener).unsubscribe();\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"removeIntentListener\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tvalue: this.intentListeners[listenerIndex].type,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\t\t\t\t\tthis.intentListeners.splice(listenerIndex, 1);\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"removeIntentListener\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvalue: this.intentListeners[listenerIndex].type,\n\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tasync raiseIntent(intent: string, context: ContextType, app?: AppMetadata ) {\n\t\tif (!context) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntent\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: intent,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tlet resolution: IntentResolution;\n\n\t\t\tif (app) {\n\t\t\t\tresolution = await fdc3.raiseIntent(intent, toJS(context), app);\n\t\t\t} else {\n\t\t\t\tresolution = await fdc3.raiseIntent(intent, toJS(context));\n\t\t\t}\n\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntent\",\n\t\t\t\ttype: \"success\",\n\t\t\t\tvalue: intent,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(resolution, null, 4),\n\t\t\t});\n\n\t\t\treturn resolution;\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntent\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: intent,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n\tasync raiseIntentForContext(context: ContextType, app?:(TargetApp & (String | AppIdentifier)) | undefined ) {\n\t\tif (!context) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntentForContext\",\n\t\t\t\ttype: \"error\",\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tif (app) {\n\t\t\t\tawait fdc3.raiseIntentForContext(toJS(context), app);\n\t\t\t} else {\n\t\t\t\tawait fdc3.raiseIntentForContext(toJS(context));\n\t\t\t}\n\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntentForContext\",\n\t\t\t\ttype: \"success\",\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"raiseIntentForContext\",\n\t\t\t\ttype: \"error\",\n\t\t\t});\n\t\t}\n\t}\n}\n\nconst intentStore = new IntentStore();\n\nexport default intentStore;\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport intentStore from \"../../store/IntentStore\";\nimport { AccordionList, AccordionListItem } from \"../common/AccordionList\";\nimport { TextField } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { ReceivedField } from \"./ReceivedField\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttextField: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tinput: {\n\t\t\tfontSize: \"14px\",\n\t\t\tcolor: \"rgba(0, 0, 0, 0.6)\",\n\t\t},\n\t\t\"& .Mui-disabled\": {\n\t\t\tborderColor: theme.palette.text.primary,\n\t\t},\n\t})\n);\n\nexport const IntentListeners = observer(() => {\n\tconst classes = useStyles();\n\tconst intentListeners: AccordionListItem[] = intentStore.intentListeners.map(({ id, type, lastReceivedContext, metaData }) => {\n\t\tconst receivedContextListenerValue = lastReceivedContext ? JSON.stringify(lastReceivedContext, undefined, 4) : \"\";\n\n\t\tconst contextField = (\n\t\t\t<div>\n\t\t\t\t<TextField\n\t\t\t\t\tdisabled\n\t\t\t\t\tlabel={\"LAST RECEIVED CONTEXT\"}\n\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t}}\n\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\tfullWidth\n\t\t\t\t\tmultiline\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={receivedContextListenerValue}\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\tinput: classes.input,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t{window.fdc3Version === '2.0' && <ReceivedField metaData={metaData} />}\n\t\t\t</div>\n\t\t);\n\n\t\treturn { id, textPrimary: `${type}`, afterEachElement: contextField };\n\t});\n\n\tconst handleDeleteListener = (id: string) => {\n\t\tintentStore.removeIntentListener(id);\n\t};\n\n\treturn (\n\t\t<AccordionList\n\t\t\ttitle=\"Intents\"\n\t\t\tnoItemsText=\"No Intent Listeners\"\n\t\t\tlistItems={intentListeners}\n\t\t\tonDelete={handleDeleteListener}\n\t\t/>\n\t);\n});\n","import { makeObservable, observable, action, runInAction, toJS } from \"mobx\";\nimport fdc3, {ContextType, Channel, Fdc3Listener} from \"../utility/Fdc3Api\";\nimport systemLogStore from \"./SystemLogStore\";\nimport { nanoid } from \"nanoid\";\n\ninterface ListenerOptionType {\n\ttitle: string;\n\tvalue: string;\n\ttype: string | undefined;\n}\n\ninterface Fdc3Channel {\n    id: string;\n    channel: Channel;\n    currentListener?:ListenerOptionType|null;\n    broadcastError?: string;\n    context?: ContextType|null;\n    listenerError? : string;\n}\nclass AppChannelStore {\n\tappChannelsList: Fdc3Channel[] = [];\n\n\tcurrentAppChannel: Fdc3Channel | null = null;\n\n    appChannelListeners: Fdc3Listener[] = [];\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tappChannelsList: observable,\n\t\t\tcurrentAppChannel: observable,\n            appChannelListeners: observable,\n            getOrCreateChannel: action,\n\t\t\tleaveChannel: action,\n\t\t\tbroadcast: action,\n\t\t});\n\n\t}\n\n    async getOrCreateChannel(channelId: string) {\n\t\ttry {\n\t\t\tconst currentAppChannel = await fdc3.getOrCreateChannel(channelId);\n\t\t\tconst isSuccess = currentAppChannel !== null;\n            if (isSuccess) {\n                this.currentAppChannel = {\n                    id: channelId,\n                    channel: currentAppChannel\n                };\n                let foundChannel = this.appChannelsList.find((channel)=>channel.id === channelId);\n                if (!foundChannel) {\n                    this.appChannelsList.push(this.currentAppChannel);\n                }\n            }\n           \n\t\t\trunInAction(() => {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"getOrCreateChannel\",\n\t\t\t\t\ttype: isSuccess ? \"success\" : \"error\",\n\t\t\t\t\tvalue: isSuccess ? currentAppChannel?.id : channelId,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"getOrCreateChannel\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: channelId,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n    isContextListenerExists(channelId: string, type: string | undefined) {\n        return !!this.appChannelListeners?.find((listener) => listener.type === type && listener.channelId === channelId);\n\t}\n\n    isAppChannelExists(channelId: string) {\n\t\treturn !!this.appChannelsList.find((channel) => channel.id === channelId);\n\t}\n\n    async broadcast(channelId: string, context: ContextType) {\n\t\tif (!context) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"appbroadcast\",\n\t\t\t\ttype: \"warning\",\n\t\t\t\tvalue: `You must set a context before you can broadcast it to channel: ${channelId}`,\n\t\t\t\tvariant: \"text\",\n\t\t\t});\n\t\t}\n\t\t\n\t\t//check that we're on a channel\n\t\tlet currentChannel = this.appChannelsList.find((channel)=>channel.id === channelId);\n\n\t\tif (!currentChannel) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"appbroadcast\",\n\t\t\t\ttype: \"warning\",\n\t\t\t\tvalue: \"You are not currently joined to a channel (no-op)\",\n\t\t\t\tvariant: \"text\",\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t\n\t\ttry {\n\t\t\tawait currentChannel.channel.broadcast(toJS(context));\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"appbroadcast\",\n\t\t\t\ttype: \"success\",\n\t\t\t\tbody: JSON.stringify(context, null, 4),\n\t\t\t\tvariant: \"code\",\n\t\t\t\tvalue: channelId\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"appbroadcast\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\tvariant: \"code\",\n\t\t\t\tvalue: channelId\n\t\t\t});\n\t\t}\n\t\t\n\t}\n\n\tasync leaveChannel() {\n\t\ttry {\n\t\t\t//check that we're on a channel\n\t\t\tlet currentChannel = await fdc3.getCurrentChannel();\n\t\t\tif (!currentChannel) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"leaveChannel\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tawait fdc3.leaveCurrentChannel();\n\t\t\t\tcurrentChannel = await fdc3.getCurrentChannel();\n\t\t\t\tconst isSuccess = currentChannel === null;\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"leaveChannel\",\n\t\t\t\t\t\ttype: isSuccess ? \"success\" : \"error\",\n\t\t\t\t\t\tvalue: this.currentAppChannel?.id,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\n\t\t\t\t\tif (isSuccess) {\n\t\t\t\t\t\tthis.currentAppChannel = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"leaveChannel\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: this.currentAppChannel?.id,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n\t\t}\n\t}\n\n    async addChannelListener(channelId: string, newListener: string | undefined ){\n        try{\n            let currentChannel = this.appChannelsList.find((channel)=>channel.id === channelId);\n            let foundListener = this.appChannelListeners.find((currentListener)=>currentListener.type === newListener && currentListener.channelId === channelId);\n\n            if (!foundListener && currentChannel && newListener !== undefined) {\n                const listenerId = nanoid();\n                const contactListener = await currentChannel.channel.addContextListener(newListener?.toLowerCase() === \"all\" ? null : newListener, (context, metaData?: any) => {\n                    const currentListener = this.appChannelListeners.find((listener)=>listener.type === newListener && listener.channelId === channelId);\n\n                    runInAction(() => {\n                        if (currentListener) {\n                            currentListener.lastReceivedContext = context;\n\t\t\t\t\t\t\tcurrentListener.metaData = metaData\n                        }\n                    });\n\n                    systemLogStore.addLog({\n                        name: \"receivedAppContextListener\",\n                        type: \"info\",\n                        value: `Channel [${channelId}] Received context via '[${newListener}]' listener`,\n                        variant: \"code\",\n                        body: JSON.stringify(context, null, 4),\n                    });\n                });\n\n                runInAction(() => {\n                    systemLogStore.addLog({\n                        name: \"addAppContextListener\",\n                        type: \"success\",\n                        value: `A context listener for '[${newListener}]' has been added on channel [${channelId}]`,\n                        variant: \"text\",\n                    });\n                    this.appChannelListeners.push({ id: listenerId, type: newListener, listener: contactListener, channelId});\n                });\n            }\n\n        } catch(e) {\n            systemLogStore.addLog({\n\t\t\t\tname: \"addAppContextListener\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: `Failed to add a context listener for '[${newListener}]' on channel [${channelId}]`,\n\t\t\t\tvariant: \"code\",\n\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t});\n        }\n        \n    }\n\n    removeContextListener(id: string) {\n\t\tconst listenerIndex = this.appChannelListeners?.findIndex((listener) => listener.id === id);\n        const listener = this.appChannelListeners[listenerIndex];\n\t\tif (listenerIndex !== -1) {\n\t\t\ttry {\n\t\t\t\tthis.appChannelListeners[listenerIndex].listener.unsubscribe();\n\n\t\t\t\trunInAction(() => {\n\t\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\t\tname: \"removeAppChannelContextListener\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tvalue: `A context listener for '[${listener.type}]' for channel [${listener.channelId}] has been removed`,\n\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t});\n\t\t\t\t\tthis.appChannelListeners.splice(listenerIndex, 1);\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"removeAppChannelContextListener\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvalue: `Failed to remove a context listener for '[${listener.type}]' on channel [${listener.channelId}]`,\n\t\t\t\t\tvariant: \"code\",\n\t\t\t\t\tbody: JSON.stringify(e, null, 4),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst appChannelStore = new AppChannelStore();\n\nexport default appChannelStore;\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport appChannelStore from \"../../store/AppChannelStore\";\nimport { AccordionList, AccordionListItem } from \"../common/AccordionList\";\nimport { TextField } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { ReceivedField } from \"./ReceivedField\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttextField: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tinput: {\n\t\t\tfontSize: \"14px\",\n\t\t},\n\t})\n);\n\nexport const AppChannelListeners = observer(() => {\n\tconst classes = useStyles();\n\n\tlet contextListeners: AccordionListItem[] = [];\n    \n        appChannelStore.appChannelListeners.forEach(({ id, channelId, type, lastReceivedContext, metaData }) => {\n\t\t\tconst receivedContextListenerValue = lastReceivedContext ? JSON.stringify(lastReceivedContext, undefined, 4) : \"\";\n\t\t\tconst contextField = (\n\t\t\t\t<div>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\tlabel={\"LAST RECEIVED CONTEXT\"}\n\t\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tvalue={receivedContextListenerValue}\n\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\t\tinput: classes.input,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t{window.fdc3Version === '2.0' && <ReceivedField metaData={metaData} />}\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tcontextListeners.push({ id, textPrimary: `${channelId}: ${type}`, afterEachElement: contextField});\n        });\n\n\tconst handleDeleteListener = (id: string) => {\n\t\tappChannelStore.removeContextListener(id);\n\t};\n\n\treturn (\n\t\t<AccordionList\n\t\t\ttitle=\"App Channels\"\n\t\t\ticon=\"Any context already in the channel will NOT be received automatically\"\n\t\t\tnoItemsText=\"No App Channel Listeners\"\n\t\t\tlistItems={contextListeners}\n\t\t\tonDelete={handleDeleteListener}\n\t\t/>\n\t);\n});\n","import React from \"react\";\nimport { ListItem, TextField, Typography } from \"@material-ui/core\";\nimport { LogItem } from \"../../store/SystemLogStore\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\ninterface SystemLogItemProps {\n\tlogItem: LogItem;\n}\n\nconst useStyles = (props: SystemLogItemProps) =>\n\tmakeStyles((theme: Theme) =>\n\t\tcreateStyles({\n\t\t\troot: {\n\t\t\t\tflexDirection: \"column\",\n\t\t\t\tjustifyContent: \"flex-start\",\n\t\t\t\talignItems: \"flex-start\",\n\t\t\t\tpadding: theme.spacing(3, 0),\n\t\t\t\t\"&:first-child\": {\n\t\t\t\t\tborderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\tcolor: theme.palette[props.logItem.type].dark,\n\t\t\t},\n\t\t\ttextField: {\n\t\t\t\twidth: \"100%\",\n\t\t\t},\n\t\t\tinput: {\n\t\t\t\tfontSize: \"14px\",\n\t\t\t\tcolor: theme.palette.text.primary,\n\t\t\t},\n\t\t\t\"& .Mui-disabled\": {\n\t\t\t\tborderColor: theme.palette.text.primary,\n\t\t\t},\n\t\t})\n\t);\n\nexport const SystemLogItem: React.FC<SystemLogItemProps> = (props: SystemLogItemProps) => {\n\tconst { logItem } = props;\n\tconst classes = useStyles(props)();\n\n\treturn (\n\t\t<ListItem className={classes.root} divider>\n\t\t\t<Typography className={classes.message} variant=\"body1\">\n\t\t\t\t{logItem.message}\n\t\t\t</Typography>\n\n\t\t\t{logItem.variant === \"code\" && (\n\t\t\t\t<TextField\n\t\t\t\t\tdisabled\n\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\tid={logItem.id}\n\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\tfullWidth\n\t\t\t\t\tmultiline\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={logItem.body}\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\tinput: classes.input,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{logItem.variant === \"text\" && logItem.body && (\n\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t{logItem.type === \"error\" && \"ERROR:\"}\n\t\t\t\t\t{logItem.type === \"warning\" && \"WARNING:\"}\n\t\t\t\t\t{logItem.type === \"info\" && \"INFO:\"}\n\t\t\t\t\t{logItem.type === \"success\" && \"SUCCESS:\"}\n\n\t\t\t\t\t{logItem.body}\n\t\t\t\t</Typography>\n\t\t\t)}\n\t\t</ListItem>\n\t);\n};\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport { List } from \"@material-ui/core\";\nimport systemLogStore from \"../../store/SystemLogStore\";\nimport { SystemLogItem } from \"./SystemLogItem\";\n\nconst useStyles = makeStyles(() =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t})\n);\n\nexport const SystemLog = observer(() => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<List component=\"nav\" className={classes.root} aria-label=\"mailbox folders\">\n\t\t\t{systemLogStore.logList.map((logItem) => (\n\t\t\t\t<SystemLogItem key={logItem.id} logItem={logItem} />\n\t\t\t))}\n\t\t</List>\n\t);\n});\n","import React, { useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Tooltip } from \"@material-ui/core\";\nimport InfoIcon from '@material-ui/icons/Info';\nimport { Tabs, Tab } from \"@material-ui/core\";\nimport { TabPanel } from \"../common/TabPanel\";\nimport { ContextListeners } from \"./ContextListeners\";\nimport { IntentListeners } from \"./IntentListeners\";\nimport { AppChannelListeners } from \"./AppChannelListeners\";\nimport { SystemLog } from \"./SystemLog\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\t'@global': {\n\t\t\t\".MuiTab-wrapper\": {\n\t\t\t\tflexDirection: \"row !important\"\n\t\t\t}\n\t\t},\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tpaper: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\tpadding: theme.spacing(2),\n\t\t\t\"&:first-child\": {\n\t\t\t\tmarginTop: 0,\n\t\t\t},\n\t\t},\n\t\tsystemLog: {\n\t\t\tmaxHeight: \"1000px\",\n\t\t\toverflowY: \"scroll\",\n\t\t},\n\t\tindicator: {\n\t\t\tbackgroundColor: \"#00bbe1\",\n\t\t},\n\t\ttabs: {\n\t\t\tborderBottomColor: \"#acb2c0\",\n\t\t\tborderBottomStyle: \"solid\",\n\t\t\tborderBottomWidth: \"1px\",\n\t\t\tminHeight: \"28px\",\n\t\t},\n\t\ticon: {\n\t\t\tmarginBottom: \"3px !important\",\n\t\t\tfontSize: \"15px\",\n\t\t\tmarginRight: \"3px\"\n\t\t},\n\t})\n);\n\nconst a11yProps = (index: any) => {\n\treturn {\n\t\tid: `scrollable-auto-tab-${index}`,\n\t\t\"aria-controls\": `scrollable-auto-tabpanel-${index}`,\n\t};\n};\n\nexport const Workbench = observer(() => {\n\tconst classes = useStyles();\n\tconst [tabValue, setTabValue] = useState<number>(0);\n\n\tconst handleTabChange = (event: React.ChangeEvent<{}>, newValue: number) => {\n\t\tsetTabValue(newValue);\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Tabs\n\t\t\t\tvalue={tabValue}\n\t\t\t\tonChange={handleTabChange}\n\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\tvariant=\"scrollable\"\n\t\t\t\tscrollButtons=\"auto\"\n\t\t\t\tclasses={{\n\t\t\t\t\tindicator: classes.indicator,\n\t\t\t\t}}\n\t\t\t\tclassName={classes.tabs}\n\t\t\t>\n\t\t\t\t<Tab label=\"Listeners\" {...a11yProps(0)} style={{display:'flex',alignItems:'center'}} icon={\n\t\t\t\t\t<Tooltip \n\t\t\t\t\t\ttitle=\"Context received will be displayed here, but you will not receive your own messages back\" \n\t\t\t\t\t\taria-label=\"Context received will be displayed here, but you will not receive your own messages back\" >\n\t\t\t\t\t\t<InfoIcon className={classes.icon} />\n\t\t\t\t\t</Tooltip>}\n\t\t\t\t/>\n\t\t\t\t<Tab label=\"System Log\" {...a11yProps(1)} />\n\t\t\t</Tabs>\n\n\t\t\t<TabPanel value={tabValue} index={0}>\n\t\t\t\t<ContextListeners />\n\t\t\t\t<IntentListeners />\n\t\t\t\t<AppChannelListeners />\n\t\t\t</TabPanel>\n\n\t\t\t<div className={classes.systemLog}>\n\t\t\t\t<TabPanel value={tabValue} index={1}>\n\t\t\t\t\t<SystemLog />\n\t\t\t\t</TabPanel>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n","import React, { useEffect, useRef, useState } from \"react\";\nimport JSONEditor, { JSONEditorOptions, ParseError, SchemaValidationError } from \"jsoneditor\";\nimport \"jsoneditor/dist/jsoneditor.css\";\nimport $RefParser from \"@apidevtools/json-schema-ref-parser\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\ninterface JsonInputProps {\n\tjson?: object | null;\n\tschemaUrl?: URL | null;\n\tschema?: object | null;\n\tonJsonError?: (errors: Array<string>) => void;\n\treadOnly?: boolean;\n\tonChange: (value: any) => void;\n\terror?: string | false;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tposition: \"relative\",\n\t\t\tflexGrow: 1,\n\t\t\tpadding: theme.spacing(1),\n\t\t\tborder: `1px solid #0086bf`,\n\t\t\tborderRadius: theme.shape.borderRadius,\n\t\t\t\"& .jsoneditor\": {\n\t\t\t\tborder: \"none\",\n\t\t\t},\n\t\t\t\"& .ace-jsoneditor .ace_gutter\": {\n\t\t\t\tbackgroundColor: \"transparent\",\n\t\t\t},\n\t\t\t\"& .ace-jsoneditor .ace_gutter-active-line\": {\n\t\t\t\tbackgroundColor: theme.palette.grey[\"200\"],\n\t\t\t},\n\t\t\t\"& .ace-jsoneditor .ace_marker-layer .ace_active-line\": {\n\t\t\t\tbackgroundColor: theme.palette.grey[\"200\"],\n\t\t\t},\n\t\t},\n\t\tjsonInput: {\n\t\t\theight: \"270px\",\n\t\t},\n\t\terrorText: {\n\t\t\tbottom: \"-8px\",\n\t\t\tpadding: theme.spacing(0, 0.5),\n\t\t\tfontSize: \"0.75rem\",\n\t\t\tposition: \"absolute\",\n\t\t\tbackgroundColor: \"#fff\",\n\t\t\tcolor: theme.palette.error.main,\n\t\t},\n\t})\n);\n\nexport const JsonInput: React.FC<JsonInputProps> = (props: JsonInputProps) => {\n\tconst classes = useStyles();\n\tconst [jsoneditor, setJsoneditor] = useState<JSONEditor>();\n\tconst container = useRef<HTMLDivElement>(null);\n\tconst initialSettings: JSONEditorOptions = {\n\t\tmode: \"code\",\n\t\tmainMenuBar: false,\n\t\tstatusBar: false,\n\t\tindentation: 2,\n\t\tonChangeText: (text: string) => {\n\t\t\tif (text === \"\") {\n\t\t\t\tprops.onChange(null);\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tprops.onChange(JSON.parse(text));\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t},\n\t\tonValidationError: (error: readonly (SchemaValidationError | ParseError)[]) => {\n\t\t\tif (props.onJsonError) {\n\t\t\t\tif (error.length > 0) {\n\t\t\t\t\tconst errorMsg: string = error[0].type === \"error\" ? \"Bad json format\" : \"Json doesn't match the schema\";\n\t\t\t\t\tprops.onJsonError([errorMsg]);\n\t\t\t\t} else {\n\t\t\t\t\tprops.onJsonError([]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst options: JSONEditorOptions = { ...initialSettings };\n\n\t\t\tif (container.current) {\n\t\t\t\tif (props.schema) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\toptions.schema = await $RefParser.dereference(props.schema, {\n\t\t\t\t\t\t\tdereference: {\n\t\t\t\t\t\t\t\tcircular: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (props.schemaUrl) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\toptions.schema = await $RefParser.dereference(props.schemaUrl.href, {\n\t\t\t\t\t\t\tdereference: {\n\t\t\t\t\t\t\t\tcircular: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst editor = new JSONEditor(container.current, options, props.json);\n\n\t\t\t\tsetJsoneditor(editor);\n\t\t\t}\n\t\t})();\n\n\t\treturn jsoneditor?.destroy;\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (props.schema) {\n\t\t\tjsoneditor?.setSchema(props.schema);\n\t\t}\n\t}, [props.schema]);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tif (props.schemaUrl) {\n\t\t\t\ttry {\n\t\t\t\t\tconst schema = await $RefParser.dereference(props.schemaUrl.href, {\n\t\t\t\t\t\tdereference: {\n\t\t\t\t\t\t\tcircular: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tjsoneditor?.setSchema(schema);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}, [props.schemaUrl]);\n\n\tuseEffect(() => {\n\t\tif (jsoneditor && (props.json || props.json === null)) {\n\t\t\tif (props.json === null) {\n\t\t\t\tjsoneditor.set({});\n\t\t\t} else {\n\t\t\t\tjsoneditor.set(props.json);\n\t\t\t}\n\t\t}\n\t}, [props.json, jsoneditor]);\n\n\treturn (\n\t\t<div className={classes.root} tabIndex={0}>\n\t\t\t<div className={classes.jsonInput} ref={container} />\n\t\t\t{!!props.error && <div className={classes.errorText}>{props.error}</div>}\n\t\t</div>\n\t);\n};\n","import * as React from 'react';\nimport { Button, DialogTitle, DialogActions, Dialog } from \"@material-ui/core\";\n\ninterface DialogModalProps {\n  open: boolean;\n  onClose: (value: boolean) => void;\n  onAgree: (value: string) => void;\n  selectedValue: any;\n}\n\nexport function DialogModal(props: DialogModalProps) {\n  const { onClose, onAgree, open, selectedValue} = props;\n\n  const handleClose = () => {\n    onClose(false);\n  };\n\n  const handleAgree= () => {\n    onAgree(selectedValue?.id || '');\n    onClose(false);\n  }\n\n  return (\n    <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">\n          {`Delete context template: ${selectedValue?.name || selectedValue?.id}`}\n        </DialogTitle>\n        <DialogActions>\n          <Button onClick={handleClose}>Disagree</Button>\n          <Button onClick={handleAgree} autoFocus>\n            Agree\n          </Button>\n        </DialogActions>\n      </Dialog>\n  );\n}","import React, { useEffect, useState, useRef, FormEvent } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Button, Grid, Typography, Tooltip, IconButton, Table, TableBody, TableRow, TableCell, TableContainer } from \"@material-ui/core\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport FileCopyOutlinedIcon from \"@material-ui/icons/FileCopyOutlined\";\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\nimport contextStore, { ContextItem } from \"../store/ContextStore\";\nimport systemLogStore from \"../store/SystemLogStore\";\nimport { JsonInput } from \"./common/JsonInput\";\nimport { DialogModal } from \"./common/DialogModal\";\nimport { TemplateTextField } from \"./common/TemplateTextField\";\nimport { copyToClipboard } from \"./common/CopyToClipboard\";\nimport { ContextType } from \"../utility/Fdc3Api\";\n\ninterface OptionType {\n\ttitle: string;\n\tvalue: string;\n}\n\nconst useStyles: any = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\talignItems: \"center\",\n\t\t\tmarginTop: theme.spacing(1),\n\t\t\t\"& > *\": {\n\t\t\t\tmargin: theme.spacing(1),\n\t\t\t},\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t\tpaddingLeft: 0,\n\t\t\t},\n\t\t\t\"& > * > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t\tpaddingLeft: 0,\n\t\t\t},\n\t\t\t\"& .MuiGrid-grid-xs-12\": {\n\t\t\t\tpaddingLeft: 0,\n\t\t\t},\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t\tmarginLeft: theme.spacing(1),\n\t\t\t},\n\t\t},\n\t\ttemplateSelect: {\n\t\t\tflexGrow: 1,\n\t\t\t// marginRight: theme.spacing(1),\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\ttextField: {\n\t\t\twidth: \"100%\"\n\t\t},\n\t\tmultilineField: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tbutton: {\n\t\t\tmarginLeft: \"auto\",\n\t\t},\n\t\trightAlign: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t\tborder: {\n\t\t\theight: \"1px\",\n\t\t\twidth: \"100%\",\n\t\t\tbackgroundColor: \"#acb2c0\",\n\t\t\tmarginTop: \"24px\",\n\t\t\tmarginBottom: \"16px\",\n\t\t},\n\t\tdelete: {\n\t\t\theight:'15px',\n\t\t\ttransform: 'scale(1.7)',\n\t\t},\n\t\tcopy: {\n\t\t\theight:'20px',\n\t\t},\n\t\tlink: {\n\t\t\tcursor: \"pointer\",\n\t\t\tcolor: \"black\"\n\t\t},\n\t\tmargins: {\n\t\t\tmargin: \"0 5px\"\n\t\t},\n\t\ttableContainer: {\n\t\t\tmaxHeight: 350\n\t\t}\n\t})\n);\n\nconst emptyJson: ContextType = {\n\ttype: \"\",\n\tid: {}\n};\n\nexport const ContextCreate = observer(({contextName}: {contextName:string}) => {\n\tconst classes = useStyles();\n\tconst [templateName, setTemplateName] = useState<OptionType | null>({\n\t\ttitle: contextName,\n\t\tvalue: contextName});\n\tconst [duplicateName, setDuplicateName] = useState(false);\n\tconst [contextValue, setContextValue] = useState<ContextType | null>(emptyJson);\n\tconst [context, setContext] = useState<ContextItem | null>({\n\t\tid: contextName || \"empty\",\n\t\ttemplate: emptyJson,\n\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/context.schema.json\"),\n\t});\n\tconst [contextError, setContextError] = useState<string | false>(false);\n\tconst [open, setOpen] = useState(false);\n\tconst [deleteContext, setDeleteContext] = useState<object | null>(null);\n\tconst [disabled, setDisabled] = useState(true);\n\tconst gridRef = useRef<any>(null);\n\t\n\tconst handleClickOpen = (id: string, name: any) => {\n\t\tsetOpen(true);\n\t\tsetDeleteContext({id, name})\n\t};\n\n\tconst handleClose = (value: boolean) => {\n\t\tsetOpen(value);\n\t};\n\n\tconst handleJsonError = (errors: string[]) => {\n\t\tsetContextError(errors[0]);\n\t};\n\n\tconst handleChangeTemplate = (newValue: any) => {\n\t\tsetTemplateName(newValue);\n\n\t\tif (newValue?.value) {\n\t\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === newValue?.value);\n\t\t\tif (selectedContext) {\n\t\t\t\tsetContextValue(selectedContext.template);\n\t\t\t\tsetContext(selectedContext);\n\t\t\t}\n\t\t}\n\n\t\tsetContextError(false);\n\t};\n\n\tconst found = (tempName: string, ignoreUuid?: string) => \n\t\tcontextStore.contextsList.reduce((count, {id, uuid}) => {\n\t\t\tif(id === tempName && (!ignoreUuid || ignoreUuid !== uuid)) {\n\t\t\t\tcount = count + 1;\n\t\t\t}\n\t\t\treturn count;\n\t\t}, 0);\n\n\tconst handleChangeTemplateName = (newValue: any) => {\n\t\tsetDisabled(false);\n\t\tsetContextError(false)\n\t\tsetTemplateName(newValue);\n\n\t\tif(context && !found(newValue.value, context.uuid)) setDuplicateName(false);\n\t\telse if(found(newValue.value) >= 1) setDuplicateName(true);\n\t}\n\n\tconst handleContextChange = (json: ContextType) => {\n\t\tsetContextValue(json);\n\t\tsetContextError(false);\n\t};\n\n\tconst validate = () => {\n\t\tif (!contextValue) {\n\t\t\tsetContextError(\"Context is required\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!contextValue?.type) {\n\t\t\tsetContextError(\"Context must have property 'type'\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif (contextValue?.type === \"\") {\n\t\t\tsetContextError(\"Property 'type' can't be empty\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif(!templateName) {\n\t\t\tsetContextError(\"Template name is required\");\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\treturn true;\n\t};\n\n\tconst handleCreateTemplate = () => {\n\t\tsetTemplateName(null)\n\t\tsetContext(null);\n\t\tsetContextValue(null);\n\t\tsetDisabled(true);\n\t};\n\n\tconst handleSaveTemplate = (e: FormEvent | null = null) => {\n\t\te?.preventDefault();\n\t\tif(disabled) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst isValid: boolean = validate();\n\n\t\t\tif (isValid && context && templateName) {\n\t\t\t\t\n\t\t\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === context.id);\n\t\t\t\tconst currContext = {\n\t\t\t\t\tid: templateName.value,\n\t\t\t\t\tschemaUrl: context.schemaUrl,\n\t\t\t\t\ttemplate: contextValue,\n\t\t\t\t}\n\n\t\t\t\tif(!selectedContext) contextStore.addContextItem(currContext);\n\n\t\t\t\tcontextStore.saveContextItem(currContext, context.id);\n\t\t\t\thandleChangeTemplate({title: currContext.id, value: currContext.id});\n\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"saveTemplate\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tvalue: currContext?.id,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"saveTemplate\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tvalue: undefined,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t}\n\t\t\tsetDisabled(true);\n\t\t}\n\t};\n\n\tconst handleDuplicateTemplate = (newValue: any, count = 0) => {\n\t\tconst copyName = `${newValue.value}-copy${count > 0 ? ` (${count})` : ''}`;\n\t\tif (newValue?.value && !found(copyName)) {\n\t\t\tsetTemplateName({value: copyName, title: copyName});\n\t\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === newValue.value);\n\n\t\t\tif (selectedContext) {\n\n\t\t\t\tconst newContext: ContextItem = {\n\t\t\t\t\tid: copyName,\n\t\t\t\t\ttemplate: selectedContext.template,\n\t\t\t\t\tschemaUrl: selectedContext.schemaUrl,\n\t\t\t\t};\n\n\t\t\t\tcontextStore.addContextItem(newContext);\n\t\t\t\tcontextStore.saveContextItem(newContext);\n\n\t\t\t\tsetContextValue(selectedContext.template);\n\t\t\t\tsetContext(newContext);\n\t\t\t\t\n\t\t\t\tsystemLogStore.addLog({\n\t\t\t\t\tname: \"saveTemplate\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tvalue: newContext.id,\n\t\t\t\t\tvariant: \"text\",\n\t\t\t\t});\n\t\t\t}\n\t\t} else if(found(copyName)) {\n\t\t\thandleDuplicateTemplate(newValue, ++count)\n\t\t}\n\n\t\tsetContextError(false);\n\t}\n\n\tconst handleResetTemplate = () => {\n\t\tcontextStore.resetContextList();\n\t\thandleCreateTemplate()\n\t};\n\n\tconst handleDeleteTemplate = (contextId:any) => {\n\t\tconst selectedContext = contextStore.contextsList.find(({ id }) => id === contextId);\n\t\tif (selectedContext) {\n\t\t\tcontextStore.deleteContextItem(selectedContext);\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"deleteTemplate\",\n\t\t\t\ttype: \"success\",\n\t\t\t\tvalue: selectedContext?.id,\n\t\t\t\tvariant: \"text\",\n\t\t\t});\n\t\t} else {\n\t\t\tsystemLogStore.addLog({\n\t\t\t\tname: \"deleteTemplate\",\n\t\t\t\ttype: \"error\",\n\t\t\t\tvalue: undefined,\n\t\t\t\tvariant: \"text\",\n\t\t\t});\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t  if(duplicateName) {\n\t\tsetDisabled(true);\n\t\tsetContextError(\"Template name already exists\");\n\t  }\n\t  else setDisabled(false);\n\t}, [duplicateName, contextValue])\n\t\n\tuseEffect(() => {\n\t\tif(gridRef && gridRef.current) gridRef.current.scrollIntoView({behavior: 'auto', block: 'nearest'});\n\t\tif(context == null) {\n\t\t\tconst newContext: ContextItem = {\n\t\t\t\tid: \"empty\",\n\t\t\t\ttemplate: emptyJson,\n\t\t\t\tschemaUrl: new URL(\"https://fdc3.finos.org/schemas/1.2/context.schema.json\"),\n\t\t\t};\n\t\t\tsetContext(newContext);\n\t\t\tsetContextValue(emptyJson);\n\t\t}\n\t}, [context])\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<DialogModal open={open} onClose={handleClose} onAgree={handleDeleteTemplate} selectedValue={deleteContext} />\n\t\t\t<Grid container spacing={1} >\n\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t<Typography variant=\"h5\" >Context templates:</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<TableContainer className={classes.tableContainer}>\n\t\t\t\t\t<Table>\n\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t{contextStore.contextsList.map(({ id, template }, index) => (\n\t\t\t\t\t\t\t\t<TableRow hover role=\"checkbox\" tabIndex={-1} key={`row-${index}`} selected={id === templateName?.value} ref={id === templateName?.value ? gridRef : null}>\n\t\t\t\t\t\t\t\t\t<TableCell key={`row-${index}-column-0`} align=\"left\" onClick={() => handleChangeTemplate({title: id, value: id})}>\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" >\n\t\t\t\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell key={`row-${index}-column-1`} align=\"left\" onClick={() => handleChangeTemplate({title: id, value: id})}>\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\" >{template?.type}</Typography>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell key={`row-${index}-column-2`} align=\"right\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Duplicate Template\" aria-label=\"Copy code\">\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDuplicateTemplate({title: id, value: id})}>\n\t\t\t\t\t\t\t\t\t\t\t\t<FileCopyOutlinedIcon className={classes.copy}/>\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell key={`row-${index}-column-3`} align=\"right\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Delete template\" aria-label=\"Delete template\">\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Delete template\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleClickOpen(id, template?.name)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<DeleteOutlinedIcon className={classes.delete}/>\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</TableContainer>\n\t\t\t</Grid>\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\">\n\t\t\t\t<Grid container direction=\"row\" spacing={1}>\n\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t<Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleCreateTemplate}>\n\t\t\t\t\t\t\tCreate new template\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t<Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleResetTemplate}>\n\t\t\t\t\t\t\tReset templates\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t\t\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\" onSubmit={(e)=>handleSaveTemplate(e)}>\n\t\t\t\t<Grid container direction=\"row\" spacing={1} className={classes.rightAlign}>\n\t\t\t\t\t<Grid item xs={12} className={`${classes.controls} ${classes.templateSelect}`}>\n\t\t\t\t\t\t<Grid item xs={6} className={classes.field}>\n\t\t\t\t\t\t\t<Grid item xs={12} className={classes.textField}>\n\t\t\t\t\t\t\t\t<Typography variant=\"h5\" >Edit template:</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\tlabel=\"Template name\"\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tclassName={classes.textField}\n\t\t\t\t\t\t\t\tplaceholder=\"Choose Context Template\"\n\t\t\t\t\t\t\t\tvalue={templateName?.value || ''}\n\t\t\t\t\t\t\t\tonChange={(e) => handleChangeTemplateName({title: e.target.value, value: e.target.value})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<Grid item xs={12} className={classes.controls}>\n\t\t\t\t\t\t<JsonInput\n\t\t\t\t\t\t\tjson={context?.template}\n\t\t\t\t\t\t\tonChange={handleContextChange}\n\t\t\t\t\t\t\tonJsonError={handleJsonError}\n\t\t\t\t\t\t\tschemaUrl={new URL(context?.schemaUrl || 'https://fdc3.finos.org/schemas/1.2/context.schema.json')}\n\t\t\t\t\t\t\terror={contextError}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<Tooltip title=\"Copy code\" aria-label=\"Copy code\">\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={copyToClipboard(`let context = ${JSON.stringify(contextValue, null, 2)}`, \"createContext\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleSaveTemplate} disabled={disabled}>\n\t\t\t\t\t\t\tSave Changes\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t</div>\n\t);\n});\n","import React, { useEffect, useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { TextField } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttextField: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tinput: {\n\t\t\tfontSize: \"14px\",\n\t\t\tcolor: \"rgba(0, 0, 0, 0.6)\",\n\t\t},\n\t\t\"& .Mui-disabled\": {\n\t\t\tborderColor: theme.palette.text.primary,\n\t\t},\n\t})\n);\n\nexport const IntentResolutionField = observer(({data}: {data: any}) => {\n\tconst classes = useStyles();\n\tconst [resolutionResult, setResolutionResult] = useState<any>(\"pending...\");\n\tlet results = \n\t`Resolved by:\\n\n\t\t\\tappId: ${data.source.appId}\\n\n\t\t\\tinstanceId: ${data.source.instanceId}\\n\n\tResults: ${resolutionResult}`;\n\n\n    const displayIntentResults = async () => {\n\t\ttry {\n\t\t\tif(resolutionResult.hasOwnProperty('getResult')) {\n\t\t\t\tconst result = await resolutionResult.getResult();\n\t\t\t\t//detect whether the result is Context or a Channel\n\t\t\t\tif (result && result.broadcast) { \n\t\t\t\t//render channel\n\t\t\t\t} else if (result){\n\t\t\t\t\tresolutionResult.resultContext = JSON.stringify(result, null, 2);\n\t\t\t\t} else {\n\t\t\t\t}\n\t\t\t\tsetResolutionResult(result);\n\t\t\t}\n\t\t} catch(error) {\n\t\t\tconsole.error(`${resolutionResult.source} returned a result error: ${error}`);\n\t\t}\n    }\n\n\tuseEffect(() => {\n\t\tresults = `Resolved by:\\n\n\t\tappId: ${data.source.appId}\\n\n\t\tinstanceId: ${data.source.instanceId}\\n\n\tResults: ${resolutionResult}`;\n\t}, [resolutionResult])\n\n\tdisplayIntentResults();\n\t\n\treturn (\n\t \t<TextField\n\t\t\tdisabled\n\t\t\tlabel={\"RESULT CONTEXT\"}\n\t\t\tInputLabelProps={{\n\t\t\t\tshrink: true,\n\t\t\t}}\n\t\t\tcontentEditable={false}\n\t\t\tfullWidth\n\t\t\tmultiline\n\t\t\tvariant=\"outlined\"\n\t\t\tsize=\"small\"\n\t\t\tvalue={results}\n\t\t\tInputProps={{\n\t\t\t\tclasses: {\n\t\t\t\t\tinput: classes.input,\n\t\t\t\t},\n\t\t\t}}\n\t\t/>)\n});\n","import React, { useEffect, useState } from \"react\";\nimport fdc3, {AppIntent, AppMetadata, Context, IntentResolution} from \"../utility/Fdc3Api\";\nimport { toJS } from \"mobx\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport {\n\tButton,\n\tIconButton,\n\tTooltip,\n\tTypography,\n\tGrid,\n\tFormControl,\n\tInputLabel,\n\tMenuItem,\n\tSelect,\n} from \"@material-ui/core\";\nimport { observer } from \"mobx-react\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport Autocomplete, { createFilterOptions } from \"@material-ui/lab/Autocomplete\";\nimport { ContextTemplates } from \"../components/ContextTemplates\";\nimport intentStore from \"../store/IntentStore\";\nimport { codeExamples } from \"../fixtures/codeExamples\";\nimport { TemplateTextField } from \"./common/TemplateTextField\";\nimport { copyToClipboard } from \"./common/CopyToClipboard\";\nimport { IntentResolutionField } from \"./IntentResolutionField\";\n\n// interface copied from lib @material-ui/lab/Autocomplete\ninterface FilterOptionsState<T> {\n\tinputValue: string;\n\tgetOptionLabel: (option: T) => string;\n}\n\ninterface ListenerOptionType {\n\ttitle: string;\n\tvalue: string;\n}\n\ntype ListenerSetValue = (value: ListenerOptionType | null) => void;\n\ntype ListenerSetError = (error: string | false) => void;\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: \"flex\",\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\talignItems: \"center\",\n\t\t\tmarginTop: theme.spacing(1),\n\t\t\t\"& > *\": {\n\t\t\t\tmargin: theme.spacing(1),\n\t\t\t\tmarginLeft: \"0px\",\n\t\t\t},\n\t\t},\n\t\tcontrols: {\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t},\n\t\t\t\"& > *\": {\n\t\t\t\tmarginRight: theme.spacing(1),\n\t\t\t},\n\t\t\t\"& > *:last-child\": {\n\t\t\t\tmarginRight: 0,\n\t\t\t},\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t\tdisplay: \"flex\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t\trightAlign: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t\tspread: {\n\t\t\tflexDirection: \"row\",\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tpaddingLeft: \"0px\",\n\t\t\t},\n\t\t},\n\t\ttextField: {\n\t\t\twidth: \"100%\",\n\t\t\t\"& input\": {\n\t\t\t\theight: \"29px\",\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t},\n\t\th4: {\n\t\t\tfontSize: \"22px\",\n\t\t},\n\t\tfield: {\n\t\t\tflexGrow: 1,\n\t\t\tmarginRight: theme.spacing(1),\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\tborder: {\n\t\t\theight: \"1px\",\n\t\t\twidth: \"100%\",\n\t\t\tbackgroundColor: \"#acb2c0\",\n\t\t\tmarginTop: \"24px\",\n\t\t\tmarginBottom: \"16px\",\n\t\t},\n\t\tbottomMargin: {\n\t\t\tmarginBottom: theme.spacing(1),\n\t\t},\n\t\tremoveSidePadding: {\n\t\t\tpaddingLeft: 0,\n\t\t},\n\t\ttargetSelect: {\n\t\t\twidth: \"100%\",\n\t\t\tmarginRight: theme.spacing(1),\n\t\t},\n\t\trightPadding: {\n\t\t\tpaddingRight: theme.spacing(0.5),\n\t\t},\n\t})\n);\n\nconst filter = createFilterOptions<ListenerOptionType>();\n\nexport const Intents = observer(({ handleTabChange }: { handleTabChange: any }) => {\n\tconst classes = useStyles();\n\tconst [intentValue, setIntentValue] = useState<ListenerOptionType | null>(null);\n\tconst [raiseIntentError, setRaiseIntentError] = useState<string | false>(false);\n\tconst [intentListener, setIntentListener] = useState<ListenerOptionType | null>(null);\n\tconst [intentsForContext, setIntentsForContext] = useState<ListenerOptionType[] | null>(null);\n\tconst [intentTargets, setIntentTargets] = useState<AppMetadata[] | null>(null);\n\tconst [targetApp, setTargetApp] = useState<string | null>(null);\n\tconst [contextTargetApp, setContextTargetApp] = useState<string | null>(null);\n\tconst [intentObjects, setIntentObjects] = useState<AppIntent[] | null>(null);\n\tconst [contextIntentObjects, setContextIntentObjects] = useState<any[] | null>(null);\n\tconst [raiseIntentContext, setRaiseIntentContext] = useState<Context | null>(null);\n\tconst [raiseIntentWithContextContext, setRaiseIntentWithContextContext] = useState<Context | null>(null);\n\tconst [intentError, setIntentError] = useState<string | false>(false);\n\tconst [intentResolution, setIntentResolution] = useState<IntentResolution | undefined>()\n\tconst intentListenersOptions: ListenerOptionType[] = intentStore.intentsList;\n\n\tconst handleRaiseIntent = async () => {\n\t\tif (!intentValue) {\n\t\t\tsetRaiseIntentError(\"enter intent name\");\n\t\t} else if (!raiseIntentContext) {\n\t\t\tsetRaiseIntentError(\"enter context name\");\n\t\t} else if (targetApp && intentTargets) {\n\t\t\tlet targetObject = intentTargets.find((target) => target.appId === targetApp || target.name === targetApp);\n\t\t\tif (targetObject) {\n\t\t\t\tsetIntentResolution(await intentStore.raiseIntent(intentValue.value, raiseIntentContext, targetObject));\n\t\t\t\tsetRaiseIntentError(\"\");\n\t\t\t}\n\t\t} else {\n\t\t\tsetIntentResolution(await intentStore.raiseIntent(intentValue.value, raiseIntentContext));\n\t\t\tsetRaiseIntentError(\"\");\n\t\t}\n\n\t};\n\n\tconst handleRaiseIntentForContext = () => {\n\t\tif (!raiseIntentWithContextContext) {\n\t\t\treturn;\n\t\t  }\n\t\tif (contextTargetApp && contextIntentObjects) {\n\t\t\tlet targetObject = contextIntentObjects.find((target) => target.name === contextTargetApp);\n\t\t\tintentStore.raiseIntentForContext(raiseIntentWithContextContext, targetObject.app);\n\t\t} else {\n\t\t\tintentStore.raiseIntentForContext(raiseIntentWithContextContext);\n\t\t}\t\n\t};\n\n\tconst handleTargetChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n\t\tif (event.target.value === \"None\") {\n\t\t\tsetTargetApp(\"\");\n\t\t} else {\n\t\t\tsetTargetApp(event.target.value as string);\n\t\t}\n\t};\n\n\tconst handleContextTargetChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n\t\tif (event.target.value === \"None\") {\n\t\t\tsetContextTargetApp(\"\");\n\t\t} else {\n\t\t\tsetContextTargetApp(event.target.value as string);\n\t\t}\n\t};\n\n\tconst handleChangeListener =\n\t\t(setValue: ListenerSetValue, setError: ListenerSetError) => (event: React.ChangeEvent<{}>, newValue: any) => {\n\t\t\tif (typeof newValue === \"string\") {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue,\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t});\n\t\t\t} else if (newValue && newValue.inputValue) {\n\t\t\t\tsetValue({\n\t\t\t\t\ttitle: newValue.inputValue,\n\t\t\t\t\tvalue: newValue.inputValue,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetValue(newValue);\n\t\t\t}\n\n\t\t\tsetError(false);\n\t\t};\n\n\tconst getOptionLabel = (option: ListenerOptionType) => option.value || option.title;\n\n\tconst filterOptions = (options: ListenerOptionType[], params: FilterOptionsState<ListenerOptionType>) => {\n\t\tconst filtered = filter(options, params);\n\n\t\tif (params.inputValue !== \"\") {\n\t\t\tfiltered.push({\n\t\t\t\tvalue: params.inputValue,\n\t\t\t\ttitle: `Add \"${params.inputValue}\"`,\n\t\t\t});\n\t\t}\n\n\t\treturn filtered;\n\t};\n\n\tconst handleAddIntentListener = () => {\n\t\tif (intentListener) {\n\t\t\tintentStore.addIntentListener(intentListener.value);\n\t\t\tsetIntentListener(null);\n\t\t} else {\n\t\t\tsetIntentError(\"Enter intent\");\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tsetIntentValue(null);\n\t\tconst fetchIntents = async () => {\n\t\t\ttry {\n\t\t\t\tif (raiseIntentContext) {\n\t\t\t\t\tlet appIntents = await fdc3.findIntentsByContext(toJS(raiseIntentContext));\n\t\t\t\t\tif (appIntents) {\n\t\t\t\t\t\tsetIntentObjects(appIntents);\n\t\t\t\t\t\tsetIntentsForContext(\n\t\t\t\t\t\t\tappIntents.map(({ intent }: { intent: any }) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\ttitle: intent.name,\n\t\t\t\t\t\t\t\t\tvalue: intent.name,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetRaiseIntentError(\"no intents found\");\n\t\t\t}\n\t\t};\n\t\tfetchIntents();\n\t}, [raiseIntentContext]);\n\n\tuseEffect(() => {\n\t\tif (intentObjects) {\n\t\t\tconst targets = intentObjects.find((obj) => obj.intent.name === intentValue?.value);\n\t\t\tif (targets?.apps) {\n\t\t\t\tsetIntentTargets(targets.apps);\n\t\t\t}\n\t\t}\n\t}, [intentValue]);\n\n\tuseEffect(() => {\n\t\tconst fetchIntents = async () => {\n\t\t\tif (!raiseIntentWithContextContext) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlet appIntentsForContext = await fdc3.findIntentsByContext(toJS(raiseIntentWithContextContext));\n\t\t\t\tif(!appIntentsForContext){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet pairObject: any[] = [];\n\t\t\t\tappIntentsForContext.forEach((intent) => {\n\t\t\t\t\tintent?.apps.forEach((app) => {\n\t\t\t\t\t\tpairObject.push({\n\t\t\t\t\t\t\tname: `${app.appId || app.name} - ${intent.intent.name}`,\n\t\t\t\t\t\t\tapp,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tsetContextIntentObjects(pairObject as any[]);\n\t\t\t} catch (e) {}\n\t\t};\n\t\tfetchIntents();\n\t}, [raiseIntentWithContextContext]);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Raise Intent</Typography>\n\t\t\t</Grid>\n\n\t\t\t<form className={classes.form} noValidate autoComplete=\"off\">\n\t\t\t\t<Grid container direction=\"row\" spacing={2}>\n\t\t\t\t\t<Grid container item spacing={2} justifyContent=\"flex-end\" className={classes.spread}>\n\t\t\t\t\t\t<Grid item className={classes.field}>\n\t\t\t\t\t\t\t<ContextTemplates handleTabChange={handleTabChange} contextStateSetter={setRaiseIntentContext} />\n\t\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\t\tclassName={classes.rightPadding}\n\t\t\t\t\t\t\t\tid=\"raise-intent\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tselectOnFocus\n\t\t\t\t\t\t\t\tblurOnSelect\n\t\t\t\t\t\t\t\tclearOnBlur\n\t\t\t\t\t\t\t\thandleHomeEndKeys\n\t\t\t\t\t\t\t\tvalue={intentValue}\n\t\t\t\t\t\t\t\tonChange={handleChangeListener(setIntentValue, setRaiseIntentError)}\n\t\t\t\t\t\t\t\tfilterOptions={filterOptions}\n\t\t\t\t\t\t\t\toptions={intentsForContext || intentListenersOptions}\n\t\t\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\t\t\trenderOption={(option) => option.title}\n\t\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\t\t\tlabel=\"INTENT TYPE\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter Intent Type\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\t\terror={!!raiseIntentError}\n\t\t\t\t\t\t\t\t\t\thelperText={raiseIntentError}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Grid className={classes.rightPadding}>\n\t\t\t\t\t\t\t\t<FormControl variant=\"outlined\" size=\"small\" className={classes.targetSelect}>\n\t\t\t\t\t\t\t\t\t<InputLabel id=\"intent-target-app\">Target (optional)</InputLabel>\n\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\tlabelId=\"intent-target-app\"\n\t\t\t\t\t\t\t\t\t\tid=\"intent-target-app-select\"\n\t\t\t\t\t\t\t\t\t\tvalue={targetApp ?? \"\"}\n\t\t\t\t\t\t\t\t\t\tonChange={handleTargetChange}\n\t\t\t\t\t\t\t\t\t\tlabel=\"Target (optional)\"\n\t\t\t\t\t\t\t\t\t\tMenuProps={{\n\t\t\t\t\t\t\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\ttransformOrigin: {\n\t\t\t\t\t\t\t\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tgetContentAnchorEl: null,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{!intentTargets?.length && (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"\" disabled>\n\t\t\t\t\t\t\t\t\t\t\t\tNo Target Apps Found\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{intentTargets?.length && (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key=\"\" value=\"None\">\n\t\t\t\t\t\t\t\t\t\t\t\tNone\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{intentTargets?.length &&\n\t\t\t\t\t\t\t\t\t\t\tintentTargets.map((target) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={target.appId || target.name} value={target.appId || target.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{target.appId || target.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t{intentResolution?.source && <IntentResolutionField data={intentResolution} />}\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={handleRaiseIntent} disabled={!raiseIntentContext}>\n\t\t\t\t\t\t\t\tRaise Intent\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.raiseIntent, \"raiseIntent\")}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<div className={classes.border}></div>\n\n\t\t\t\t\t<Grid container item spacing={2} justifyContent=\"flex-end\" className={classes.spread}>\n\t\t\t\t\t\t<Grid item xs={12} className={classes.bottomMargin}>\n\t\t\t\t\t\t\t<Typography variant=\"h5\">Raise Intent for Context</Typography>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item className={`${classes.field} ${classes.removeSidePadding}`}>\n\t\t\t\t\t\t\t<ContextTemplates\n\t\t\t\t\t\t\t\thandleTabChange={handleTabChange}\n\t\t\t\t\t\t\t\tcontextStateSetter={setRaiseIntentWithContextContext}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Grid className={classes.rightPadding}>\n\t\t\t\t\t\t\t\t<FormControl variant=\"outlined\" size=\"small\" className={classes.targetSelect}>\n\t\t\t\t\t\t\t\t\t<InputLabel id=\"intent-context-target-app\">Target (optional)</InputLabel>\n\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\tlabelId=\"intent-context-target-app\"\n\t\t\t\t\t\t\t\t\t\tid=\"intent-context-target-app-select\"\n\t\t\t\t\t\t\t\t\t\tvalue={contextTargetApp ?? \"\"}\n\t\t\t\t\t\t\t\t\t\tonChange={handleContextTargetChange}\n\t\t\t\t\t\t\t\t\t\tlabel=\"Target (optional)\"\n\t\t\t\t\t\t\t\t\t\tMenuProps={{\n\t\t\t\t\t\t\t\t\t\t\tanchorOrigin: {\n\t\t\t\t\t\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\ttransformOrigin: {\n\t\t\t\t\t\t\t\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\t\t\t\t\t\t\t\thorizontal: \"left\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tgetContentAnchorEl: null,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{!contextIntentObjects?.length && (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"\" disabled>\n\t\t\t\t\t\t\t\t\t\t\t\tNo Target Apps Found\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{contextIntentObjects?.length && (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key=\"\" value=\"None\">\n\t\t\t\t\t\t\t\t\t\t\t\tNone\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{contextIntentObjects?.length &&\n\t\t\t\t\t\t\t\t\t\t\tcontextIntentObjects.map((target) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value={target.name} key={target.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{target.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tdisabled={!raiseIntentWithContextContext}\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={handleRaiseIntentForContext}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRaise intent for context\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.raiseIntentForContext, \"raiseIntentForContext\")}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<div className={classes.border}></div>\n\n\t\t\t\t\t<Grid container item spacing={2} justifyContent=\"flex-end\" className={classes.spread}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<Typography className={classes.bottomMargin} variant=\"h5\">\n\t\t\t\t\t\t\t\tAdd Context Listener\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item className={`${classes.field} ${classes.removeSidePadding}`}>\n\t\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\t\tid=\"intent-listener\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tselectOnFocus\n\t\t\t\t\t\t\t\tblurOnSelect\n\t\t\t\t\t\t\t\tclearOnBlur\n\t\t\t\t\t\t\t\thandleHomeEndKeys\n\t\t\t\t\t\t\t\tvalue={intentListener}\n\t\t\t\t\t\t\t\tonChange={handleChangeListener(setIntentListener, setIntentError)}\n\t\t\t\t\t\t\t\tfilterOptions={filterOptions}\n\t\t\t\t\t\t\t\toptions={intentListenersOptions}\n\t\t\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\t\t\trenderOption={(option) => option.title}\n\t\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t\t<TemplateTextField\n\t\t\t\t\t\t\t\t\t\tlabel=\"INTENT LISTENER\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter Intent Type\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\t\terror={!!intentError}\n\t\t\t\t\t\t\t\t\t\thelperText={intentError}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item className={classes.controls}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonClick={handleAddIntentListener}\n\t\t\t\t\t\t\t\tdisabled={intentListener === null}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd Listener\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\taria-label=\"Copy code example\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={copyToClipboard(codeExamples.intentListener, \"addIntentListener\")}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FileCopyIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t</div>\n\t);\n});\n","import React, { FormEvent, useState } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { Button, IconButton, Tooltip, Typography, Grid, TextField } from \"@material-ui/core\";\nimport { observer } from \"mobx-react\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport Autocomplete, { createFilterOptions } from \"@material-ui/lab/Autocomplete\";\nimport contextStore from \"../store/ContextStore\";\nimport appChannelStore from \"../store/AppChannelStore\";\nimport { codeExamples } from \"../fixtures/codeExamples\";\nimport { TemplateTextField } from \"./common/TemplateTextField\";\nimport { copyToClipboard } from \"./common/CopyToClipboard\";\nimport { ContextTemplates } from \"./ContextTemplates\";\nimport { ContextType } from \"../utility/Fdc3Api\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: \"flex\",\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t},\n\t\tform: {\n\t\t\tdisplay: \"flex\",\n\t\t\tflexWrap: \"wrap\",\n\t\t\talignItems: \"center\",\n\t\t\tmarginTop: theme.spacing(1),\n\t\t\t\"& > *\": {\n\t\t\t\tmargin: theme.spacing(1),\n\t\t\t\tmarginLeft: \"0px\",\n\t\t\t},\n\t\t},\n        contextType: {\n\t\t\tflexGrow: 1,\n\t\t\tminWidth: \"190px\",\n\t\t},\n        topMargin: {\n            marginTop: theme.spacing(2),\n        },\n\t\tcontrols: {\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tmarginLeft: 0,\n\t\t\t},\n\t\t\t\"& > *\": {\n\t\t\t\tmarginRight: theme.spacing(1),\n\t\t\t},\n\t\t\t\"& > *:last-child\": {\n\t\t\t\tmarginRight: 0,\n\t\t\t},\n\t\t\t\"& .MuiIconButton-sizeSmall\": {\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t},\n\t\trightAlign: {\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"flex-end\",\n\t\t},\n\t\tspread: {\n\t\t\tflexDirection: \"row\",\n\t\t\t\"& > *:first-child\": {\n\t\t\t\tpaddingLeft: \"0px\",\n\t\t\t},\n\t\t},\n\t\ttextField: {\n\t\t\twidth: \"100%\",\n\t\t\t\"& input\": {\n\t\t\t\theight: \"29px\",\n\t\t\t\tpadding: \"6px\",\n\t\t\t},\n\t\t},\n\t\th4: {\n\t\t\tfontSize: \"22px\",\n\t\t},\n        h6: {\n            fontSize: \"14px\"\n        },\n\t\tfield: {\n\t\t\tflexGrow: 1,\n\t\t\tmarginRight: theme.spacing(1),\n\t\t\tminWidth: \"190px\",\n\t\t},\n\t\tborder: {\n\t\t\theight: \"1px\",\n\t\t\twidth: \"100%\",\n\t\t\tbackgroundColor: \"#acb2c0\",\n\t\t\tmarginTop: \"24px\",\n\t\t\tmarginBottom: \"16px\",\n\t\t},\n        rightPadding: {\n            paddingRight: theme.spacing(.5),\n        },\n\t})\n);\n\ninterface ListenerOptionType {\n\ttitle: string;\n\tvalue: string;\n\ttype: string | undefined;\n}\n\ninterface FilterOptionsState<T> {\n\tinputValue: string;\n\tgetOptionLabel: (option: T) => string;\n}\n\nconst listenerFilter = createFilterOptions<ListenerOptionType>();\n\nexport const AppChannels = observer(({handleTabChange} : {handleTabChange:any}) => {\n    const classes = useStyles();\n    const [render, setRender] = useState<boolean>(false);\n    const [currentAppChannelId, setCurrentAppChannelId] = useState<string>(\"\");\n    const contextListenersOptionsAll: ListenerOptionType[] = contextStore.contextsList.map(({ id, template }) => {\n        return {\n\t\t\ttitle: id,\n\t\t\tvalue: id,\n\t\t\ttype: template?.type\n\t\t};\n\t});\n\tcontextListenersOptionsAll.unshift({\n\t\ttitle: \"All\",\n\t\tvalue: \"all\",\n\t\ttype: \"All\"\n\t});\n\n    const contextListenersOptions = Array.from(new Map(contextListenersOptionsAll.reverse().map((item) => [item[\"type\"], item])).values()).reverse();\n\n\n    const handleGetorCreateChannel = (e: FormEvent | null = null) =>{\n        e?.preventDefault();\n        if (currentAppChannelId) {\n           let foundChannel = appChannelStore.appChannelsList.find((currentChannel)=>currentChannel.id === currentAppChannelId);\n            if (!foundChannel) {\n                appChannelStore.getOrCreateChannel(currentAppChannelId);\n            }\n           setCurrentAppChannelId(\"\");\n        }\n\n    };\n\n    const handleChannelChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n        setCurrentAppChannelId(event.target.value as string);\n    };\n\n    const getOptionLabel = (option: ListenerOptionType) => option.type || option.title;\n\t\t\n    const handleChangeAppListener = (channelId: string) => (event: React.ChangeEvent<{}>, newValue: any) => {\n            let foundChannel = appChannelStore.appChannelsList.find((currentChannel)=>currentChannel.id === channelId);\n            if (!foundChannel) {\n                return;\n            }\n\n            let newListener;\n            let foundListener = appChannelStore.appChannelListeners?.find((currentListener)=>currentListener.type === newValue && currentListener.channelId === channelId);\n            if (foundListener) {\n                return;\n            }\n\n            if (typeof newValue === \"string\") {\n                newListener = {\n                    title: newValue,\n                    value: newValue,\n                    type: newValue\n                };\n            } else if (newValue && newValue.inputValue) {\n                newListener = {\n                    title: newValue.inputValue,\n                    value: newValue.inputValue,\n                    type: newValue.inputValue\n                };\n            } else {\n                newListener = newValue;\n            }\n\n            foundChannel.currentListener = newListener;\n            foundChannel.listenerError = \"\";\n                \n\t};\n    \n    const handleAddContextListener = (channelId: string) => {\n        let foundChannel = appChannelStore.appChannelsList.find((currentChannel)=>currentChannel.id === channelId);\n        if (!foundChannel) {\n            return;\n        }\n\n        if(foundChannel?.currentListener){\n            if (appChannelStore.isContextListenerExists(channelId, foundChannel?.currentListener.type)) {\n                foundChannel.listenerError = \"Listener already added\";\n            } else {\n                appChannelStore.addChannelListener(channelId, foundChannel.currentListener.type);\n                foundChannel.listenerError = \"\";\n            }\n        } else {\n            foundChannel.listenerError = \"Enter context type\";\n        }\n        setRender(render);\n\t};\n\n    const handleContextStateChange = (context: ContextType, channel: string) => {\n        let foundChannel = appChannelStore.appChannelsList.find((currentChannel)=>currentChannel.id === channel);\n\t\tif(foundChannel) {\n\t\t\tfoundChannel.context = context;\n\t\t}\n\t};\n\n    const handleBroadcast = (channel: any) => {\n        if (channel.context) {\n            appChannelStore.broadcast(channel.id, channel.context);\n        }\n    };\n\n\tconst filterOptions = (options: ListenerOptionType[], params: FilterOptionsState<ListenerOptionType>) => {\n        const filtered = listenerFilter(options, params);\n\t\tif (params.inputValue !== \"\") {\n\t\t\tfiltered.push({\n\t\t\t\tvalue: params.inputValue,\n\t\t\t\ttitle: `Add \"${params.inputValue}\"`,\n\t\t\t\ttype: params.inputValue\n\t\t\t});\n\t\t}\n\t\treturn filtered;\n\t};\n\n    return (\n        <div className={classes.root}>\n            <Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h5\">Get Channel</Typography>\n\t\t\t</Grid>\n\n            <form className={classes.form} noValidate autoComplete=\"off\" onSubmit={(e) => handleGetorCreateChannel(e)}>\n                <Grid container direction=\"row\" spacing={1}>\n                    <Grid item className={classes.field}>\n                        <TextField \n                            fullWidth \n                            variant=\"outlined\" \n                            label=\"Channel Name\" \n                            type=\"text\" \n                            size=\"small\" \n                            onChange={handleChannelChange}\n                            value={currentAppChannelId}\n                        />\n                    </Grid>\n                    <Grid item className={classes.controls}>\n                        <Button\n                            variant=\"contained\"\n                            color=\"primary\"\n                            onClick={handleGetorCreateChannel}\n                            disabled={!currentAppChannelId}\n                        >\n                            Get or Create Channel\n                        </Button>\n                    </Grid>\n                </Grid>\n            </form>\n            <div className={classes.border}></div>\n                {appChannelStore.appChannelsList.length > 0 && (\n                    appChannelStore.appChannelsList.map((channel) => (\n                        <Grid container key={channel.id} spacing={2} className={classes.spread}>\n                            <Grid item className={classes.field}>\n                                <Typography variant=\"h5\">\n                                    Channel: {channel.id}\n                                </Typography>\n                            </Grid>\n\n                            <Grid container className={classes.topMargin}>\n                                <Grid item xs={12}>\n                                    <Typography variant=\"h5\" className={classes.h6}>\n                                        Broadcast Context\n                                    </Typography>\n                                </Grid>\n                                \n                                <Grid item sm={7}>\n                                    <ContextTemplates handleTabChange={handleTabChange} contextStateSetter={handleContextStateChange} channel={channel.id} />\n                                </Grid>\n                                <Grid item container className={classes.controls} sm={5} justifyContent=\"flex-end\">\n                                    <Button\n                                        disabled={!channel.context}\n                                        variant=\"contained\"\n                                        color=\"primary\"\n                                        onClick={() => handleBroadcast(channel)}\n                                    >\n                                        Broadcast Context\n                                    </Button>\n\n                                    <Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n                                        <IconButton\n                                            size=\"small\"\n                                            aria-label=\"Copy code example\"\n                                            color=\"primary\"\n                                            onClick={copyToClipboard(codeExamples.appChannelBroadcast, \"appChannelBroadcast\")}\n                                        >\n                                            <FileCopyIcon />\n                                        </IconButton>\n                                    </Tooltip>\n                                </Grid>\n                            </Grid>\n                            <Grid container>\n                            <Grid item xs={12}>\n                                    <Typography variant=\"h5\" className={classes.h6}>\n                                        Add Context Listener\n                                    </Typography>\n                                </Grid>\n                                <Grid item sm={7} className={classes.rightPadding}>\n                                    <Autocomplete\n                                        size=\"small\"\n                                        selectOnFocus\n                                        blurOnSelect\n                                        clearOnBlur\n                                        handleHomeEndKeys\n                                        value={channel.currentListener}\n                                        onChange={handleChangeAppListener(channel.id)}\n                                        filterOptions={filterOptions}\n                                        options={contextListenersOptions}\n                                        getOptionLabel={getOptionLabel}\n                                        renderOption={(option) => option.type}\n                                        renderInput={(params) => (\n                                            <TemplateTextField\n                                                label=\"CONTEXT TYPE\"\n                                                placeholder=\"Enter Context Type\"\n                                                variant=\"outlined\"\n                                                {...params}\n                                                error={!!channel.listenerError}\n                                                helperText={channel.listenerError}\n                                            />\n                                        )}\n                                        onKeyDown={(event) => {\n                                            if (event.key === 'Enter') {\n                                              event.defaultPrevented = true;\n                                              handleAddContextListener(channel.id);\n                                            }\n                                          }}\n                                    />\n                                </Grid>\n\n                                <Grid item className={classes.controls} sm={5} justifyContent=\"flex-end\">\n                                    <Button\n                                        variant=\"contained\"\n                                        color=\"primary\"\n                                        onClick={()=>handleAddContextListener(channel.id)}\n                                    >\n                                        Add Listener\n                                    </Button>\n\n                                    <Tooltip title=\"Copy code example\" aria-label=\"Copy code example\">\n                                        <IconButton\n                                            size=\"small\"\n                                            aria-label=\"Copy code example\"\n                                            color=\"primary\"\n                                            onClick={copyToClipboard(codeExamples.appChannelContextListener, \"addAppChannelContextListener\")}\n                                        >\n                                            <FileCopyIcon />\n                                        </IconButton>\n                                    </Tooltip>\n                                </Grid>\n                            </Grid>\n                            <div className={classes.border}></div>\n                        </Grid>\n                    ))\n                )}\n        </div>\n    );\n});","import React, { useEffect, useState } from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { Grid, Paper, Tabs, Tab, Typography, Link } from \"@material-ui/core\";\nimport { observer } from \"mobx-react\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport { createTheme } from \"@material-ui/core/styles\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport \"normalize.css\";\nimport \"@fontsource/roboto\";\nimport \"@fontsource/source-code-pro\";\nimport { TabPanel } from \"./components/common/TabPanel\";\nimport { Header } from \"./components/Header\";\nimport { Channels } from \"./components/Channels\";\nimport { Workbench } from \"./components/Workbench/Workbench\";\nimport { ContextCreate } from \"./components/ContextCreate\";\nimport { Intents } from \"./components/Intents\";\nimport { AppChannels } from \"./components/AppChannels\";\nimport snackbarStore from \"./store/SnackbarStore\";\nimport fdc3 from \"./utility/Fdc3Api\";\nimport \"./App.css\";\n\nconst mainTheme = createTheme({\n\tpalette: {\n\t\tprimary: {\n\t\t\tlight: \"#005d85\",\n\t\t\tmain: \"#0086bf\",\n\t\t\tdark: \"#339ecb\",\n\t\t\tcontrastText: \"#fff\",\n\t\t},\n\t},\n\tprops: {\n\t\tMuiLink: {\n\t\t\tunderline: \"hover\"\n\t\t}\n\t}\n});\n\nmainTheme.typography.h4 = {\n\tfontFamily: \"Source Code Pro\",\n\tfontSize: \"20px\",\n\tcolor: \"#0086bf\",\n\tpaddingLeft: \"4px\",\n\tpaddingBottom: \"11px\",\n};\n\nmainTheme.typography.h5 = {\n\tfontSize: \"16px\",\n};\n\nmainTheme.typography.body1 = {\n\tfontSize: \"1rem\",\n    fontFamily: \"Roboto, Helvetica, Arial, sans-serif\",\n    fontWeight: 400,\n    lineHeight: 1.5,\n    letterSpacing: \"0.00938em\",\n\tmarginBlockStart: \"10px\",\n\tmarginBlockEnd: \"10px\",\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\t\"@global\": {\n\t\t\t\".MuiFormHelperText-contained.Mui-error\": {\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tmarginLeft: \"9px\",\n\t\t\t\tbottom: \"-11px\",\n\t\t\t\tpadding: \"0 4px\",\n\t\t\t\tbackgroundColor: theme.palette.common.white,\n\t\t\t},\n\t\t\t\".MuiButton-contained\": {\n\t\t\t\tboxShadow: \"none\",\n\t\t\t},\n\t\t\t\".MuiGrid-item:has(> .MuiButton-root)\": {\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\talignItems: \"center\",\n\t\t\t},\n\t\t\t\".MuiInputBase-root.Mui-disabled\": {\n\t\t\t\tcolor: \"rgba(0, 0, 0, 0.6)\",\n\t\t\t\tcursor: \"default\",\n\t\t\t },\n\t\t},\n\t\troot: {\n\t\t\tflexGrow: 1,\n\t\t},\n\t\theader: {\n\t\t\tmarginBottom: theme.spacing(2),\n\t\t},\n\t\tbody: {\n\t\t\theight: \"100%\",\n\t\t},\n\t\tpaper: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t\tpadding: theme.spacing(2),\n\t\t\theight: \"100%\",\n\t\t\t\"&:first-child\": {\n\t\t\t\tmarginTop: 0,\n\t\t\t},\n\t\t},\n\t\ttabs: {\n\t\t\tborderBottomColor: \"#acb2c0\",\n\t\t\tborderBottomStyle: \"solid\",\n\t\t\tborderBottomWidth: \"1px\",\n\t\t\tminHeight: \"28px\",\n\t\t\t\"& [aria-selected='true']\": {\n\t\t\t\tbackgroundColor: \"rgba(0, 134, 191, 0.21)\",\n\t\t\t},\n\t\t},\n\t\ttabIndicator: {\n\t\t\tbackgroundColor: \"rgba(0, 134, 191, 0.21)\",\n\t\t},\n\t\tindicator: {\n\t\t\tbackgroundColor: \"#00bbe1\",\n\t\t},\n\t\tfooter: {\n\t\t\tfontSize: \"10px\",\n\t\t\tfontStyle: \"italic\",\n\t\t\tcolor: \"#5b606f\",\n\t\t\tflexDirection: \"row\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tmargin: theme.spacing(2),\n\t\t\t\"& *:first-child\": {\n\t\t\t\tpaddingTop: \"27px\",\n\t\t\t},\n\t\t},\n\t\tlink: {\n\t\t\tcolor: \"#5b606f\",\n\t\t\tfontWeight: \"bold\",\n\t\t\t\"&:hover\": {\n\t\t\t\tcolor: \"#5b606f\",\n\t\t\t},\n\t\t},\n\t\tcode: {\n\t\t\tfontFamily: \"courier, courier new, serif\",\n\t\t},\n\t\tworkbench: {\n\t\t\t[theme.breakpoints.down('sm')]: {\n\t\t\t\tmarginTop: '30px'\n\t\t\t}\n\t\t}\n\t})\n);\n\nconst openAPIDocs = (event: React.MouseEvent<HTMLElement>) => {\n\tevent.preventDefault();\n\twindow.open(\"https://fdc3.finos.org/docs/api/overview\", \"FDC3ApiDocs\");\n\treturn false;\n};\n\nconst openSpecAccessDocs = (event: React.MouseEvent<HTMLElement>) => {\n\tevent.preventDefault();\n\twindow.open(\"https://fdc3.finos.org/docs/api/spec#api-access\", \"FDC3ApiDocs\");\n\treturn false;\n};\n\nconst openSupportedPlatformsDocs = (event: React.MouseEvent<HTMLElement>) => {\n\tevent.preventDefault();\n\twindow.open(\"https://fdc3.finos.org/docs/supported-platforms\", \"FDC3ApiDocs\");\n\treturn false;\n};\n\nexport const App = observer(() => {\n\tconst classes = useStyles();\n\tconst [fdc3Available, setFdc3Available] = useState(false);\n\tconst [openSnackbar, setOpenSnackbar] = useState(false);\n\tconst [tabIndex, setTabIndex] = useState(0);\n\tconst [contextName, setContextName] = useState('');\n\n\tconst handleTabChange = (event: React.ChangeEvent<{}>, newIndex: number, name: string = '') => {\n\t\tsetContextName(name)\n\t\tsetTabIndex(newIndex);\n\t};\n\n\tconst handleClose = (event?: React.SyntheticEvent, reason?: string) => {\n\t\tif (reason === \"clickaway\") {\n\t\t\treturn;\n\t\t}\n\n\t\tsetOpenSnackbar(false);\n\t\t// Need to show close animation\n\t\tsetTimeout(() => snackbarStore.clearSnackbarData(), 500);\n\t};\n\n\t//check if the FDC3 API is available so we know whether to render\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tawait fdc3.fdc3Ready(5000);\n\t\t\t\tsetFdc3Available(true);\n\t\t\t} catch (e) {}\n\t\t})();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsetOpenSnackbar(!!snackbarStore.snackbarData);\n\t}, [snackbarStore.snackbarData]);\n\n\treturn (\n\t\t<ThemeProvider theme={mainTheme}>\n\t\t\t<Grid className={classes.root} container>\n\t\t\t\t<Grid className={classes.header} container item xs={12}>\n\t\t\t\t\t<Header fdc3Available={fdc3Available} />\n\t\t\t\t</Grid>\n\t\t\t\t{fdc3Available ? (\n\t\t\t\t\t<Grid className={classes.body} container spacing={2} item xs={12} style={{ marginLeft: \"0px\" }}>\n\t\t\t\t\t\t<Grid item xs={12} md={8} style={{ flex: 1 }}>\n\t\t\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\t\t\tvalue={tabIndex}\n\t\t\t\t\t\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\t\t\t\t\t\tonChange={handleTabChange}\n\t\t\t\t\t\t\t\t\tvariant=\"scrollable\"\n\t\t\t\t\t\t\t\t\tscrollButtons=\"auto\"\n\t\t\t\t\t\t\t\t\tclassName={classes.tabs}\n\t\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\t\tindicator: classes.indicator,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<Tab label=\"Contexts\" />\n\t\t\t\t\t\t\t\t\t<Tab label=\"Intents\" />\n\t\t\t\t\t\t\t\t\t<Tab label=\"User Channels\" />\n\t\t\t\t\t\t\t\t\t<Tab label=\"App Channels\" />\n\t\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\t\t<TabPanel value={tabIndex} index={0}>\n\t\t\t\t\t\t\t\t\t<ContextCreate contextName={contextName}/>\n\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t\t<TabPanel value={tabIndex} index={1}>\n\t\t\t\t\t\t\t\t\t<Intents handleTabChange={handleTabChange}/>\n\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t\t<TabPanel value={tabIndex} index={2}>\n\t\t\t\t\t\t\t\t\t<Channels handleTabChange={handleTabChange}/>\n\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t\t<TabPanel value={tabIndex} index={3}>\n\t\t\t\t\t\t\t\t\t<AppChannels handleTabChange={handleTabChange}/>\n\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item xs={12} md={4} className={classes.workbench}>\n\t\t\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t\t\t<Workbench />\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t) : (\n\t\t\t\t\t<Grid className={classes.body} container spacing={2} item xs={12} style={{ marginLeft: \"0px\" }}>\n\t\t\t\t\t\t<Grid container direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={2} item xs={12}>\n\t\t\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t\t\t<Typography variant=\"h4\">FDC3 API not detected!</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t\t\t\tAn FDC3 desktop agent implementation was not found at{\" \"}\n\t\t\t\t\t\t\t\t\t<span className={classes.code}>window.fdc3</span>.\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t\t\t\tFor web applications to be FDC3-enabled, they need to run in the context of an \n\t\t\t\t\t\t\t\t\tagent that makes the FDC3 API available to the application. This desktop agent is \n\t\t\t\t\t\t\t\t\talso responsible for lauching and co-ordinating applications. It could be a browser \n\t\t\t\t\t\t\t\t\textension, web app, or full-fledged desktop container framework.\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\t\t\t\tSee the FDC3 standard documentation for details on{\" \"}\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tclassName={classes.link}\n\t\t\t\t\t\t\t\t\t\thref=\"https://fdc3.finos.org/docs/supported-platforms\"\n\t\t\t\t\t\t\t\t\t\tonClick={openSupportedPlatformsDocs}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tsupported platforms\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t{\" \"}and{\" \"}\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tclassName={classes.link}\n\t\t\t\t\t\t\t\t\t\thref=\"https://fdc3.finos.org/docs/api/spec#api-access\"\n\t\t\t\t\t\t\t\t\t\tonClick={openSpecAccessDocs}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\taccessing the FDC3 API\n\t\t\t\t\t\t\t\t\t</Link>.\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t)}\n\n\t\t\t\t<Grid container item xs={12} className={classes.footer}>\n\t\t\t\t\t<Typography variant=\"body1\">\n\t\t\t\t\t\tLearn more about the{\" \"}\n\t\t\t\t\t\t<Link className={classes.link} href=\"https://fdc3.finos.org/docs/api/overview\" onClick={openAPIDocs}>\n\t\t\t\t\t\t\tFDC3 Standard and APIs\n\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t| Proud member of the{\" \"}\n\t\t\t\t\t\t<Link className={classes.link} href=\"https://www.finos.org/\">\n\t\t\t\t\t\t\tFintech Open Source Foundation\n\t\t\t\t\t\t</Link>{\" \"}\n\t\t\t\t\t\t| Copyright © 2021 Cosaic, inc. &amp; Contributors to the FDC3 standards project\n\t\t\t\t\t</Typography>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\n\t\t\t<Snackbar key={snackbarStore.snackbarData?.id} open={openSnackbar} autoHideDuration={4000} onClose={handleClose}>\n\t\t\t\t<Alert elevation={6} variant=\"filled\" onClose={handleClose} severity={snackbarStore.snackbarData?.type}>\n\t\t\t\t\t{snackbarStore.snackbarData?.message}\n\t\t\t\t</Alert>\n\t\t\t</Snackbar>\n\t\t</ThemeProvider>\n\t);\n});\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}